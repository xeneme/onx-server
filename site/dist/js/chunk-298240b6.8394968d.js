(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-298240b6"],{2356:function(e,t,a){},"28f4":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"changename"},[a("div",{staticClass:"changename_wrap"},[a("div",{staticClass:"changename__title"},[a("font-awesome-icon",{staticClass:"changename__title__icon",attrs:{icon:"times"},on:{click:e.close}}),a("p",[e._v(" Change your name ")])],1),a("div",{staticClass:"changename__form"},[a("div",{staticClass:"changename__form_loading"},[a("font-awesome-icon",{staticClass:"changename__form_loading_icon fa-spin",attrs:{icon:"spinner"}})],1),a("ProfileInput",{attrs:{type:"name",place:"top",placeholder:"Firstname",busy:e.busy},on:{typed:function(t){e.firstName=t}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeName(t)}}}),a("ProfileInput",{attrs:{type:"name",place:"bottom",placeholder:"Lastname",busy:e.busy},on:{typed:function(t){e.lastName=t}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeName(t)}}}),a("Button",{class:["changename__form__button_submit",e.busy?"busy_btn":""],attrs:{text:"Save",theme:"primary_big"},nativeOn:{click:function(t){return e.changeName(t)}}})],1)])])},s=[],i=a("c8df"),o=a("894a"),c={name:"ChangeNameForm",components:{Button:i["a"],ProfileInput:o["a"]},props:["show"],watch:{show:function(e){this.visibleForm(e)}},data:function(){return{busy:!1,firstName:"",lastName:""}},methods:{changeName:function(){var e=this;this.firstName||this.lastName||this.close(),this.loading(),this.axios.post(window.location.protocol+"//"+window.location.host+"/api/user/update",{firstName:this.firstName,lastName:this.lastName},{headers:{Authorization:sessionStorage.getItem("auth-token")}}).then((function(t){e.loaded(),e.success(t.data.token),e.handleSuccess(t.data)})).catch((function(t){e.loaded(),t.response&&e.handleError(t.response.data)}))},handleError:function(e){e&&this.$store.commit("popups/ADD_ALERT",{type:"error",title:e.stage,message:e.message})},handleSuccess:function(e){this.$store.commit("popups/ADD_ALERT",{type:"info",title:e.stage,message:e.message})},loading:function(){this.busy=!0,this.$el.querySelector(".changename__form_loading").style.display="grid"},loaded:function(){this.busy=!1,this.$el.querySelector(".changename__form_loading").style.display="none"},success:function(e){this.$store.commit("auth/GET_AUTHORIZED",{token:e}),this.$store.commit("auth/CHANGE_NAME",{first:this.firstName,last:this.lastName}),this.close()},visibleForm:function(e){var t=this;this.$el.style.top=0,e?(this.$el.style.display="flex",this.$anime({targets:".changename_wrap",scale:[.9,1],opacity:[0,1],duration:200,easing:"easeInOutSine",update:function(e){e.progress>30&&(t.$el.style.backgroundColor="#00002299",t.$el.style.backdropFilter="blur(2px)")}})):(this.$el.style.backgroundColor="transparent",this.$el.style.backdropFilter="blur(0px)",this.$anime({targets:".changename_wrap",scale:[1,.9],opacity:[1,0],duration:200,easing:"easeInOutSine",complete:function(){t.$el.style.display="none"}}))},close:function(){this.$store.commit("popups/CHANGE_NAME",!1),history.replaceState(null,null," ")}},mounted:function(){var e=this;this.visibleForm(this.show),this.$el.onclick=function(t){t.target===e.$el.querySelector(".changename_wrap")&&e.close()},document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.close()}))}},r=c,l=(a("34a0"),a("2877")),u=Object(l["a"])(r,n,s,!1,null,null,null);t["a"]=u.exports},"340a":function(e,t,a){},"34a0":function(e,t,a){"use strict";var n=a("4230"),s=a.n(n);s.a},4230:function(e,t,a){},6717:function(e,t,a){"use strict";var n=a("2356"),s=a.n(n);s.a},7281:function(e,t,a){},"78c1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("ChangeNameForm",{attrs:{show:e.changeNameVisibility}})],1)},s=[],i=a("5530"),o=a("2f62"),c=a("28f4"),r={name:"Test",components:{ChangeNameForm:c["a"]},computed:Object(i["a"])({},Object(o["b"])({changeNameVisibility:"popups/changeNameVisibility"}))},l=r,u=(a("6717"),a("2877")),p=Object(u["a"])(l,n,s,!1,null,null,null);t["default"]=p.exports},"894a":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:["profileinput",e.place]},[a("div",{staticClass:"profileinput_icon_wrap"},[a("div",{staticClass:"profileinput_icon"},[a("font-awesome-icon",{attrs:{icon:e.icon}})],1)]),"checkbox"===e.parsedType?a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"profileinput_input",attrs:{placeholder:e.placeholder,disabled:e.busy,type:"checkbox"},domProps:{checked:Array.isArray(e.inputValue)?e._i(e.inputValue,null)>-1:e.inputValue},on:{change:function(t){var a=e.inputValue,n=t.target,s=!!n.checked;if(Array.isArray(a)){var i=null,o=e._i(a,i);n.checked?o<0&&(e.inputValue=a.concat([i])):o>-1&&(e.inputValue=a.slice(0,o).concat(a.slice(o+1)))}else e.inputValue=s}}}):"radio"===e.parsedType?a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"profileinput_input",attrs:{placeholder:e.placeholder,disabled:e.busy,type:"radio"},domProps:{checked:e._q(e.inputValue,null)},on:{change:function(t){e.inputValue=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"profileinput_input",attrs:{placeholder:e.placeholder,disabled:e.busy,type:e.parsedType},domProps:{value:e.inputValue},on:{input:function(t){t.target.composing||(e.inputValue=t.target.value)}}})])},s=[],i={name:"ProfileInput",props:["type","busy","placeholder","place"],data:function(){return{inputValue:"",mounted:!1}},watch:{inputValue:function(e){this.$emit("typed",e)}},computed:{icon:function(){return this.mounted&&this.$anime({targets:this.$el.querySelector(".profileinput_icon *"),scale:[0,1],duration:1200}),{name:"user",password:"lock",repeatPassword:"lock"}[this.type]},parsedType:function(){return{name:"text",password:"password",repeatPassword:"password"}[this.type]}},mounted:function(){this.mounted=!0}},o=i,c=(a("c630"),a("2877")),r=Object(c["a"])(o,n,s,!1,null,"139470d0",null);t["a"]=r.exports},c630:function(e,t,a){"use strict";var n=a("7281"),s=a.n(n);s.a},c8df:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{class:["button",e.theme||"primary"]},[e._v(e._s(e.text))])},s=[],i={name:"Button",props:["theme","text"]},o=i,c=(a("dab0"),a("2877")),r=Object(c["a"])(o,n,s,!1,null,"689fcf99",null);t["a"]=r.exports},dab0:function(e,t,a){"use strict";var n=a("340a"),s=a.n(n);s.a}}]);
//# sourceMappingURL=chunk-298240b6.8394968d.js.map