(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-298240b6"],{2356:function(e,t,n){},"28f4":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"changename"},[n("div",{staticClass:"changename_wrap"},[n("div",{staticClass:"changename__title"},[n("font-awesome-icon",{staticClass:"changename__title__icon",attrs:{icon:"times"},on:{click:e.close}}),n("p",[e._v(" Change your name ")])],1),n("div",{staticClass:"changename__form"},[n("div",{staticClass:"changename__form_loading"},[n("font-awesome-icon",{staticClass:"changename__form_loading_icon fa-spin",attrs:{icon:"spinner"}})],1),n("ProfileInput",{attrs:{type:"name",place:"top",placeholder:"Firstname",busy:e.busy},on:{typed:function(t){e.firstName=t}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeName(t)}}}),n("ProfileInput",{attrs:{type:"name",place:"bottom",placeholder:"Lastname",busy:e.busy},on:{typed:function(t){e.lastName=t}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeName(t)}}}),n("Button",{class:["changename__form__button_submit",e.busy?"busy_btn":""],attrs:{text:"Save",theme:"primary_big"},nativeOn:{click:function(t){return e.changeName(t)}}})],1)])])},s=[],i=n("c8df"),o=n("894a"),c={name:"ChangeNameForm",components:{Button:i["a"],ProfileInput:o["a"]},props:["show"],watch:{show:function(e){this.visibleForm(e)}},data:function(){return{busy:!1,firstName:"",lastName:""}},methods:{changeName:function(){var e=this;this.firstName||this.lastName||this.close(),this.loading(),this.axios.post(window.location.protocol+"//"+window.location.host+"/api/user/update",{firstName:this.firstName,lastName:this.lastName},{headers:{Authorization:sessionStorage.getItem("auth-token")}}).then((function(t){e.loaded(),e.success(t.data.token,t.data.profile),e.handleSuccess(t.data)})).catch((function(t){e.loaded(),t.response&&e.handleError(t.response.data)}))},handleError:function(e){e&&this.$store.commit("popups/ADD_ALERT",{type:"error",title:e.stage,message:e.message})},handleSuccess:function(e){this.$store.commit("popups/ADD_ALERT",{type:"message",title:e.stage,message:e.message})},loading:function(){this.busy=!0,this.$el.querySelector(".changename__form_loading").style.display="grid"},loaded:function(){this.busy=!1,this.$el.querySelector(".changename__form_loading").style.display="none"},success:function(e,t){this.$store.commit("auth/SET_PROFILE",{token:e,profile:t}),this.close()},visibleForm:function(e){var t=this;this.$el.style.top=0,e?(this.$el.style.display="flex",this.$anime({targets:".changename_wrap",scale:[.9,1],opacity:[0,1],duration:200,easing:"easeInOutSine",update:function(e){e.progress>30&&(t.$el.style.backgroundColor="#00002299",t.$el.style.backdropFilter="blur(2px)")}})):(this.$el.style.backgroundColor="transparent",this.$el.style.backdropFilter="blur(0px)",this.$anime({targets:".changename_wrap",scale:[1,.9],opacity:[1,0],duration:200,easing:"easeInOutSine",complete:function(){t.$el.style.display="none"}}))},close:function(){this.$store.commit("popups/CHANGE_NAME",!1),history.replaceState(null,null," ")}},mounted:function(){var e=this;this.visibleForm(this.show),this.$el.onclick=function(t){t.target===e.$el.querySelector(".changename_wrap")&&e.close()},document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.close()}))}},l=c,r=(n("34a0"),n("2877")),u=Object(r["a"])(l,a,s,!1,null,null,null);t["a"]=u.exports},"340a":function(e,t,n){},"34a0":function(e,t,n){"use strict";var a=n("4230"),s=n.n(a);s.a},4230:function(e,t,n){},6717:function(e,t,n){"use strict";var a=n("2356"),s=n.n(a);s.a},7281:function(e,t,n){},"78c1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("ChangeNameForm",{attrs:{show:e.changeNameVisibility}})],1)},s=[],i=n("5530"),o=n("2f62"),c=n("28f4"),l={name:"Test",components:{ChangeNameForm:c["a"]},computed:Object(i["a"])({},Object(o["b"])({changeNameVisibility:"popups/changeNameVisibility"}))},r=l,u=(n("6717"),n("2877")),p=Object(u["a"])(r,a,s,!1,null,null,null);t["default"]=p.exports},"894a":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["profileinput",e.place]},[n("div",{staticClass:"profileinput_icon_wrap"},[n("div",{staticClass:"profileinput_icon"},[n("font-awesome-icon",{attrs:{icon:e.icon}})],1)]),"checkbox"===e.parsedType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"profileinput_input",attrs:{placeholder:e.placeholder,disabled:e.busy,type:"checkbox"},domProps:{checked:Array.isArray(e.inputValue)?e._i(e.inputValue,null)>-1:e.inputValue},on:{change:function(t){var n=e.inputValue,a=t.target,s=!!a.checked;if(Array.isArray(n)){var i=null,o=e._i(n,i);a.checked?o<0&&(e.inputValue=n.concat([i])):o>-1&&(e.inputValue=n.slice(0,o).concat(n.slice(o+1)))}else e.inputValue=s}}}):"radio"===e.parsedType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"profileinput_input",attrs:{placeholder:e.placeholder,disabled:e.busy,type:"radio"},domProps:{checked:e._q(e.inputValue,null)},on:{change:function(t){e.inputValue=null}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"profileinput_input",attrs:{placeholder:e.placeholder,disabled:e.busy,type:e.parsedType},domProps:{value:e.inputValue},on:{input:function(t){t.target.composing||(e.inputValue=t.target.value)}}})])},s=[],i={name:"ProfileInput",props:["type","busy","placeholder","place"],data:function(){return{inputValue:"",mounted:!1}},watch:{inputValue:function(e){this.$emit("typed",e)}},computed:{icon:function(){return this.mounted&&this.$anime({targets:this.$el.querySelector(".profileinput_icon *"),scale:[0,1],duration:1200}),{name:"user",password:"lock",repeatPassword:"lock"}[this.type]},parsedType:function(){return{name:"text",password:"password",repeatPassword:"password"}[this.type]}},mounted:function(){this.mounted=!0}},o=i,c=(n("c630"),n("2877")),l=Object(c["a"])(o,a,s,!1,null,"139470d0",null);t["a"]=l.exports},c630:function(e,t,n){"use strict";var a=n("7281"),s=n.n(a);s.a},c8df:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{class:["button",e.theme||"primary"]},[e._v(e._s(e.text))])},s=[],i={name:"Button",props:["theme","text"]},o=i,c=(n("dab0"),n("2877")),l=Object(c["a"])(o,a,s,!1,null,"689fcf99",null);t["a"]=l.exports},dab0:function(e,t,n){"use strict";var a=n("340a"),s=n.n(a);s.a}}]);
//# sourceMappingURL=chunk-298240b6.f2bb646e.js.map