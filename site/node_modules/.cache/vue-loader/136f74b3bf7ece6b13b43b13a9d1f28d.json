{"remainingRequest":"C:\\Users\\PC_CREATOR\\Documents\\03backup\\_DEV\\_CUSTOMERS'_STUFF\\onyxian\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\PC_CREATOR\\Documents\\03backup\\_DEV\\_CUSTOMERS'_STUFF\\onyxian\\src\\components\\header\\Dropdown.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\PC_CREATOR\\Documents\\03backup\\_DEV\\_CUSTOMERS'_STUFF\\onyxian\\src\\components\\header\\Dropdown.vue","mtime":1594882326959},{"path":"C:\\Users\\PC_CREATOR\\Documents\\03backup\\_DEV\\_CUSTOMERS'_STUFF\\onyxian\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\PC_CREATOR\\Documents\\03backup\\_DEV\\_CUSTOMERS'_STUFF\\onyxian\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\PC_CREATOR\\Documents\\03backup\\_DEV\\_CUSTOMERS'_STUFF\\onyxian\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\PC_CREATOR\\Documents\\03backup\\_DEV\\_CUSTOMERS'_STUFF\\onyxian\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\PC_CREATOR\\Documents\\03backup\\_DEV\\_CUSTOMERS'_STUFF\\onyxian\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRHJvcGRvd24nLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiAnVXNlcm5hbWUnLAogICAgICBiYWxhbmNlOiAnMCcsCiAgICAgIGlzTWVzc2FnZTogdHJ1ZSwKICAgICAgaXNPcGVuOiBmYWxzZSwKICAgICAgbGlua3M6IHsKICAgICAgICBwcm9maWxlOiAnL2FjY291bnQnLAogICAgICAgIHdhbGxldDogJy9leGNoYW5nZSN3YWxsZXQnLAogICAgICAgIGhpc3Rvcnk6ICcvZXhjaGFuZ2UjaGlzdG9yeScsCiAgICAgICAgc3VwcG9ydDogJyMnLAogICAgICB9LAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKHsKICAgICAgcHJvZmlsZTogJ2F1dGgvcHJvZmlsZScsCiAgICB9KSwKICB9LAogIHdhdGNoOiB7CiAgICBwcm9maWxlKHZhbHVlKSB7CiAgICAgIHRoaXMudXBkYXRlTmFtZSh2YWx1ZSk7CiAgICAgIHRoaXMudXBkYXRlQmFsYW5jZSh2YWx1ZSk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlTmFtZShwcm9maWxlKSB7CiAgICAgIGNvbnN0IGFkZExpbWl0ID0gdGhpcy5iYWxhbmNlLnRvU3RyaW5nKCkubGVuZ3RoOwoKICAgICAgaWYgKHByb2ZpbGUpIHsKICAgICAgICBpZiAocHJvZmlsZS5sYXN0TmFtZSAmJiBwcm9maWxlLmZpcnN0TmFtZSkgewogICAgICAgICAgdGhpcy5uYW1lID0KICAgICAgICAgICAgdGhpcy5wcm9maWxlLmZpcnN0TmFtZS50b0xvd2VyQ2FzZSgpLmNhcGl0YWxpemUoKSArCiAgICAgICAgICAgICcgJyArCiAgICAgICAgICAgIHRoaXMucHJvZmlsZS5sYXN0TmFtZVswXS50b1VwcGVyQ2FzZSgpICsKICAgICAgICAgICAgJy4nOwogICAgICAgIH0gZWxzZSBpZiAocHJvZmlsZS5maXJzdE5hbWUpIHsKICAgICAgICAgIHRoaXMubmFtZSA9IHRoaXMucHJvZmlsZS5maXJzdE5hbWU7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5uYW1lLmxlbmd0aCA+PSAxNiAtIGFkZExpbWl0KQogICAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5uYW1lLm1hdGNoKG5ldyBSZWdFeHAoYC57JHsxNiAtIGFkZExpbWl0fX1gKSlbMF0gKyAnLi4uJzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm5hbWUgPSAnVXNlcm5hbWUnOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlQmFsYW5jZShwcm9maWxlKSB7CiAgICAgIHRoaXMuYmFsYW5jZSA9IHByb2ZpbGUuYmFsYW5jZTsKICAgIH0sCiAgICB0b2dnbGUoKSB7CiAgICAgIHRoaXMuaXNPcGVuID0gIXRoaXMuaXNPcGVuOwogICAgfSwKICAgIGNsb3NlT3V0c2lkZShldmVudCkgewogICAgICBjb25zdCB7IGRyb3Bkb3duIH0gPSB0aGlzLiRyZWZzOwoKICAgICAgaWYgKCFkcm9wZG93biB8fCBkcm9wZG93bi5jb250YWlucyhldmVudC50YXJnZXQpKSByZXR1cm47CiAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7CiAgICB9LAogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7CiAgICB9LAogICAgbG9nb3V0KCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2F1dGgvU0VUX1BST0ZJTEUnLCB7CiAgICAgICAgcHJvZmlsZTogbnVsbCwKICAgICAgfSk7CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lICE9ICdNYWluJykgdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgIH0sCiAgICB1cGRhdGVFeGNoYW5nZVRhYihoYXNoKSB7CiAgICAgIGlmIChoYXNoID09PSAnd2FsbGV0JykgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgncG9wdXBzL1NFTEVDVF9FWENIQU5HRV9UQUInLCAwKTsKICAgICAgfSBlbHNlIGlmIChoYXNoID09PSAnaGlzdG9yeScpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3BvcHVwcy9TRUxFQ1RfRVhDSEFOR0VfVEFCJywgNCk7CiAgICAgIH0KICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlT3V0c2lkZSk7CgogICAgbGV0IHByb2ZpbGUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydhdXRoL3Byb2ZpbGUnXTsKCiAgICBpZiAocHJvZmlsZSkgewogICAgICB0aGlzLnVwZGF0ZU5hbWUocHJvZmlsZSk7CiAgICAgIHRoaXMudXBkYXRlQmFsYW5jZShwcm9maWxlKTsKICAgIH0KICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZU91dHNpZGUpOwogIH0sCn07Cg=="},{"version":3,"sources":["Dropdown.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dropdown.vue","sourceRoot":"src/components/header","sourcesContent":["<template>\n  <nav class=\"dropdown\" ref=\"dropdown\">\n    <button\n      type=\"button\"\n      @click=\"toggle\"\n      ref=\"caller\"\n      :class=\"['dropdown-auth', isOpen ? 'active' : '']\"\n    >\n      <a href=\"#\" class=\"message\" v-if=\"isMessage\" title=\"Message of support\">\n        <font-awesome-icon icon=\"envelope\" />\n      </a>\n      <span class=\"name\">{{ name }}</span>\n      <span class=\"balance\">{{ balance }}$</span>\n      <span class=\"angle\">\n        <font-awesome-icon :icon=\"isOpen ? 'angle-up' : 'angle-down'\" />\n      </span>\n    </button>\n    <ul v-if=\"isOpen\" @click=\"close\">\n      <li>\n        <router-link :to=\"links.profile\">Profile</router-link>\n      </li>\n      <li>\n        <a @click=\"updateExchangeTab('wallet')\" :href=\"links.wallet\">Wallet</a>\n      </li>\n      <li>\n        <a @click=\"updateExchangeTab('history')\" :href=\"links.history\">History</a>\n      </li>\n      <li>\n        <router-link :to=\"links.support\">Support</router-link>\n      </li>\n      <li class=\"divider\"></li>\n      <li>\n        <a href=\"#\" @click=\"logout\">Sign Out</a>\n      </li>\n    </ul>\n  </nav>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\n\nexport default {\n  name: 'Dropdown',\n  data() {\n    return {\n      name: 'Username',\n      balance: '0',\n      isMessage: true,\n      isOpen: false,\n      links: {\n        profile: '/account',\n        wallet: '/exchange#wallet',\n        history: '/exchange#history',\n        support: '#',\n      },\n    };\n  },\n  computed: {\n    ...mapGetters({\n      profile: 'auth/profile',\n    }),\n  },\n  watch: {\n    profile(value) {\n      this.updateName(value);\n      this.updateBalance(value);\n    },\n  },\n  methods: {\n    updateName(profile) {\n      const addLimit = this.balance.toString().length;\n\n      if (profile) {\n        if (profile.lastName && profile.firstName) {\n          this.name =\n            this.profile.firstName.toLowerCase().capitalize() +\n            ' ' +\n            this.profile.lastName[0].toUpperCase() +\n            '.';\n        } else if (profile.firstName) {\n          this.name = this.profile.firstName;\n        }\n\n        if (this.name.length >= 16 - addLimit)\n          this.name = this.name.match(new RegExp(`.{${16 - addLimit}}`))[0] + '...';\n      } else {\n        this.name = 'Username';\n      }\n    },\n    updateBalance(profile) {\n      this.balance = profile.balance;\n    },\n    toggle() {\n      this.isOpen = !this.isOpen;\n    },\n    closeOutside(event) {\n      const { dropdown } = this.$refs;\n\n      if (!dropdown || dropdown.contains(event.target)) return;\n      this.isOpen = false;\n    },\n    close() {\n      this.isOpen = false;\n    },\n    logout() {\n      this.$store.commit('auth/SET_PROFILE', {\n        profile: null,\n      });\n      if (this.$route.name != 'Main') this.$router.push('/');\n    },\n    updateExchangeTab(hash) {\n      if (hash === 'wallet') {\n        this.$store.commit('popups/SELECT_EXCHANGE_TAB', 0);\n      } else if (hash === 'history') {\n        this.$store.commit('popups/SELECT_EXCHANGE_TAB', 4);\n      }\n    },\n  },\n  mounted() {\n    document.addEventListener('click', this.closeOutside);\n\n    let profile = this.$store.getters['auth/profile'];\n\n    if (profile) {\n      this.updateName(profile);\n      this.updateBalance(profile);\n    }\n  },\n  destroyed() {\n    document.removeEventListener('click', this.closeOutside);\n  },\n};\n</script>\n\n<style lang=\"sass\" scoped>\n@import '../../scss/smart-grid'\n@import '../../scss/variables'\n\nnav\n  position: relative\n  display: flex\n  width: 210px\n\n  button\n    display: flex\n    justify-content: space-around\n    align-items: center\n    background: rgba(0, 106, 255, 0.5)\n    border: none\n    height: 40px\n    color: #fff\n    outline: none\n    cursor: pointer\n    border-radius: 3px\n    padding: 8px\n    width: 100%\n    outline: none\n\n    &.active\n      border-radius: 3px 3px 0 0\n\n    .name\n      font-weight: bold\n      text-align: left\n      justify-self: start\n\n    .offset\n      width: 18px\n\n    .message\n      width: 18px\n      height: 18px\n      font-size: 10px\n      background: #33AAFF\n      color: #fff\n      border-radius: 100%\n      justify-content: center\n      align-items: center\n      display: flex\n\n      &:hover\n        transform: scale(1.2)\n\n    .balance\n      color: #68b1ff\n      font-size: 12px\n      font-weight: bold\n      justify-self: end\n\n    .angle\n      align-items: center\n      font-size: 10px\n\n  ul\n    position: absolute\n    background: rgba(0, 81, 194, 0.5)\n    width: 100%\n    list-style: none\n    padding: 8px 0\n    top: 40px\n    border-radius: 0 0 3px 3px\n    z-index: 99\n\n    li.divider\n      height: 1px\n      background: #68b1ff\n      margin: 8px\n\n    a\n      display: flex\n      height: 34px\n      text-decoration: none\n      align-items: center\n      text-indent: 21px\n      color: #fff\n      font-size: 14px\n      outline: none\n\n      &:hover\n        background: rgba(0, 81, 194, 0.6)\n\n      &:active\n        background: rgb(0, 81, 194)\n</style>\n"]}]}