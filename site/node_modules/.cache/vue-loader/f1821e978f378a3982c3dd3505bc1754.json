{"remainingRequest":"/mnt/c/Users/PC_CREATOR/Documents/03backup/_DEV/_CUSTOMERS'_STUFF/onyxian/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/c/Users/PC_CREATOR/Documents/03backup/_DEV/_CUSTOMERS'_STUFF/onyxian/src/components/views/profile/ChangeNameForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/c/Users/PC_CREATOR/Documents/03backup/_DEV/_CUSTOMERS'_STUFF/onyxian/src/components/views/profile/ChangeNameForm.vue","mtime":1594108278001},{"path":"/mnt/c/Users/PC_CREATOR/Documents/03backup/_DEV/_CUSTOMERS'_STUFF/onyxian/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/PC_CREATOR/Documents/03backup/_DEV/_CUSTOMERS'_STUFF/onyxian/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/mnt/c/Users/PC_CREATOR/Documents/03backup/_DEV/_CUSTOMERS'_STUFF/onyxian/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/PC_CREATOR/Documents/03backup/_DEV/_CUSTOMERS'_STUFF/onyxian/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQnV0dG9uIGZyb20gJy4vQnV0dG9uJzsNCmltcG9ydCBQcm9maWxlSW5wdXQgZnJvbSAnLi9Qcm9maWxlSW5wdXQnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdDaGFuZ2VOYW1lRm9ybScsDQogIGNvbXBvbmVudHM6IHsNCiAgICBCdXR0b24sDQogICAgUHJvZmlsZUlucHV0LA0KICB9LA0KICBwcm9wczogWydzaG93J10sDQogIHdhdGNoOiB7DQogICAgc2hvdyh2YWwpIHsNCiAgICAgIHRoaXMudmlzaWJsZUZvcm0odmFsKTsNCiAgICB9LA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBidXN5OiBmYWxzZSwNCiAgICAgIGZpcnN0TmFtZTogJycsDQogICAgICBsYXN0TmFtZTogJycsDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGNoYW5nZU5hbWUoKSB7DQogICAgICBpZighdGhpcy5maXJzdE5hbWUgJiYgIXRoaXMubGFzdE5hbWUpDQogICAgICAgIHRoaXMuY2xvc2UoKTsNCg0KICAgICAgdGhpcy5sb2FkaW5nKCk7DQogICAgICB0aGlzLmF4aW9zDQogICAgICAgIC5wb3N0KA0KICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArDQogICAgICAgICAgICAnLy8nICsNCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ob3N0ICsNCiAgICAgICAgICAgICcvYXBpL3VzZXIvdXBkYXRlJywNCiAgICAgICAgICB7DQogICAgICAgICAgICBmaXJzdE5hbWU6IHRoaXMuZmlyc3ROYW1lLA0KICAgICAgICAgICAgbGFzdE5hbWU6IHRoaXMubGFzdE5hbWUsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2F1dGgtdG9rZW4nKSB9LA0KICAgICAgICAgIH0sDQogICAgICAgICkNCiAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICB0aGlzLmxvYWRlZCgpOw0KICAgICAgICAgIHRoaXMuc3VjY2VzcyhyZXMuZGF0YS50b2tlbiwgcmVzLmRhdGEucHJvZmlsZSk7DQogICAgICAgICAgdGhpcy5oYW5kbGVTdWNjZXNzKHJlcy5kYXRhKTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgdGhpcy5sb2FkZWQoKTsNCg0KICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UpIHsNCiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyLnJlc3BvbnNlLmRhdGEpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBoYW5kbGVFcnJvcihyZXNwb25zZSkgew0KICAgICAgaWYgKCFyZXNwb25zZSkgcmV0dXJuOw0KDQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3BvcHVwcy9BRERfQUxFUlQnLCB7DQogICAgICAgIHR5cGU6ICdlcnJvcicsDQogICAgICAgIHRpdGxlOiByZXNwb25zZS5zdGFnZSwNCiAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSwNCiAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlU3VjY2VzcyhyZXNwb25zZSkgew0KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdwb3B1cHMvQUREX0FMRVJUJywgew0KICAgICAgICB0eXBlOiAnbWVzc2FnZScsDQogICAgICAgIHRpdGxlOiByZXNwb25zZS5zdGFnZSwNCiAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSwNCiAgICAgIH0pOw0KICAgIH0sDQogICAgbG9hZGluZygpIHsNCiAgICAgIHRoaXMuYnVzeSA9IHRydWU7DQogICAgICB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcuY2hhbmdlbmFtZV9fZm9ybV9sb2FkaW5nJykuc3R5bGUuZGlzcGxheSA9DQogICAgICAgICdncmlkJzsNCiAgICB9LA0KICAgIGxvYWRlZCgpIHsNCiAgICAgIHRoaXMuYnVzeSA9IGZhbHNlOw0KICAgICAgdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLmNoYW5nZW5hbWVfX2Zvcm1fbG9hZGluZycpLnN0eWxlLmRpc3BsYXkgPQ0KICAgICAgICAnbm9uZSc7DQogICAgfSwNCiAgICBzdWNjZXNzKHRva2VuLCBwcm9maWxlKSB7DQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2F1dGgvU0VUX1BST0ZJTEUnLCB7DQogICAgICAgIHRva2VuLA0KICAgICAgICBwcm9maWxlLA0KICAgICAgfSk7DQoNCiAgICAgIHRoaXMuY2xvc2UoKTsNCiAgICB9LA0KICAgIHZpc2libGVGb3JtKHllcykgew0KICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7DQogICAgICB0aGlzLiRlbC5zdHlsZS50b3AgPSAwOw0KDQogICAgICBpZiAoeWVzKSB7DQogICAgICAgIHRoaXMuJGVsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgdGhpcy4kYW5pbWUoew0KICAgICAgICAgIHRhcmdldHM6ICcuY2hhbmdlbmFtZV93cmFwJywNCiAgICAgICAgICBzY2FsZTogWzAuOSwgMV0sDQogICAgICAgICAgb3BhY2l0eTogWzAsIDFdLA0KICAgICAgICAgIGR1cmF0aW9uOiAyMDAsDQogICAgICAgICAgZWFzaW5nOiAnZWFzZUluT3V0U2luZScsDQogICAgICAgICAgdXBkYXRlKGFuaW1lKSB7DQogICAgICAgICAgICBpZiAoYW5pbWUucHJvZ3Jlc3MgPiAzMCkgew0KICAgICAgICAgICAgICBzZWxmLiRlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzAwMDAyMjk5JzsNCiAgICAgICAgICAgICAgc2VsZi4kZWwuc3R5bGUuYmFja2Ryb3BGaWx0ZXIgPSAnYmx1cigycHgpJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7DQogICAgICAgIHRoaXMuJGVsLnN0eWxlLmJhY2tkcm9wRmlsdGVyID0gJ2JsdXIoMHB4KSc7DQoNCiAgICAgICAgdGhpcy4kYW5pbWUoew0KICAgICAgICAgIHRhcmdldHM6ICcuY2hhbmdlbmFtZV93cmFwJywNCiAgICAgICAgICBzY2FsZTogWzEsIDAuOV0sDQogICAgICAgICAgb3BhY2l0eTogWzEsIDBdLA0KICAgICAgICAgIGR1cmF0aW9uOiAyMDAsDQogICAgICAgICAgZWFzaW5nOiAnZWFzZUluT3V0U2luZScsDQogICAgICAgICAgY29tcGxldGUoKSB7DQogICAgICAgICAgICBzZWxmLiRlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgIH0sDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgY2xvc2UoKSB7DQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3BvcHVwcy9DSEFOR0VfTkFNRScsIGZhbHNlKTsNCiAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsIG51bGwsICcgJyk7DQogICAgfSwNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLnZpc2libGVGb3JtKHRoaXMuc2hvdyk7DQoNCiAgICB0aGlzLiRlbC5vbmNsaWNrID0gZSA9PiB7DQogICAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5jaGFuZ2VuYW1lX3dyYXAnKSkgew0KICAgICAgICB0aGlzLmNsb3NlKCk7DQogICAgICB9DQogICAgfTsNCg0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHsNCiAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHsNCiAgICAgICAgdGhpcy5jbG9zZSgpOw0KICAgICAgfQ0KICAgIH0pOw0KICB9LA0KfTsNCg=="},{"version":3,"sources":["ChangeNameForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChangeNameForm.vue","sourceRoot":"src/components/views/profile","sourcesContent":["<template>\r\n  <div class=\"changename\">\r\n    <div class=\"changename_wrap\">\r\n      <div class=\"changename__title\">\r\n        <font-awesome-icon\r\n          icon=\"times\"\r\n          class=\"changename__title__icon\"\r\n          @click=\"close\"\r\n        />\r\n        <p>\r\n          Change your name\r\n        </p>\r\n      </div>\r\n      <div class=\"changename__form\">\r\n        <div class=\"changename__form_loading\">\r\n          <font-awesome-icon\r\n            icon=\"spinner\"\r\n            class=\"changename__form_loading_icon fa-spin\"\r\n          />\r\n        </div>\r\n        <ProfileInput\r\n          type=\"name\"\r\n          place=\"top\"\r\n          @typed=\"firstName = $event\"\r\n          placeholder=\"Firstname\"\r\n          @keydown.enter.native=\"changeName\"\r\n          :busy=\"busy\"\r\n        />\r\n        <ProfileInput\r\n          type=\"name\"\r\n          place=\"bottom\"\r\n          @typed=\"lastName = $event\"\r\n          placeholder=\"Lastname\"\r\n          @keydown.enter.native=\"changeName\"\r\n          :busy=\"busy\"\r\n        />\r\n        <Button\r\n          :class=\"['changename__form__button_submit', busy ? 'busy_btn' : '']\"\r\n          @click.native=\"changeName\"\r\n          text=\"Save\"\r\n          theme=\"primary_big\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Button from './Button';\r\nimport ProfileInput from './ProfileInput';\r\n\r\nexport default {\r\n  name: 'ChangeNameForm',\r\n  components: {\r\n    Button,\r\n    ProfileInput,\r\n  },\r\n  props: ['show'],\r\n  watch: {\r\n    show(val) {\r\n      this.visibleForm(val);\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      busy: false,\r\n      firstName: '',\r\n      lastName: '',\r\n    };\r\n  },\r\n  methods: {\r\n    changeName() {\r\n      if(!this.firstName && !this.lastName)\r\n        this.close();\r\n\r\n      this.loading();\r\n      this.axios\r\n        .post(\r\n          window.location.protocol +\r\n            '//' +\r\n            window.location.host +\r\n            '/api/user/update',\r\n          {\r\n            firstName: this.firstName,\r\n            lastName: this.lastName,\r\n          },\r\n          {\r\n            headers: { Authorization: sessionStorage.getItem('auth-token') },\r\n          },\r\n        )\r\n        .then(res => {\r\n          this.loaded();\r\n          this.success(res.data.token, res.data.profile);\r\n          this.handleSuccess(res.data);\r\n        })\r\n        .catch(err => {\r\n          this.loaded();\r\n\r\n          if (err.response) {\r\n            this.handleError(err.response.data);\r\n          }\r\n        });\r\n    },\r\n    handleError(response) {\r\n      if (!response) return;\r\n\r\n      this.$store.commit('popups/ADD_ALERT', {\r\n        type: 'error',\r\n        title: response.stage,\r\n        message: response.message,\r\n      });\r\n    },\r\n    handleSuccess(response) {\r\n      this.$store.commit('popups/ADD_ALERT', {\r\n        type: 'message',\r\n        title: response.stage,\r\n        message: response.message,\r\n      });\r\n    },\r\n    loading() {\r\n      this.busy = true;\r\n      this.$el.querySelector('.changename__form_loading').style.display =\r\n        'grid';\r\n    },\r\n    loaded() {\r\n      this.busy = false;\r\n      this.$el.querySelector('.changename__form_loading').style.display =\r\n        'none';\r\n    },\r\n    success(token, profile) {\r\n      this.$store.commit('auth/SET_PROFILE', {\r\n        token,\r\n        profile,\r\n      });\r\n\r\n      this.close();\r\n    },\r\n    visibleForm(yes) {\r\n      const self = this;\r\n      this.$el.style.top = 0;\r\n\r\n      if (yes) {\r\n        this.$el.style.display = 'flex';\r\n\r\n        this.$anime({\r\n          targets: '.changename_wrap',\r\n          scale: [0.9, 1],\r\n          opacity: [0, 1],\r\n          duration: 200,\r\n          easing: 'easeInOutSine',\r\n          update(anime) {\r\n            if (anime.progress > 30) {\r\n              self.$el.style.backgroundColor = '#00002299';\r\n              self.$el.style.backdropFilter = 'blur(2px)';\r\n            }\r\n          },\r\n        });\r\n      } else {\r\n        this.$el.style.backgroundColor = 'transparent';\r\n        this.$el.style.backdropFilter = 'blur(0px)';\r\n\r\n        this.$anime({\r\n          targets: '.changename_wrap',\r\n          scale: [1, 0.9],\r\n          opacity: [1, 0],\r\n          duration: 200,\r\n          easing: 'easeInOutSine',\r\n          complete() {\r\n            self.$el.style.display = 'none';\r\n          },\r\n        });\r\n      }\r\n    },\r\n    close() {\r\n      this.$store.commit('popups/CHANGE_NAME', false);\r\n      history.replaceState(null, null, ' ');\r\n    },\r\n  },\r\n  mounted() {\r\n    this.visibleForm(this.show);\r\n\r\n    this.$el.onclick = e => {\r\n      if (e.target === this.$el.querySelector('.changename_wrap')) {\r\n        this.close();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', e => {\r\n      if (e.key === 'Escape') {\r\n        this.close();\r\n      }\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"sass\" scroped>\r\n@import '../../../scss/smart-grid'\r\n@import '../../../scss/variables'\r\n\r\n*\r\n  margin: 0\r\n  padding: 0\r\n\r\n.changename\r\n  position: absolute\r\n  z-index: 888\r\n  left: 0\r\n  top: 0\r\n  width: 100vw\r\n  height: 100vh\r\n  transition: backdrop-filter .3s\r\n  transition: background-color .3s\r\n  display: none\r\n  flex-direction: column\r\n  justify-content: center\r\n  align-items: center\r\n  background-color: transparent;\r\n  backdrop-filter: blur(0px);\r\n\r\n  &_wrap\r\n    display: flex\r\n    flex-direction: column\r\n    justify-content: center\r\n    align-items: center\r\n    width: 100%\r\n    height: 100%\r\n\r\n  &__title\r\n    width: 500px\r\n    position: relative\r\n    display: grid\r\n    background: linear-gradient(-45deg, $blue, lighten($blue, 7))\r\n    border: 1px $cyan solid\r\n    color: white\r\n    font-family: 'Montserrat'\r\n    font-weight: 500\r\n    padding: 10px 0\r\n\r\n    @include xs-block\r\n      width: 100%\r\n      border-radius: 0\r\n    @include sm-block\r\n      width: 500px\r\n      border-radius: 10px 10px 0 0\r\n\r\n    &__icon\r\n      position: absolute\r\n      height: 100%\r\n      margin-right: 20px\r\n      justify-self: end\r\n      color: #0075ff\r\n      cursor: pointer\r\n      font-size: 1.3rem\r\n\r\n      &:hover\r\n        color: white\r\n\r\n  &__form\r\n    position: relative\r\n    width: 500px\r\n    padding-top: 40px\r\n    background: $blue\r\n    border: 1px #0075ff33 solid\r\n    display: flex\r\n    flex-direction: column\r\n    overflow: hidden\r\n    min-height: 240px\r\n\r\n    @include xs-block\r\n      width: 100%\r\n      border-radius: 0\r\n    @include sm-block\r\n      width: 500px\r\n      border-radius: 0 0 10px 10px\r\n\r\n    .changename__form_loading\r\n      position: absolute\r\n      width: 100%\r\n      height: 100%\r\n      top: 0\r\n      left: 0\r\n      z-index: 3\r\n      background-color: $blue-alpha\r\n      display: none\r\n\r\n      &_icon\r\n        place-self: center\r\n        width: 100px\r\n        margin-bottom: 10px\r\n        height: 80px\r\n        color: $cyan\r\n\r\n    &__button_submit\r\n      opacity: 1\r\n      margin: 33px auto\r\n      margin-top: 0\r\n      width: 100px\r\n\r\n    &__status\r\n      position: absolute\r\n      height: 80px\r\n      left: calc(50% - 10rem)\r\n      top: calc(50% - 75px)\r\n      font-size: 2rem\r\n      font-weight: 500\r\n      font-family: 'Montserrat'\r\n      color: white\r\n      opacity: 0\r\n      pointer-events: none\r\n\r\n      &_icon\r\n        transform: scale(0)\r\n\r\n.busy_btn\r\n  pointer-events: none\r\n  opacity: .2\r\n</style>\r\n"]}]}