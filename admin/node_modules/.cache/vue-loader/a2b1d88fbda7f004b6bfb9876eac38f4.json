{"remainingRequest":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/src/components/dashboard/dashboard-profile-tabs/ProfileActions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/src/components/dashboard/dashboard-profile-tabs/ProfileActions.vue","mtime":1604779226326},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVmFDYXJkTm9EYXRhIGZyb20gJy4uL2NvbXBvbmVudHMvVmFDYXJkTm9EYXRhJw0KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJw0KaW1wb3J0IHtUaHJvd1BvcHVwfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9Vc2VycycNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgVmFDYXJkTm9EYXRhLA0KICB9LA0KICBwcm9wczogew0KICAgIGxvYWRpbmc6IEJvb2xlYW4sDQogIH0sDQogIGluamVjdDogWyd1c2VyJ10sDQogIGRhdGE6ICgpID0+ICh7DQogICAgY3VzdG9tUG9wdXBUeXBlOiAnRXJyb3InLA0KICAgIGN1c3RvbVBvcHVwVGl0bGU6ICcnLA0KICAgIGN1c3RvbVBvcHVwVGV4dDogJycsDQogIH0pLA0KICBjb21wdXRlZDogew0KICAgIGFjdGlvbnMoKSB7DQogICAgICByZXR1cm4gdGhpcy51c2VyLmFjdGlvbnMNCiAgICB9LA0KICAgIGNvbXB1dGVkU3R5bGUoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBvcGFjaXR5OiB0aGlzLmxvYWRpbmcgPyAwLjIgOiAxLA0KICAgICAgfQ0KICAgIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzZW5kUG9wdXAoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlDQogICAgICBUaHJvd1BvcHVwKHRoaXMudXNlci5pZCwgdGhpcy5jdXN0b21Qb3B1cFR5cGUsIHRoaXMuY3VzdG9tUG9wdXBUaXRsZSwgdGhpcy5jdXN0b21Qb3B1cFRleHQpLnRoZW4oKHtkYXRhfSkgPT4gew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgICBjb25zb2xlLmxvZyhkYXRhKQ0KICAgICAgICB0aGlzLmhhbmRsZVN1Y2Nlc3Moew0KICAgICAgICAgIG1lc3NhZ2U6ICdQb3B1cCBzdWNjZXNzZnVsbHkgc2VudCEnDQogICAgICAgIH0pDQogICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgICBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2UpDQogICAgICAgIHRoaXMuaGFuZGxlU3VjY2Vzcyh7DQogICAgICAgICAgbWVzc2FnZTogJ1BvcHVwIGhhcyBubyBzZW50LicNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVTdWNjZXNzKHJlc3BvbnNlKSB7DQogICAgICAgIHRoaXMuc2hvd1RvYXN0KHJlc3BvbnNlLm1lc3NhZ2UsIHsNCiAgICAgICAgICBpY29uOiAnZmEtY2hlY2snLA0KICAgICAgICAgIHBvc2l0aW9uOiAnYm90dG9tLWNlbnRlcicsDQogICAgICAgICAgZHVyYXRpb246IDQwMDAsDQogICAgICAgICAgdHlwZTogJ3ByaW1hcnknLA0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIGhhbmRsZUVycm9yKHJlc3BvbnNlKSB7DQogICAgICAgIHRoaXMuc2hvd1RvYXN0KHJlc3BvbnNlLm1lc3NhZ2UsIHsNCiAgICAgICAgICBpY29uOiAnZmEtdGltZXMnLA0KICAgICAgICAgIHBvc2l0aW9uOiAnYm90dG9tLWNlbnRlcicsDQogICAgICAgICAgZHVyYXRpb246IDQwMDAsDQogICAgICAgICAgdHlwZTogJ3ByaW1hcnknLA0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICBkb0FQSVJlcXVlc3QodXJsKSB7DQogICAgICBjb25zb2xlLmxvZyh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3QgKyB1cmwpDQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlDQogICAgICBheGlvcw0KICAgICAgICAuZ2V0KHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdCArIHVybCkNCiAgICAgICAgLnRoZW4oKHsgZGF0YTogcmVzcG9uc2UgfSkgPT4gew0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgncmVmcmVzaC1wcm9maWxlJykNCg0KICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7DQogICAgICAgICAgICBpZiAocmVzcG9uc2UuYWN0aW9uID09PSAnc2lnbiBpbiBhcycpIHsNCiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnYXV0aC10b2tlbicsIHJlc3BvbnNlLnRva2VuKQ0KICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdhZG1pbi10b2tlbicsIHJlc3BvbnNlLmFkbWluKQ0KICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uYXNzaWduKA0KICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdA0KICAgICAgICAgICAgICApDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0aGlzLnNob3dUb2FzdChgVGhlIHVzZXIgaGFzIGJlZW4gJHtyZXNwb25zZS5hY3Rpb259ZCFgLCB7DQogICAgICAgICAgICAgICAgaWNvbjogJ2ZhLWNoZWNrJywNCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1jZW50ZXInLA0KICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA0MDAwLA0KICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpDQogICAgICAgICAgICB0aGlzLnNob3dUb2FzdChgVGhlIHVzZXIgaGFzIG5vdCBiZWVuICR7cmVzcG9uc2UuYWN0aW9ufWQuYCwgew0KICAgICAgICAgICAgICBpY29uOiAnZmEtdGltZXMnLA0KICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1jZW50ZXInLA0KICAgICAgICAgICAgICBkdXJhdGlvbjogNDAwMCwNCiAgICAgICAgICAgICAgdHlwZTogJ3ByaW1hcnknLA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoeyByZXNwb25zZSB9KSA9PiB7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQ0KICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KA0KICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5tZXNzYWdlICsNCiAgICAgICAgICAgICAgJyBTdGF0dXMgY29kZSAnICsNCiAgICAgICAgICAgICAgKHJlc3BvbnNlID8gcmVzcG9uc2Uuc3RhdHVzIDogJyVDT0RFJScpLA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBpY29uOiAnZmEtdGltZXMnLA0KICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1jZW50ZXInLA0KICAgICAgICAgICAgICBkdXJhdGlvbjogNDAwMCwNCiAgICAgICAgICAgICAgdHlwZTogJ3ByaW1hcnknLA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICkNCiAgICAgICAgfSkNCiAgICB9LA0KICB9LA0KfQ0K"},{"version":3,"sources":["ProfileActions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProfileActions.vue","sourceRoot":"src/components/dashboard/dashboard-profile-tabs","sourcesContent":["<template>\r\n  <va-inner-loading :loading=\"loading && actions.length\">\r\n    <div v-if=\"actions.length\" class=\"tab\" :style=\"computedStyle\">\r\n      <div class=\"tab__actions\">\r\n        <va-button\r\n          v-for=\"action in actions\"\r\n          :key=\"action.name\"\r\n          outline\r\n          :color=\"action.color\"\r\n          @click=\"doAPIRequest(action.url)\"\r\n          >{{ $t(action.nameLocalPath) }}</va-button\r\n        >\r\n      </div>\r\n      <div class=\"tab__send_popup mt-3\">\r\n        <va-accordion>\r\n          <va-collapse isOpenDefault>\r\n            <span slot=\"header\">\r\n              {{ $t('dashboard.profile.actions.popup.header') }}\r\n            </span>\r\n            <div slot=\"body\">\r\n              <va-select\r\n                :options=\"['Error', 'Warning', 'Info']\"\r\n                value=\"Error\"\r\n                v-model=\"customPopupType\"\r\n                class=\"ma-0\"\r\n                :label=\"$t('dashboard.profile.actions.popup.type')\"\r\n                no-clear\r\n              />\r\n              <va-input\r\n                class=\"mb-3\"\r\n                :label=\"$t('dashboard.profile.actions.popup.title')\"\r\n                v-model=\"customPopupTitle\"\r\n              ></va-input>\r\n              <va-input\r\n                class=\"mb-3\"\r\n                :label=\"$t('dashboard.profile.actions.popup.message')\"\r\n                v-model=\"customPopupText\"\r\n              ></va-input>\r\n              <va-button\r\n                class=\"mt-2 justify--center\"\r\n                color=\"info\"\r\n                @click=\"sendPopup\"\r\n              >\r\n                {{ $t('dashboard.profile.actions.popup.send') }}\r\n              </va-button>\r\n            </div>\r\n          </va-collapse>\r\n        </va-accordion>\r\n      </div>\r\n    </div>\r\n    <VaCardNoData\r\n      v-else\r\n      :loading=\"loading\"\r\n      LT=\"Actions are loading...\"\r\n      ET=\"Nothing to do\"\r\n    />\r\n  </va-inner-loading>\r\n</template>\r\n\r\n<script>\r\nimport VaCardNoData from '../components/VaCardNoData'\r\nimport axios from 'axios'\r\nimport {ThrowPopup} from '../../../services/Users'\r\n\r\nexport default {\r\n  components: {\r\n    VaCardNoData,\r\n  },\r\n  props: {\r\n    loading: Boolean,\r\n  },\r\n  inject: ['user'],\r\n  data: () => ({\r\n    customPopupType: 'Error',\r\n    customPopupTitle: '',\r\n    customPopupText: '',\r\n  }),\r\n  computed: {\r\n    actions() {\r\n      return this.user.actions\r\n    },\r\n    computedStyle() {\r\n      return {\r\n        opacity: this.loading ? 0.2 : 1,\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    sendPopup() {\r\n      this.loading = true\r\n      ThrowPopup(this.user.id, this.customPopupType, this.customPopupTitle, this.customPopupText).then(({data}) => {\r\n        this.loading = false\r\n        console.log(data)\r\n        this.handleSuccess({\r\n          message: 'Popup successfully sent!'\r\n        })\r\n      }).catch(err => {\r\n        this.loading = false\r\n        console.log(err.response)\r\n        this.handleSuccess({\r\n          message: 'Popup has no sent.'\r\n        })\r\n      })\r\n    },\r\n    handleSuccess(response) {\r\n        this.showToast(response.message, {\r\n          icon: 'fa-check',\r\n          position: 'bottom-center',\r\n          duration: 4000,\r\n          type: 'primary',\r\n        })\r\n      },\r\n      handleError(response) {\r\n        this.showToast(response.message, {\r\n          icon: 'fa-times',\r\n          position: 'bottom-center',\r\n          duration: 4000,\r\n          type: 'primary',\r\n        })\r\n      },\r\n    doAPIRequest(url) {\r\n      console.log(window.location.protocol + '//' + window.location.host + url)\r\n      this.loading = true\r\n      axios\r\n        .get(window.location.protocol + '//' + window.location.host + url)\r\n        .then(({ data: response }) => {\r\n          this.loading = false\r\n          this.$root.$emit('refresh-profile')\r\n\r\n          if (response.success) {\r\n            if (response.action === 'sign in as') {\r\n              sessionStorage.setItem('auth-token', response.token)\r\n              sessionStorage.setItem('admin-token', response.admin)\r\n              window.location.assign(\r\n                window.location.protocol + '//' + window.location.host\r\n              )\r\n            } else {\r\n              this.showToast(`The user has been ${response.action}d!`, {\r\n                icon: 'fa-check',\r\n                position: 'bottom-center',\r\n                duration: 4000,\r\n                type: 'success',\r\n              })\r\n            }\r\n          } else {\r\n            console.log(response)\r\n            this.showToast(`The user has not been ${response.action}d.`, {\r\n              icon: 'fa-times',\r\n              position: 'bottom-center',\r\n              duration: 4000,\r\n              type: 'primary',\r\n            })\r\n          }\r\n        })\r\n        .catch(({ response }) => {\r\n          this.loading = true\r\n          this.showToast(\r\n            response.data.message +\r\n              ' Status code ' +\r\n              (response ? response.status : '%CODE%'),\r\n            {\r\n              icon: 'fa-times',\r\n              position: 'bottom-center',\r\n              duration: 4000,\r\n              type: 'primary',\r\n            }\r\n          )\r\n        })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.tab {\r\n  min-height: 65px;\r\n\r\n  &__actions {\r\n    max-width: 100%;\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr;\r\n    justify-content: center;\r\n  }\r\n}\r\n</style>\r\n"]}]}