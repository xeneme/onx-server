{"remainingRequest":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/src/components/ui/chat/Chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/src/components/ui/chat/Chat.vue","mtime":1604871598187},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFN0aWNreVNjcm9sbCB9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL3Z1ZXN0aWMtdWkvY29tcG9uZW50cycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnY2hhdCcsCiAgZGlyZWN0aXZlczogeyBTdGlja3lTY3JvbGwgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5wdXRNZXNzYWdlOiAnJywKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb21wdXRlZFN0eWxlKCkgewogICAgICByZXR1cm4geyBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMuJHRoZW1lcy5kYXJrRm9yZWdyb3VuZCwgY29sb3I6ICd3aGl0ZScgfQogICAgfSwKICAgIGNvbXB1dGVkWW91cnNTdHlsZSgpIHsKICAgICAgcmV0dXJuIHsgYmFja2dyb3VuZENvbG9yOiB0aGlzLiR0aGVtZXMuaW5mbywgY29sb3I6ICd3aGl0ZScgfQogICAgfSwKICB9LAogIHByb3BzOiB7CiAgICB2YWx1ZTogQXJyYXksCiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6ICdzY3JvbGxUb0JvdHRvbScsCiAgfSwKICBtZXRob2RzOiB7CiAgICBzY3JvbGxUb0JvdHRvbSh2YWwsIG9sZCkgewogICAgICBpZih2YWwgJiYgb2xkICYmIHZhbC5sZW5ndGggPT0gb2xkLmxlbmd0aCkgcmV0dXJuCiAgICAgIAogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB2YXIgbWVzc2FnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmEtY2hhdF9fYm9keScpCiAgICAgICAgbWVzc2FnZXMuc2Nyb2xsVG9wID0gbWVzc2FnZXMuc2Nyb2xsSGVpZ2h0IC0gbWVzc2FnZXMuY2xpZW50SGVpZ2h0CiAgICAgIH0sIDEwKQogICAgfSwKICAgIHNlbmRNZXNzYWdlKCkgewogICAgICBpZiAoIXRoaXMuaW5wdXRNZXNzYWdlKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB7CiAgICAgICAgdGV4dDogdGhpcy5pbnB1dE1lc3NhZ2UsCiAgICAgICAgeW91cnM6IHRydWUsCiAgICAgIH0pCiAgICAgIHRoaXMuaW5wdXRNZXNzYWdlID0gJycKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLnZhLWNoYXRfX2lucHV0JykuZm9jdXMoKQogICAgICB9LCAxMCkKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpCiAgfSwKfQo="},{"version":3,"sources":["Chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Chat.vue","sourceRoot":"src/components/ui/chat","sourcesContent":["<template>\n  <div class=\"va-chat\">\n    <div\n      class=\"va-chat__body\"\n      :style=\"{ backgroundColor: '#00000017' }\"\n      v-sticky-scroll=\"{\n        animate: true,\n        duration: 200,\n      }\"\n    >\n      <div class=\"va-chat__body-messages\">\n        <div\n          class=\"va-chat__message\"\n          v-for=\"(message, index) in value\"\n          :key=\"index\"\n          :style=\"{\n            ...(message.yours ? computedYoursStyle : computedStyle),\n            paddingTop: !message.delivered ? '1.4rem' : '0.657rem',\n          }\"\n          :class=\"{ 'va-chat__message--yours': message.yours }\"\n        >\n          <div\n            class=\"va-chat__message-info\"\n            :style=\"{\n              left: message.yours ? 'auto' : '0.5rem',\n              right: message.yours ? '0.5rem' : 'auto',\n            }\"\n          >\n            <va-icon\n              name=\"fa fa-spinner fa-spin\"\n              v-if=\"!message.delivered\"\n            ></va-icon>\n          </div>\n\n          <span\n            class=\"va-chat__message-text\"\n            :style=\"{\n              textAlign: message.yours ? 'right' : 'left',\n            }\"\n          >\n            {{ message.text }}\n          </span>\n          <span\n            class=\"va-chat__message_date\"\n            :style=\"{\n              opacity: 0.4,\n              textAlign: message.yours ? 'right' : 'left',\n            }\"\n          >\n            {{ message.date }}\n          </span>\n        </div>\n      </div>\n    </div>\n    <div class=\"va-chat__controls\">\n      <va-input\n        :autosize=\"true\"\n        v-model=\"inputMessage\"\n        @keypress.enter=\"sendMessage\"\n        :placeholder=\"$t('dashboard.support.placeholder')\"\n        class=\"va-chat__input\"\n      />\n      <va-button @click=\"sendMessage\">\n        {{ $t('buttons.send') }}\n      </va-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { StickyScroll } from '../../../services/vuestic-ui/components'\n\nexport default {\n  name: 'chat',\n  directives: { StickyScroll },\n  data() {\n    return {\n      inputMessage: '',\n    }\n  },\n  computed: {\n    computedStyle() {\n      return { backgroundColor: this.$themes.darkForeground, color: 'white' }\n    },\n    computedYoursStyle() {\n      return { backgroundColor: this.$themes.info, color: 'white' }\n    },\n  },\n  props: {\n    value: Array,\n  },\n  watch: {\n    value: 'scrollToBottom',\n  },\n  methods: {\n    scrollToBottom(val, old) {\n      if(val && old && val.length == old.length) return\n      \n      setTimeout(() => {\n        var messages = document.querySelector('.va-chat__body')\n        messages.scrollTop = messages.scrollHeight - messages.clientHeight\n      }, 10)\n    },\n    sendMessage() {\n      if (!this.inputMessage) {\n        return\n      }\n      this.$emit('input', {\n        text: this.inputMessage,\n        yours: true,\n      })\n      this.inputMessage = ''\n      setTimeout(() => {\n        this.$el.querySelector('.va-chat__input').focus()\n      }, 10)\n    },\n  },\n  mounted() {\n    this.scrollToBottom()\n  },\n}\n</script>\n\n<style lang=\"scss\">\n.chat {\n  &__content {\n    @include va-flex-center();\n  }\n}\n\n$chat-message-br: 0.65rem;\n\n.va-chat {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  display: grid;\n  grid-template-rows: 1fr 6rem;\n\n  &__body {\n    padding: 20px 10px;\n    width: 100%;\n    height: 100%;\n    overflow-y: auto;\n\n    &-messages {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-end;\n      max-height: 300px;\n    }\n  }\n\n  &__message {\n    position: relative;\n    padding: 0.657rem 1.375rem;\n    margin-bottom: $chat-message-br;\n    max-width: 70%;\n    overflow-wrap: break-word;\n    border-radius: 0.5rem;\n    border-top-left-radius: 0;\n    align-self: flex-start;\n    background-color: $light-gray2;\n    transition: padding 0.3s;\n\n    &-info {\n      position: absolute;\n      top: 0.4rem;\n      font-size: 0.6rem;\n    }\n\n    &-text {\n      display: block;\n      transform: translateY(-2px);\n    }\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n\n    &--yours {\n      align-self: flex-end;\n      border-top-right-radius: 0;\n      border-top-left-radius: 0.5rem;\n    }\n\n    &_date {\n      font-family: sans-serif;\n      font-size: 0.8rem;\n      opacity: 0;\n      transition: opacity 0.5s;\n    }\n  }\n\n  &__controls {\n    display: flex;\n    align-items: center;\n    height: 100%;\n    width: 100%;\n  }\n\n  &__input {\n    margin-bottom: 0;\n    color: white;\n  }\n}\n</style>\n"]}]}