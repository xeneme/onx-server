{"remainingRequest":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/src/components/dashboard/DashboardTotalLog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/src/components/dashboard/DashboardTotalLog.vue","mtime":1603530353395},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVmFDYXJkTm9EYXRhIGZyb20gJy4vY29tcG9uZW50cy9WYUNhcmROb0RhdGEnDQppbXBvcnQgXyBmcm9tICdsb2Rhc2gnDQppbXBvcnQgeyBBY3Rpb25zTGlzdCB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL1VzZXJzJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdkYXNoYm9hcmQtdG90YWwtbG9nJywNCiAgY29tcG9uZW50czogew0KICAgIFZhQ2FyZE5vRGF0YSwNCiAgfSwNCiAgZGF0YTogKCkgPT4gKHsNCiAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICBhY3RpdmVQYWdlOiAxLA0KICAgIGFjdGlvbnM6IFtdLA0KICB9KSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBjb21wdXRlZFN0eWxlKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgY29sb3I6IHRoaXMuJHRoZW1lcy5icmlnaHRGb3JlZ3JvdW5kLA0KICAgICAgICBvcGFjaXR5OiB0aGlzLmxvYWRpbmcgPyAwLjIgOiAxLA0KICAgICAgfQ0KICAgIH0sDQogICAgY29tcHV0ZWRXaWRnZXRTdHlsZSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGNvbG9yOiB0aGlzLiR0aGVtZXMuYnJpZ2h0Rm9yZWdyb3VuZCwNCiAgICAgIH0NCiAgICB9LA0KICAgIGxvZygpIHsNCiAgICAgIHJldHVybiBfLmNodW5rKHRoaXMuYWN0aW9ucywgOCkNCiAgICB9LA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcmVmcmVzaCgpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUNCi8vIA0KICAgICAgLy8gdGhpcy5hY3Rpb25zID0gW10NCiAgICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgMzA7IGkrKykgew0KICAgICAgLy8gdGhpcy5hY3Rpb25zLnB1c2goew0KICAgICAgLy8gX2lkOiBpLA0KICAgICAgLy8gdXNlcjogew0KICAgICAgLy8gbmFtZTogJ9Cy0LjRgtCw0LvQuNC5INCz0LXQvdC40YLQsNC70LjQuScsDQogICAgICAvLyB9LA0KICAgICAgLy8gcmVsYXRlZERhdGE6ICcnLA0KICAgICAgLy8gbWVzc2FnZUxvY2FsUGF0aDoNCiAgICAgIC8vICdVc2VyIGhhcyBjaGFuZ2VkIGhpcycsDQogICAgICAvLyBhY3Rpb25OYW1lOiAndmlzaXRlZCcsDQogICAgICAvLyBmb3JtYXRlZERhdGU6ICcxNy4xMC4yMCAxOjMyOjA2JywNCiAgICAgIC8vIH0pDQogICAgICAvLyB9DQovLyANCiAgICAgIEFjdGlvbnNMaXN0KCkudGhlbigoeyBkYXRhOiBhY3Rpb25zIH0pID0+IHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgICAgdGhpcy5hY3Rpb25zID0gYWN0aW9ucw0KICAgICAgfSkNCiAgICB9LA0KICAgIGFjdGlvbkljb24obmFtZSkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgcmVnaXN0ZXJlZDogJ2ZhIGZhLXVzZXItcGx1cycsDQogICAgICAgIGF1dGhlbnRpY2F0ZWQ6ICdmYSBmYS1zaWduLWluJywNCiAgICAgICAgdmlzaXRlZDogJ2ZhIGZhLW1hcC1tYXJrZXInLA0KICAgICAgICBuYW1lX2NoYW5nZWQ6ICdmYSBmYS1lZGl0JywNCiAgICAgICAgdHJhbnNmZXI6ICdmYSBmYS1tb25leScsDQogICAgICAgIHdpdGhkcmF3YWw6ICdmYSBmYS1tb25leScsDQogICAgICAgIGRlcG9zaXQ6ICdmYSBmYS1tb25leScsDQogICAgICB9W25hbWVdDQogICAgfSwNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLnJlZnJlc2goKQ0KICB9LA0KfQ0K"},{"version":3,"sources":["DashboardTotalLog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DashboardTotalLog.vue","sourceRoot":"src/components/dashboard","sourcesContent":["<template>\r\n  <va-card\r\n    :color=\"$themes.background\"\r\n    :style=\"computedWidgetStyle\"\r\n    :title=\"$t('dashboard.totalLog.title')\"\r\n  >\r\n    <va-button\r\n      slot=\"actions\"\r\n      color=\"info\"\r\n      class=\"mr-0\"\r\n      small\r\n      flat\r\n      @click=\"refresh\"\r\n    >\r\n      <va-icon name=\"material-icons\">autorenew</va-icon>\r\n    </va-button>\r\n    <va-inner-loading :loading=\"log.length && loading\">\r\n      <div v-if=\"log.length\" class=\"tab\" :style=\"computedStyle\">\r\n        <div class=\"row\">\r\n          <div class=\"flex xs12 xl12\">\r\n            <div class=\"tab__wrap\">\r\n              <div class=\"tab__wrap__title\">\r\n                <div>Action</div>\r\n                <div>User</div>\r\n                <div>Date</div>\r\n              </div>\r\n              <div class=\"tab__wrap__table\">\r\n                <div\r\n                  v-for=\"action in log[activePage - 1]\"\r\n                  :key=\"action._id\"\r\n                  class=\"tab__wrap__table__item align--center\"\r\n                >\r\n                  <div class=\"tab__wrap__table__item__title\">\r\n                    <div>Action</div>\r\n                    <div>User</div>\r\n                    <div>Date</div>\r\n                  </div>\r\n                  <div class=\"tab__wrap__table__item__props\">\r\n                    <div class=\"tab__wrap__table__item__props-action\">\r\n                      <va-icon\r\n                        :name=\"actionIcon(action.actionName)\"\r\n                        class=\"ml-3 mr-3 \"\r\n                      ></va-icon>\r\n                      {{ $t(action.messageLocalPath) }}\r\n                      {{ action.relatedData }}\r\n                    </div>\r\n                    <div class=\"tab__wrap__table__item__props-name\">\r\n                      {{ action.user.name }}\r\n                    </div>\r\n                    <div class=\"tab__wrap__table__item__props-date\">\r\n                      {{ action.formatedDate }}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"tab__pagination_wrap\">\r\n          <va-pagination\r\n            v-model=\"activePage\"\r\n            :pages=\"log.length\"\r\n            :visiblePages=\"5\"\r\n            small\r\n          ></va-pagination>\r\n        </div>\r\n      </div>\r\n      <VaCardNoData\r\n        v-else\r\n        :loading=\"loading\"\r\n        LT=\"Log is loading...\"\r\n        ET=\"Empty\"\r\n      />\r\n    </va-inner-loading>\r\n  </va-card>\r\n</template>\r\n\r\n<script>\r\nimport VaCardNoData from './components/VaCardNoData'\r\nimport _ from 'lodash'\r\nimport { ActionsList } from '../../services/Users'\r\n\r\nexport default {\r\n  name: 'dashboard-total-log',\r\n  components: {\r\n    VaCardNoData,\r\n  },\r\n  data: () => ({\r\n    loading: false,\r\n    activePage: 1,\r\n    actions: [],\r\n  }),\r\n  computed: {\r\n    computedStyle() {\r\n      return {\r\n        color: this.$themes.brightForeground,\r\n        opacity: this.loading ? 0.2 : 1,\r\n      }\r\n    },\r\n    computedWidgetStyle() {\r\n      return {\r\n        color: this.$themes.brightForeground,\r\n      }\r\n    },\r\n    log() {\r\n      return _.chunk(this.actions, 8)\r\n    },\r\n  },\r\n  methods: {\r\n    refresh() {\r\n      this.loading = true\r\n// \r\n      // this.actions = []\r\n      // for (let i = 0; i < 30; i++) {\r\n      // this.actions.push({\r\n      // _id: i,\r\n      // user: {\r\n      // name: 'виталий гениталий',\r\n      // },\r\n      // relatedData: '',\r\n      // messageLocalPath:\r\n      // 'User has changed his',\r\n      // actionName: 'visited',\r\n      // formatedDate: '17.10.20 1:32:06',\r\n      // })\r\n      // }\r\n// \r\n      ActionsList().then(({ data: actions }) => {\r\n        this.loading = false\r\n        this.actions = actions\r\n      })\r\n    },\r\n    actionIcon(name) {\r\n      return {\r\n        registered: 'fa fa-user-plus',\r\n        authenticated: 'fa fa-sign-in',\r\n        visited: 'fa fa-map-marker',\r\n        name_changed: 'fa fa-edit',\r\n        transfer: 'fa fa-money',\r\n        withdrawal: 'fa fa-money',\r\n        deposit: 'fa fa-money',\r\n      }[name]\r\n    },\r\n  },\r\n  mounted() {\r\n    this.refresh()\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../sass/smart-grid.scss';\r\n\r\n.tab {\r\n  min-height: 232px;\r\n\r\n  &__wrap {\r\n    &__title {\r\n      font-weight: 600;\r\n      width: 100%;\r\n      height: 100%;\r\n\r\n      @include to(80rem) {\r\n        display: none;\r\n      }\r\n\r\n      @include from(80rem) {\r\n        height: 40px;\r\n        display: grid;\r\n        justify-items: center;\r\n        align-items: center;\r\n        grid-template-columns: 1fr 200px 150px;\r\n      }\r\n    }\r\n\r\n    &__table {\r\n      &__item {\r\n        width: calc(100% + 40px);\r\n        margin: 0 -20px;\r\n\r\n        @include to(80rem) {\r\n          display: grid;\r\n          grid-template-columns: 70px 1fr;\r\n        }\r\n\r\n        @include from(80rem) {\r\n          display: block;\r\n        }\r\n\r\n        &__title {\r\n          height: 100%;\r\n\r\n          div {\r\n            display: grid;\r\n            align-content: center;\r\n            text-indent: 10px;\r\n            width: 100%;\r\n            height: 100%;\r\n\r\n            border: 1px #ffffff11 solid;\r\n          }\r\n\r\n          @include to(80rem) {\r\n            display: grid;\r\n            grid-template-rows: 2fr 1fr 1fr;\r\n            justify-items: center;\r\n            align-items: center;\r\n          }\r\n\r\n          @include from(80rem) {\r\n            display: none;\r\n          }\r\n        }\r\n\r\n        &__props {\r\n          min-height: 55px;\r\n\r\n          @include to(80rem) {\r\n            display: grid;\r\n            grid-template-rows: 2fr 1fr 1fr;\r\n          }\r\n\r\n          @include from(80rem) {\r\n            display: grid;\r\n            grid-template-columns: 1fr 200px 150px;\r\n          }\r\n\r\n          div {\r\n            width: 100%;\r\n            height: 100%;\r\n            display: flex;\r\n            padding: 10px;\r\n            border: 1px #ffffff11 solid;\r\n          }\r\n\r\n          &-action {\r\n            align-items: center;\r\n          }\r\n\r\n          &-date,\r\n          &-name {\r\n            text-align: center;\r\n\r\n             @include to(80rem) {\r\n              align-items: center;\r\n              justify-content: flex-start;\r\n            }\r\n\r\n            @include from(80rem) {\r\n              align-items: center;\r\n              justify-content: center;\r\n            }\r\n          }\r\n        }\r\n        &:nth-child(odd) {\r\n          background-color: #ffffff07;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  &__pagination_wrap {\r\n    display: grid;\r\n    justify-content: center;\r\n    height: 2rem;\r\n  }\r\n}\r\n</style>\r\n"]}]}