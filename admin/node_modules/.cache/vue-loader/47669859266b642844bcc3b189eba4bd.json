{"remainingRequest":"/mnt/d/Working_Area/DEV/CUSTOMERS/clean-vuestic/2/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/d/Working_Area/DEV/CUSTOMERS/clean-vuestic/2/src/components/dashboard/DashboardProfile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/clean-vuestic/2/src/components/dashboard/DashboardProfile.vue","mtime":1604779159747},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/clean-vuestic/2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/clean-vuestic/2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/clean-vuestic/2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/clean-vuestic/2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUHJvZmlsZUluZm8gZnJvbSAnLi9kYXNoYm9hcmQtcHJvZmlsZS10YWJzL1Byb2ZpbGVJbmZvJw0KaW1wb3J0IFByb2ZpbGVUcmFuc2FjdGlvbnMgZnJvbSAnLi9kYXNoYm9hcmQtcHJvZmlsZS10YWJzL1Byb2ZpbGVUcmFuc2FjdGlvbnMnDQppbXBvcnQgUHJvZmlsZUxvZyBmcm9tICcuL2Rhc2hib2FyZC1wcm9maWxlLXRhYnMvUHJvZmlsZUxvZycNCmltcG9ydCBQcm9maWxlQWN0aW9ucyBmcm9tICcuL2Rhc2hib2FyZC1wcm9maWxlLXRhYnMvUHJvZmlsZUFjdGlvbnMnDQppbXBvcnQgUHJvZmlsZUJpbmQgZnJvbSAnLi9kYXNoYm9hcmQtcHJvZmlsZS10YWJzL1Byb2ZpbGVCaW5kJw0KaW1wb3J0IHsgTWUsIFVzZXJCeUlkIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvVXNlcnMnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0Rhc2hib2FyZFByb2ZpbGUnLA0KICBjb21wb25lbnRzOiB7DQogICAgUHJvZmlsZUluZm8sDQogICAgUHJvZmlsZVRyYW5zYWN0aW9ucywNCiAgICBQcm9maWxlTG9nLA0KICAgIFByb2ZpbGVBY3Rpb25zLA0KICAgIFByb2ZpbGVCaW5kLA0KICB9LA0KICBwcm92aWRlKCkgew0KICAgIHJldHVybiB7DQogICAgICBoYW5kbGVTdWNjZXNzKHJlc3BvbnNlKSB7DQogICAgICAgIHRoaXMuc2hvd1RvYXN0KHJlc3BvbnNlLm1lc3NhZ2UsIHsNCiAgICAgICAgICBpY29uOiAnZmEtY2hlY2snLA0KICAgICAgICAgIHBvc2l0aW9uOiAnYm90dG9tLWNlbnRlcicsDQogICAgICAgICAgZHVyYXRpb246IDQwMDAsDQogICAgICAgICAgdHlwZTogJ3ByaW1hcnknLA0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIGhhbmRsZUVycm9yKHJlc3BvbnNlKSB7DQogICAgICAgIHRoaXMuc2hvd1RvYXN0KHJlc3BvbnNlLm1lc3NhZ2UsIHsNCiAgICAgICAgICBpY29uOiAnZmEtdGltZXMnLA0KICAgICAgICAgIHBvc2l0aW9uOiAnYm90dG9tLWNlbnRlcicsDQogICAgICAgICAgZHVyYXRpb246IDQwMDAsDQogICAgICAgICAgdHlwZTogJ3ByaW1hcnknLA0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICB9DQogIH0sDQogIGRhdGE6ICgpID0+ICh7DQogICAgdXNlcjogew0KICAgICAgaWQ6ICcuLi4nLA0KICAgICAgcm9sZTogJy4uLicsDQogICAgICB1c2VybmFtZTogJy4uLicsDQogICAgICB0cmFuc2ZlcnM6ICcuLi4nLA0KICAgICAgdGVsZWdyYW1Vc2VybmFtZTogJy4uLicsDQogICAgICBuYW1lOiAnJywNCiAgICAgIGVtYWlsOiAnLi4uJywNCiAgICAgIGJpbmRlZFRvOiAnLi4uJywNCiAgICAgIGFjdGlvbnM6IFtdLA0KICAgICAgdHJhbnNhY3Rpb25zOiBbXSwNCiAgICAgIGxvZzogW10sDQogICAgICB3YWxsZXRzOiB7DQogICAgICAgIGJpdGNvaW46IHsNCiAgICAgICAgICBiYWxhbmNlOiAwLjEsDQogICAgICAgIH0sDQogICAgICAgIGxpdGVjb2luOiB7DQogICAgICAgICAgYmFsYW5jZTogMC4wMDAxMiwNCiAgICAgICAgfSwNCiAgICAgICAgZXRoZXJldW06IHsNCiAgICAgICAgICBiYWxhbmNlOiAwLA0KICAgICAgICB9LA0KICAgICAgfSwNCiAgICAgIG1lOiBmYWxzZSwNCiAgICB9LA0KICAgIGxvYWRpbmdUYWJzOiBbDQogICAgICAnUHJvZmlsZUluZm8nLA0KICAgICAgJ1Byb2ZpbGVUcmFuc2FjdGlvbnMnLA0KICAgICAgJ1Byb2ZpbGVMb2cnLA0KICAgICAgJ1Byb2ZpbGVBY3Rpb25zJywNCiAgICBdLA0KICAgIHRhYnNTdGF0ZTogMCwNCiAgICBteVJvbGU6ICcnLA0KICB9KSwNCiAgcHJvdmlkZSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXNlcjogdGhpcy51c2VyLA0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBjb21wdXRlZFdpZGdldENvbG9yKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHRoZW1lcy5iYWNrZ3JvdW5kDQogICAgfSwNCiAgICBjb21wdXRlZFN0eWxlKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgY29sb3I6IHRoaXMuJHRoZW1lcy5icmlnaHRGb3JlZ3JvdW5kLA0KICAgICAgfQ0KICAgIH0sDQogICAgY29tcHV0ZWRUYWJzU3R5bGUoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBjb2xvcjogdGhpcy4kdGhlbWVzLnNlY29uZGFyeSwNCiAgICAgIH0NCiAgICB9LA0KICAgIHRhYnMoKSB7DQogICAgICBsZXQgdHMgPSBbJ1Byb2ZpbGVJbmZvJ10NCg0KICAgICAgaWYgKHRoaXMudXNlci5yb2xlID09PSAndXNlcicpIHRzLnB1c2goJ1Byb2ZpbGVUcmFuc2FjdGlvbnMnKQ0KICAgICAgdHMucHVzaCgnUHJvZmlsZUxvZycpDQogICAgICB0cy5wdXNoKCdQcm9maWxlQWN0aW9ucycpDQogICAgICBpZiAodGhpcy5teVJvbGUgPT09ICdtYW5hZ2VyJykgdHMucHVzaCgnUHJvZmlsZUJpbmQnKQ0KDQogICAgICB0aGlzLnRhYnNTdGF0ZSA9DQogICAgICAgIHRoaXMudGFic1N0YXRlID4gdHMubGVuZ3RoIC0gMSA/IHRzLmxlbmd0aCAtIDEgOiB0aGlzLnRhYnNTdGF0ZQ0KDQogICAgICByZXR1cm4gdHMNCiAgICB9LA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0TXlQcm9maWxlKCkgew0KICAgICAgdGhpcy5sb2FkaW5nKCkNCg0KICAgICAgTWUoKQ0KICAgICAgICAudGhlbigoeyBkYXRhOiB1c2VyIH0pID0+IHsNCiAgICAgICAgICB0aGlzLm15Um9sZSA9IHVzZXIucm9sZQ0KICAgICAgICAgIHRoaXMudXBkYXRlT3BlbmVkUHJvZmlsZSh1c2VyLCB0cnVlKQ0KICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoJ29wZW4tZGlhbG9ndWUnLCB7IHVzZXIgfSkNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgdGhpcy5sb2FkZWQoKQ0KICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KA0KICAgICAgICAgICAgJ0Nhbm5vdCBvcGVuIHlvdXIgcHJvZmlsZS4gU3RhdHVzIGNvZGUgJyArDQogICAgICAgICAgICAgIChlcnIucmVzcG9uc2UgPyBlcnIucmVzcG9uc2Uuc3RhdHVzIDogJyVDT0RFJScpLA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBpY29uOiAnZmEtdGltZXMnLA0KICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1jZW50ZXInLA0KICAgICAgICAgICAgICBkdXJhdGlvbjogNDAwMCwNCiAgICAgICAgICAgICAgdHlwZTogJ3ByaW1hcnknLA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICkNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIHVwZGF0ZU9wZW5lZFByb2ZpbGUodXNlciwgbWUpIHsNCiAgICAgIHRoaXMuJHJvb3QuJGVtaXQoJ3VwZGF0ZS13YWxsZXQnLCB1c2VyKQ0KDQogICAgICB0aGlzLmxvYWRlZCgpDQogICAgICB0aGlzLnVzZXIubWUgPSAhIW1lDQogICAgICA7W3RoaXMudXNlci5maXJzdE5hbWUsIHRoaXMudXNlci5sYXN0TmFtZV0gPSB1c2VyLm5hbWUuc3BsaXQoJyAnKQ0KDQogICAgICBpZiAoT2JqZWN0LmtleXModXNlcikubGVuZ3RoKSB7DQogICAgICAgIE9iamVjdC5rZXlzKHVzZXIpLmZvckVhY2goa2V5ID0+IHsNCiAgICAgICAgICB0aGlzLnVzZXJba2V5XSA9IHVzZXJba2V5XQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgcmVmcmVzaE9wZW5lZFByb2ZpbGUoKSB7DQogICAgICB0aGlzLiRyb290LiRlbWl0KCdnZXR0aW5nLWRpYWxvZ3VlJykNCg0KICAgICAgVXNlckJ5SWQodGhpcy51c2VyLmlkKQ0KICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsNCiAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCdvcGVuLWRpYWxvZ3VlJywgdGhpcy51c2VyKQ0KICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoJ29wZW4tcHJvZmlsZScsIGRhdGEpDQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgIHRoaXMuZ2V0TXlQcm9maWxlKCkNCiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgNCiAgICAgICAgICAgICdDYW5ub3Qgb3BlbiBoaXMgcHJvZmlsZS4gU3RhdHVzIGNvZGUgJyArDQogICAgICAgICAgICAgIChlcnIucmVzcG9uc2UgPyBlcnIucmVzcG9uc2Uuc3RhdHVzIDogJyVDT0RFJScpLA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBpY29uOiAnZmEtdGltZXMnLA0KICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1jZW50ZXInLA0KICAgICAgICAgICAgICBkdXJhdGlvbjogNDAwMCwNCiAgICAgICAgICAgICAgdHlwZTogJ3ByaW1hcnknLA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICkNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIG5ldFRvQ3VycmVuY3k6IG5ldCA9Pg0KICAgICAgKHsNCiAgICAgICAgQlRDOiAnYml0Y29pbicsDQogICAgICAgIExUQzogJ2xpdGVjb2luJywNCiAgICAgICAgRVRIOiAnZXRoZXJldW0nLA0KICAgICAgfVtuZXRdKSwNCiAgICB1cGRhdGVCYWxhbmNlKGN1cnJlbmN5KSB7DQogICAgICBsZXQgYmFsYW5jZSA9IHRoaXMudXNlci50cmFuc2FjdGlvbnMNCiAgICAgICAgLmZpbHRlcih0ID0+IHQuY3VycmVuY3kgPT09IGN1cnJlbmN5KQ0KICAgICAgICAucmVkdWNlKA0KICAgICAgICAgIChiYWxhbmNlLCB0KSA9Pg0KICAgICAgICAgICAgYmFsYW5jZSArICh0LnR5cGUgPT09ICdyZWNlaXZlZCcgPyArdC5hbW91bnQgOiAtdC5hbW91bnQpLA0KICAgICAgICAgIDANCiAgICAgICAgKQ0KDQogICAgICB0aGlzLnVzZXIud2FsbGV0c1tjdXJyZW5jeS50b0xvd2VyQ2FzZSgpXS5iYWxhbmNlID0gYmFsYW5jZQ0KICAgIH0sDQogICAgYWRkVHJhbnNhY3Rpb24odCkgew0KICAgICAgdGhpcy51c2VyLnRyYW5zYWN0aW9ucyA9IFt0LCAuLi50aGlzLnVzZXIudHJhbnNhY3Rpb25zXQ0KICAgICAgaWYgKHQubmFtZSAhPT0gJ0RlcG9zaXQnKSB0aGlzLnVwZGF0ZUJhbGFuY2UodC5jdXJyZW5jeSkNCiAgICB9LA0KICAgIHJlbW92ZVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKSB7DQogICAgICB0aGlzLnVzZXIudHJhbnNhY3Rpb25zID0gdGhpcy51c2VyLnRyYW5zYWN0aW9ucy5maWx0ZXIoDQogICAgICAgIHQgPT4gdC5pZCAhPSB0cmFuc2FjdGlvbi5pZA0KICAgICAgKQ0KICAgICAgaWYgKHRyYW5zYWN0aW9uLm5hbWUgIT09ICdEZXBvc2l0JykNCiAgICAgICAgdGhpcy51cGRhdGVCYWxhbmNlKHRyYW5zYWN0aW9uLmN1cnJlbmN5KQ0KICAgIH0sDQogICAgbG9hZGluZygpIHsNCiAgICAgIHRoaXMubG9hZGluZ1RhYnMgPSBbDQogICAgICAgICdQcm9maWxlSW5mbycsDQogICAgICAgICdQcm9maWxlVHJhbnNhY3Rpb25zJywNCiAgICAgICAgJ1Byb2ZpbGVMb2cnLA0KICAgICAgICAnUHJvZmlsZUFjdGlvbnMnLA0KICAgICAgXQ0KICAgIH0sDQogICAgbG9hZGVkKCkgew0KICAgICAgdGhpcy5sb2FkaW5nVGFicyA9IFtdDQogICAgfSwNCiAgICBnZXR0aW5nUHJvZmlsZSgpIHsNCiAgICAgIHRoaXMubG9hZGluZygpDQogICAgfSwNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldE15UHJvZmlsZSgpDQogICAgdGhpcy4kcm9vdC4kb24oJ2dldHRpbmctcHJvZmlsZScsIHRoaXMuZ2V0dGluZ1Byb2ZpbGUpDQogICAgdGhpcy4kcm9vdC4kb24oJ29wZW4tcHJvZmlsZScsIHRoaXMudXBkYXRlT3BlbmVkUHJvZmlsZSkNCiAgICB0aGlzLiRyb290LiRvbigncmVmcmVzaC1wcm9maWxlJywgdGhpcy5yZWZyZXNoT3BlbmVkUHJvZmlsZSkNCiAgICB0aGlzLiRyb290LiRvbignYWRkLXRyYW5zYWN0aW9uJywgdGhpcy5hZGRUcmFuc2FjdGlvbikNCiAgICB0aGlzLiRyb290LiRvbigncmVtb3ZlLXRyYW5zYWN0aW9uJywgdGhpcy5yZW1vdmVUcmFuc2FjdGlvbikNCiAgfSwNCiAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICB0aGlzLiRyb290LiRvZmYoJ2dldHRpbmctcHJvZmlsZScsIHRoaXMubG9hZGluZykNCiAgICB0aGlzLiRyb290LiRvZmYoJ29wZW4tcHJvZmlsZScsIHRoaXMudXBkYXRlT3BlbmVkUHJvZmlsZSkNCiAgICB0aGlzLiRyb290LiRvZmYoJ3JlZnJlc2gtcHJvZmlsZScsIHRoaXMucmVmcmVzaE9wZW5lZFByb2ZpbGUpDQogICAgdGhpcy4kcm9vdC4kb2ZmKCdhZGQtdHJhbnNhY3RpZmYnLCB0aGlzLmFkZFRyYW5zYWN0aW9uKQ0KICAgIHRoaXMuJHJvb3QuJG9mZigncmVtb3ZlLXRyYW5zYWN0aW9uJywgdGhpcy5yZW1vdmVUcmFuc2FjdGlvbikNCiAgfSwNCn0NCg=="},{"version":3,"sources":["DashboardProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DashboardProfile.vue","sourceRoot":"src/components/dashboard","sourcesContent":["<template>\r\n  <va-card\r\n    :color=\"computedWidgetColor\"\r\n    :style=\"computedStyle\"\r\n    :title=\"$t('dashboard.profile.title')\"\r\n  >\r\n    <va-button\r\n      @click=\"getMyProfile\"\r\n      class=\"mr-0\"\r\n      small\r\n      outline\r\n      slot=\"actions\"\r\n      color=\"info\"\r\n    >\r\n      {{ $t('dashboard.profile.myProfile') }}\r\n    </va-button>\r\n    <div class=\"profile__name\">\r\n      <va-icon name=\"fa fa-user-circle\" class=\"ml-2 mr-2\"></va-icon>\r\n      <div class=\"profile__name_first text--capitalize\">\r\n        {{ user.firstName || 'Loading...' }}\r\n      </div>\r\n      <div class=\"profile__name_last text--bold text--capitalize\">\r\n        {{ user.lastName }}\r\n      </div>\r\n    </div>\r\n    <va-tabs grow v-model=\"tabsState\" :style=\"computedTabsStyle\">\r\n      <va-tab v-for=\"(tab, i) in tabs\" :key=\"i\">\r\n        {{\r\n          $t(\r\n            'dashboard.profile.tabs.' +\r\n              tab.toLowerCase().replace('profile', '') +\r\n              '.title'\r\n          )\r\n        }}\r\n      </va-tab>\r\n    </va-tabs>\r\n    <component\r\n      :loading=\"loadingTabs.includes(tabs[tabsState])\"\r\n      :class=\"['', '', 'pb-4'][this.tabsState]\"\r\n      :is=\"tabs[tabsState]\"\r\n    />\r\n  </va-card>\r\n</template>\r\n\r\n<script>\r\nimport ProfileInfo from './dashboard-profile-tabs/ProfileInfo'\r\nimport ProfileTransactions from './dashboard-profile-tabs/ProfileTransactions'\r\nimport ProfileLog from './dashboard-profile-tabs/ProfileLog'\r\nimport ProfileActions from './dashboard-profile-tabs/ProfileActions'\r\nimport ProfileBind from './dashboard-profile-tabs/ProfileBind'\r\nimport { Me, UserById } from '../../services/Users'\r\n\r\nexport default {\r\n  name: 'DashboardProfile',\r\n  components: {\r\n    ProfileInfo,\r\n    ProfileTransactions,\r\n    ProfileLog,\r\n    ProfileActions,\r\n    ProfileBind,\r\n  },\r\n  provide() {\r\n    return {\r\n      handleSuccess(response) {\r\n        this.showToast(response.message, {\r\n          icon: 'fa-check',\r\n          position: 'bottom-center',\r\n          duration: 4000,\r\n          type: 'primary',\r\n        })\r\n      },\r\n      handleError(response) {\r\n        this.showToast(response.message, {\r\n          icon: 'fa-times',\r\n          position: 'bottom-center',\r\n          duration: 4000,\r\n          type: 'primary',\r\n        })\r\n      },\r\n    }\r\n  },\r\n  data: () => ({\r\n    user: {\r\n      id: '...',\r\n      role: '...',\r\n      username: '...',\r\n      transfers: '...',\r\n      telegramUsername: '...',\r\n      name: '',\r\n      email: '...',\r\n      bindedTo: '...',\r\n      actions: [],\r\n      transactions: [],\r\n      log: [],\r\n      wallets: {\r\n        bitcoin: {\r\n          balance: 0.1,\r\n        },\r\n        litecoin: {\r\n          balance: 0.00012,\r\n        },\r\n        ethereum: {\r\n          balance: 0,\r\n        },\r\n      },\r\n      me: false,\r\n    },\r\n    loadingTabs: [\r\n      'ProfileInfo',\r\n      'ProfileTransactions',\r\n      'ProfileLog',\r\n      'ProfileActions',\r\n    ],\r\n    tabsState: 0,\r\n    myRole: '',\r\n  }),\r\n  provide() {\r\n    return {\r\n      user: this.user,\r\n    }\r\n  },\r\n  computed: {\r\n    computedWidgetColor() {\r\n      return this.$themes.background\r\n    },\r\n    computedStyle() {\r\n      return {\r\n        color: this.$themes.brightForeground,\r\n      }\r\n    },\r\n    computedTabsStyle() {\r\n      return {\r\n        color: this.$themes.secondary,\r\n      }\r\n    },\r\n    tabs() {\r\n      let ts = ['ProfileInfo']\r\n\r\n      if (this.user.role === 'user') ts.push('ProfileTransactions')\r\n      ts.push('ProfileLog')\r\n      ts.push('ProfileActions')\r\n      if (this.myRole === 'manager') ts.push('ProfileBind')\r\n\r\n      this.tabsState =\r\n        this.tabsState > ts.length - 1 ? ts.length - 1 : this.tabsState\r\n\r\n      return ts\r\n    },\r\n  },\r\n  methods: {\r\n    getMyProfile() {\r\n      this.loading()\r\n\r\n      Me()\r\n        .then(({ data: user }) => {\r\n          this.myRole = user.role\r\n          this.updateOpenedProfile(user, true)\r\n          this.$root.$emit('open-dialogue', { user })\r\n        })\r\n        .catch(err => {\r\n          this.loaded()\r\n          this.showToast(\r\n            'Cannot open your profile. Status code ' +\r\n              (err.response ? err.response.status : '%CODE%'),\r\n            {\r\n              icon: 'fa-times',\r\n              position: 'bottom-center',\r\n              duration: 4000,\r\n              type: 'primary',\r\n            }\r\n          )\r\n        })\r\n    },\r\n    updateOpenedProfile(user, me) {\r\n      this.$root.$emit('update-wallet', user)\r\n\r\n      this.loaded()\r\n      this.user.me = !!me\r\n      ;[this.user.firstName, this.user.lastName] = user.name.split(' ')\r\n\r\n      if (Object.keys(user).length) {\r\n        Object.keys(user).forEach(key => {\r\n          this.user[key] = user[key]\r\n        })\r\n      }\r\n    },\r\n    refreshOpenedProfile() {\r\n      this.$root.$emit('getting-dialogue')\r\n\r\n      UserById(this.user.id)\r\n        .then(({ data }) => {\r\n          this.$root.$emit('open-dialogue', this.user)\r\n          this.$root.$emit('open-profile', data)\r\n        })\r\n        .catch(err => {\r\n          this.getMyProfile()\r\n          this.showToast(\r\n            'Cannot open his profile. Status code ' +\r\n              (err.response ? err.response.status : '%CODE%'),\r\n            {\r\n              icon: 'fa-times',\r\n              position: 'bottom-center',\r\n              duration: 4000,\r\n              type: 'primary',\r\n            }\r\n          )\r\n        })\r\n    },\r\n    netToCurrency: net =>\r\n      ({\r\n        BTC: 'bitcoin',\r\n        LTC: 'litecoin',\r\n        ETH: 'ethereum',\r\n      }[net]),\r\n    updateBalance(currency) {\r\n      let balance = this.user.transactions\r\n        .filter(t => t.currency === currency)\r\n        .reduce(\r\n          (balance, t) =>\r\n            balance + (t.type === 'received' ? +t.amount : -t.amount),\r\n          0\r\n        )\r\n\r\n      this.user.wallets[currency.toLowerCase()].balance = balance\r\n    },\r\n    addTransaction(t) {\r\n      this.user.transactions = [t, ...this.user.transactions]\r\n      if (t.name !== 'Deposit') this.updateBalance(t.currency)\r\n    },\r\n    removeTransaction(transaction) {\r\n      this.user.transactions = this.user.transactions.filter(\r\n        t => t.id != transaction.id\r\n      )\r\n      if (transaction.name !== 'Deposit')\r\n        this.updateBalance(transaction.currency)\r\n    },\r\n    loading() {\r\n      this.loadingTabs = [\r\n        'ProfileInfo',\r\n        'ProfileTransactions',\r\n        'ProfileLog',\r\n        'ProfileActions',\r\n      ]\r\n    },\r\n    loaded() {\r\n      this.loadingTabs = []\r\n    },\r\n    gettingProfile() {\r\n      this.loading()\r\n    },\r\n  },\r\n  created() {\r\n    this.getMyProfile()\r\n    this.$root.$on('getting-profile', this.gettingProfile)\r\n    this.$root.$on('open-profile', this.updateOpenedProfile)\r\n    this.$root.$on('refresh-profile', this.refreshOpenedProfile)\r\n    this.$root.$on('add-transaction', this.addTransaction)\r\n    this.$root.$on('remove-transaction', this.removeTransaction)\r\n  },\r\n  beforeDestroy() {\r\n    this.$root.$off('getting-profile', this.loading)\r\n    this.$root.$off('open-profile', this.updateOpenedProfile)\r\n    this.$root.$off('refresh-profile', this.refreshOpenedProfile)\r\n    this.$root.$off('add-transactiff', this.addTransaction)\r\n    this.$root.$off('remove-transaction', this.removeTransaction)\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.profile__name {\r\n  font-size: 1.4rem;\r\n  margin-bottom: 0.5rem;\r\n  justify-content: center;\r\n  align-items: center;\r\n  display: flex;\r\n\r\n  &_first,\r\n  &_last {\r\n    margin: 0 5px;\r\n  }\r\n}\r\n</style>\r\n"]}]}