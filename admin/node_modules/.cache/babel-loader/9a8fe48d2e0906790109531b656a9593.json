{"remainingRequest":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/thread-loader/dist/cjs.js!/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/babel-loader/lib/index.js!/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/src/components/settings/CustomWithdrawError.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/src/components/settings/CustomWithdrawError.vue","mtime":1600437419449},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgKiBhcyBTZXR0aW5ncyBmcm9tICcuLi8uLi9zZXJ2aWNlcy9TZXR0aW5ncyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnY3VzdG9tLXdpdGhkcmF3LWVycm9yJywKICBpbmplY3Q6IFsndXNlciddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcmVxdWlyZUNvbmZpcm1hdGlvbjogZmFsc2UsCiAgICAgIGNvbW1pc3Npb246IDAsCiAgICAgIGRlcG9zaXRFcnJvck1lc3NhZ2U6ICcnLAogICAgICB3aXRoZHJhd0Vycm9yTWVzc2FnZTogJycKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY29tcHV0ZWRXaWRnZXRDb2xvcjogZnVuY3Rpb24gY29tcHV0ZWRXaWRnZXRDb2xvcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHRoZW1lcy5iYWNrZ3JvdW5kOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlRGF0YTogZnVuY3Rpb24gdXBkYXRlRGF0YSh1c2VyKSB7CiAgICAgIHZhciBfdXNlciRyb2xlJHNldHRpbmdzID0gdXNlci5yb2xlLnNldHRpbmdzLAogICAgICAgICAgY29tbWlzc2lvbiA9IF91c2VyJHJvbGUkc2V0dGluZ3MuY29tbWlzc2lvbiwKICAgICAgICAgIHdpdGhkcmF3RXJyb3JNZXNzYWdlID0gX3VzZXIkcm9sZSRzZXR0aW5ncy53aXRoZHJhd0Vycm9yTWVzc2FnZSwKICAgICAgICAgIHdpdGhkcmF3RW1haWxFcnJvck1lc3NhZ2UgPSBfdXNlciRyb2xlJHNldHRpbmdzLndpdGhkcmF3RW1haWxFcnJvck1lc3NhZ2UsCiAgICAgICAgICB3aXRoZHJhd0VtYWlsQ29uZmlybWF0aW9uID0gX3VzZXIkcm9sZSRzZXR0aW5ncy53aXRoZHJhd0VtYWlsQ29uZmlybWF0aW9uOwogICAgICB0aGlzLmNvbW1pc3Npb24gPSBjb21taXNzaW9uOwogICAgICB0aGlzLmRlcG9zaXRFcnJvck1lc3NhZ2UgPSB3aXRoZHJhd0Vycm9yTWVzc2FnZTsKICAgICAgdGhpcy53aXRoZHJhd0Vycm9yTWVzc2FnZSA9IHdpdGhkcmF3RW1haWxFcnJvck1lc3NhZ2U7CiAgICAgIHRoaXMucmVxdWlyZUNvbmZpcm1hdGlvbiA9IHdpdGhkcmF3RW1haWxDb25maXJtYXRpb247CiAgICB9LAogICAgaGFuZGxlU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlU3VjY2VzcyhyZXNwb25zZSkgewogICAgICB0aGlzLnNob3dUb2FzdChyZXNwb25zZS5tZXNzYWdlLCB7CiAgICAgICAgaWNvbjogJ2ZhLWNoZWNrJywKICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1jZW50ZXInLAogICAgICAgIGR1cmF0aW9uOiA0MDAwLAogICAgICAgIHR5cGU6ICdwcmltYXJ5JwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVFcnJvcjogZnVuY3Rpb24gaGFuZGxlRXJyb3IocmVzcG9uc2UpIHsKICAgICAgdGhpcy5zaG93VG9hc3QoJ09wZXJhdGlvbiBjYW5jZWxlZC4gJyArIHJlc3BvbnNlLm1lc3NhZ2UgKyAnLicsIHsKICAgICAgICBpY29uOiAnZmEtdGltZXMnLAogICAgICAgIHBvc2l0aW9uOiAnYm90dG9tLWNlbnRlcicsCiAgICAgICAgZHVyYXRpb246IDQwMDAsCiAgICAgICAgdHlwZTogJ3ByaW1hcnknCiAgICAgIH0pOwogICAgfSwKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB2YXIgc2V0dGluZ3MgPSB0aGlzLnVzZXIucm9sZS5zZXR0aW5nczsKICAgICAgdmFyIHBlbmRpbmcgPSBbXTsKCiAgICAgIGlmICh0aGlzLmNvbW1pc3Npb24gIT0gc2V0dGluZ3MuY29tbWlzc2lvbikgewogICAgICAgIHBlbmRpbmcucHVzaChTZXR0aW5ncy5zZXRDb21taXNzaW9uKHRoaXMuY29tbWlzc2lvbikpOwogICAgICB9CgogICAgICBpZiAodGhpcy5kZXBvc2l0RXJyb3JNZXNzYWdlICE9IHNldHRpbmdzLmRlcG9zaXRFcnJvck1lc3NhZ2UpIHsKICAgICAgICBwZW5kaW5nLnB1c2goU2V0dGluZ3Muc2V0Q3VzdG9tRGVwb3NpdEVycm9yKHRoaXMuZGVwb3NpdEVycm9yTWVzc2FnZSkpOwogICAgICB9CgogICAgICBpZiAodGhpcy53aXRoZHJhd0Vycm9yTWVzc2FnZSAhPSBzZXR0aW5ncy53aXRoZHJhd0Vycm9yTWVzc2FnZSkgewogICAgICAgIHBlbmRpbmcucHVzaChTZXR0aW5ncy5zZXRDdXN0b21XaXRoZHJhd0Vycm9yKHRoaXMud2l0aGRyYXdFcnJvck1lc3NhZ2UpKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucmVxdWlyZUNvbmZpcm1hdGlvbiAhPSBzZXR0aW5ncy53aXRoZHJhd0VtYWlsQ29uZmlybWF0aW9uKSB7CiAgICAgICAgcGVuZGluZy5wdXNoKFNldHRpbmdzLnJlcXVpcmVDb25maXJtYXRpb25FbWFpbCh0aGlzLnJlcXVpcmVDb25maXJtYXRpb24pKTsKICAgICAgfQoKICAgICAgUHJvbWlzZS5hbGwocGVuZGluZykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICBpZiAoIXJlc3VsdC5sZW5ndGgpIHsKICAgICAgICAgIF90aGlzLmhhbmRsZVN1Y2Nlc3MoewogICAgICAgICAgICBtZXNzYWdlOiAiWW91J3ZlIHN1Y2Nlc3NmdWxseSBjaGFuZ2VkIG5vdGhpbmchIgogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLmNvbW1pc3Npb24gPSArX3RoaXMuY29tbWlzc2lvbjsKICAgICAgICAgIHNldHRpbmdzLmNvbW1pc3Npb24gPSArX3RoaXMuY29tbWlzc2lvbjsKICAgICAgICAgIHNldHRpbmdzLmRlcG9zaXRFcnJvck1lc3NhZ2UgPSBfdGhpcy5kZXBvc2l0RXJyb3JNZXNzYWdlOwogICAgICAgICAgc2V0dGluZ3Mud2l0aGRyYXdFcnJvck1lc3NhZ2UgPSBfdGhpcy53aXRoZHJhd0Vycm9yTWVzc2FnZTsKICAgICAgICAgIHNldHRpbmdzLndpdGhkcmF3RW1haWxDb25maXJtYXRpb24gPSBfdGhpcy5yZXF1aXJlQ29uZmlybWF0aW9uOwogICAgICAgICAgcmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIF90aGlzLmhhbmRsZVN1Y2Nlc3MocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKCiAgICAgICAgX3RoaXMudXBkYXRlRGF0YShfdGhpcy51c2VyKTsKCiAgICAgICAgX3RoaXMuaGFuZGxlRXJyb3IoZXJyLnJlc3BvbnNlLmRhdGEpOwogICAgICB9KTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB1c2VyOiAndXBkYXRlRGF0YScKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnVwZGF0ZURhdGEodGhpcy51c2VyKTsKICB9Cn07"},{"version":3,"sources":["CustomWithdrawError.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <va-card :color=\"computedWidgetColor\" :title=\"'Custom withdraw error'\">\r\n    <va-inner-loading :loading=\"loading\">\r\n      <div\r\n        :style=\"{\r\n          opacity: this.loading ? 0.2 : 1,\r\n        }\"\r\n      >\r\n        <va-input\r\n          type=\"textarea\"\r\n          v-model=\"depositErrorMessage\"\r\n          :label=\"$t('settings.withdraw')\"\r\n        />\r\n        <va-input v-model=\"commission\" label=\"Comission percentage\" />\r\n        <va-checkbox\r\n          :label=\"$t('settings.require')\"\r\n          v-model=\"requireConfirmation\"\r\n          :class=\"requireConfirmation ? 'mb-3 mt-3' : 'mt-3'\"\r\n        />\r\n        <va-input\r\n          v-if=\"requireConfirmation\"\r\n          type=\"textarea\"\r\n          v-model=\"withdrawErrorMessage\"\r\n          :label=\"$t('settings.email')\"\r\n        />\r\n        <va-button class=\"mt-3\" @click=\"save\">{{\r\n          $t('settings.save')\r\n        }}</va-button>\r\n      </div>\r\n    </va-inner-loading>\r\n  </va-card>\r\n</template>\r\n\r\n<script>\r\nimport * as Settings from '../../services/Settings'\r\n\r\nexport default {\r\n  name: 'custom-withdraw-error',\r\n  inject: ['user'],\r\n  data: () => ({\r\n    loading: false,\r\n    requireConfirmation: false,\r\n    commission: 0,\r\n    depositErrorMessage: '',\r\n    withdrawErrorMessage: '',\r\n  }),\r\n  computed: {\r\n    computedWidgetColor() {\r\n      return this.$themes.background\r\n    },\r\n  },\r\n  methods: {\r\n    updateData(user) {\r\n      const {\r\n        commission,\r\n        withdrawErrorMessage,\r\n        withdrawEmailErrorMessage,\r\n        withdrawEmailConfirmation,\r\n      } = user.role.settings\r\n\r\n      this.commission = commission\r\n      this.depositErrorMessage = withdrawErrorMessage\r\n      this.withdrawErrorMessage = withdrawEmailErrorMessage\r\n      this.requireConfirmation = withdrawEmailConfirmation\r\n    },\r\n    handleSuccess(response) {\r\n      this.showToast(response.message, {\r\n        icon: 'fa-check',\r\n        position: 'bottom-center',\r\n        duration: 4000,\r\n        type: 'primary',\r\n      })\r\n    },\r\n    handleError(response) {\r\n      this.showToast('Operation canceled. ' + response.message + '.', {\r\n        icon: 'fa-times',\r\n        position: 'bottom-center',\r\n        duration: 4000,\r\n        type: 'primary',\r\n      })\r\n    },\r\n    save() {\r\n      this.loading = true\r\n\r\n      const settings = this.user.role.settings\r\n      var pending = []\r\n\r\n      if (this.commission != settings.commission) {\r\n        pending.push(Settings.setCommission(this.commission))\r\n      }\r\n\r\n      if (this.depositErrorMessage != settings.depositErrorMessage) {\r\n        pending.push(Settings.setCustomDepositError(this.depositErrorMessage))\r\n      }\r\n\r\n      if (this.withdrawErrorMessage != settings.withdrawErrorMessage) {\r\n        pending.push(Settings.setCustomWithdrawError(this.withdrawErrorMessage))\r\n      }\r\n\r\n      if (this.requireConfirmation != settings.withdrawEmailConfirmation) {\r\n        pending.push(\r\n          Settings.requireConfirmationEmail(this.requireConfirmation)\r\n        )\r\n      }\r\n\r\n      Promise.all(pending)\r\n        .then(result => {\r\n          this.loading = false\r\n\r\n          if (!result.length) {\r\n            this.handleSuccess({\r\n              message: \"You've successfully changed nothing!\",\r\n            })\r\n          } else {\r\n            this.commission = +this.commission\r\n\r\n            settings.commission = +this.commission\r\n            settings.depositErrorMessage = this.depositErrorMessage\r\n            settings.withdrawErrorMessage = this.withdrawErrorMessage\r\n            settings.withdrawEmailConfirmation = this.requireConfirmation\r\n\r\n            result.forEach(response => {\r\n              this.handleSuccess(response.data)\r\n            })\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.loading = false\r\n          console.log(err)\r\n          this.updateData(this.user)\r\n\r\n          this.handleError(err.response.data)\r\n        })\r\n    },\r\n  },\r\n  watch: {\r\n    user: 'updateData',\r\n  },\r\n\r\n  mounted() {\r\n    this.updateData(this.user)\r\n  },\r\n}\r\n</script>\r\n\r\n<style></style>\r\n"],"sourceRoot":"src/components/settings"}]}