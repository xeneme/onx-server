{"remainingRequest":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/thread-loader/dist/cjs.js!/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/babel-loader/lib/index.js!/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/vuestic-ui/node_modules/v-tooltip/dist/v-tooltip.esm.js","dependencies":[{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/vuestic-ui/node_modules/v-tooltip/dist/v-tooltip.esm.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmlzLWFycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS5ub3ciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLmJpbmQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZ2xvYmFsLXRoaXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuY3JlYXRlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0aWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtaW50IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycyI7CmltcG9ydCBfdHlwZW9mMiBmcm9tICIvbW50L2QvV29ya2luZ19BcmVhL0RFVi9DVVNUT01FUlMvb255eGlhbi9hZG1pbi9ub2RlX21vZHVsZXMvQHZ1ZS9iYWJlbC1wcmVzZXQtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgUG9wcGVyIGZyb20gJ3BvcHBlci5qcyc7CmltcG9ydCB7IFJlc2l6ZU9ic2VydmVyIH0gZnJvbSAndnVlLXJlc2l6ZSc7CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogIGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiKSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0gZWxzZSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfQoKICByZXR1cm4gX3R5cGVvZihvYmopOwp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZDIodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9Cgp2YXIgU1ZHQW5pbWF0ZWRTdHJpbmcgPSBmdW5jdGlvbiBTVkdBbmltYXRlZFN0cmluZygpIHt9OwoKaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7CiAgU1ZHQW5pbWF0ZWRTdHJpbmcgPSB3aW5kb3cuU1ZHQW5pbWF0ZWRTdHJpbmc7Cn0KCmZ1bmN0aW9uIGNvbnZlcnRUb0FycmF5KHZhbHVlKSB7CiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgIHZhbHVlID0gdmFsdWUuc3BsaXQoJyAnKTsKICB9CgogIHJldHVybiB2YWx1ZTsKfQovKioKICogQWRkIGNsYXNzZXMgdG8gYW4gZWxlbWVudC4KICogVGhpcyBtZXRob2QgY2hlY2tzIHRvIGVuc3VyZSB0aGF0IHRoZSBjbGFzc2VzIGRvbid0IGFscmVhZHkgZXhpc3QgYmVmb3JlIGFkZGluZyB0aGVtLgogKiBJdCB1c2VzIGVsLmNsYXNzTmFtZSByYXRoZXIgdGhhbiBjbGFzc0xpc3QgaW4gb3JkZXIgdG8gYmUgSUUgZnJpZW5kbHkuCiAqIEBwYXJhbSB7b2JqZWN0fSBlbCAtIFRoZSBlbGVtZW50IHRvIGFkZCB0aGUgY2xhc3NlcyB0by4KICogQHBhcmFtIHtjbGFzc2VzfSBzdHJpbmcgLSBMaXN0IG9mIHNwYWNlIHNlcGFyYXRlZCBjbGFzc2VzIHRvIGJlIGFkZGVkIHRvIHRoZSBlbGVtZW50LgogKi8KCgpmdW5jdGlvbiBhZGRDbGFzc2VzKGVsLCBjbGFzc2VzKSB7CiAgdmFyIG5ld0NsYXNzZXMgPSBjb252ZXJ0VG9BcnJheShjbGFzc2VzKTsKICB2YXIgY2xhc3NMaXN0OwoKICBpZiAoZWwuY2xhc3NOYW1lIGluc3RhbmNlb2YgU1ZHQW5pbWF0ZWRTdHJpbmcpIHsKICAgIGNsYXNzTGlzdCA9IGNvbnZlcnRUb0FycmF5KGVsLmNsYXNzTmFtZS5iYXNlVmFsKTsKICB9IGVsc2UgewogICAgY2xhc3NMaXN0ID0gY29udmVydFRvQXJyYXkoZWwuY2xhc3NOYW1lKTsKICB9CgogIG5ld0NsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAobmV3Q2xhc3MpIHsKICAgIGlmIChjbGFzc0xpc3QuaW5kZXhPZihuZXdDbGFzcykgPT09IC0xKSB7CiAgICAgIGNsYXNzTGlzdC5wdXNoKG5ld0NsYXNzKTsKICAgIH0KICB9KTsKCiAgaWYgKGVsIGluc3RhbmNlb2YgU1ZHRWxlbWVudCkgewogICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNsYXNzTGlzdC5qb2luKCcgJykpOwogIH0gZWxzZSB7CiAgICBlbC5jbGFzc05hbWUgPSBjbGFzc0xpc3Quam9pbignICcpOwogIH0KfQovKioKICogUmVtb3ZlIGNsYXNzZXMgZnJvbSBhbiBlbGVtZW50LgogKiBJdCB1c2VzIGVsLmNsYXNzTmFtZSByYXRoZXIgdGhhbiBjbGFzc0xpc3QgaW4gb3JkZXIgdG8gYmUgSUUgZnJpZW5kbHkuCiAqIEBleHBvcnQKICogQHBhcmFtIHthbnl9IGVsIFRoZSBlbGVtZW50IHRvIHJlbW92ZSB0aGUgY2xhc3NlcyBmcm9tLgogKiBAcGFyYW0ge2FueX0gY2xhc3NlcyBMaXN0IG9mIHNwYWNlIHNlcGFyYXRlZCBjbGFzc2VzIHRvIGJlIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudC4KICovCgoKZnVuY3Rpb24gcmVtb3ZlQ2xhc3NlcyhlbCwgY2xhc3NlcykgewogIHZhciBuZXdDbGFzc2VzID0gY29udmVydFRvQXJyYXkoY2xhc3Nlcyk7CiAgdmFyIGNsYXNzTGlzdDsKCiAgaWYgKGVsLmNsYXNzTmFtZSBpbnN0YW5jZW9mIFNWR0FuaW1hdGVkU3RyaW5nKSB7CiAgICBjbGFzc0xpc3QgPSBjb252ZXJ0VG9BcnJheShlbC5jbGFzc05hbWUuYmFzZVZhbCk7CiAgfSBlbHNlIHsKICAgIGNsYXNzTGlzdCA9IGNvbnZlcnRUb0FycmF5KGVsLmNsYXNzTmFtZSk7CiAgfQoKICBuZXdDbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gKG5ld0NsYXNzKSB7CiAgICB2YXIgaW5kZXggPSBjbGFzc0xpc3QuaW5kZXhPZihuZXdDbGFzcyk7CgogICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICBjbGFzc0xpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0KICB9KTsKCiAgaWYgKGVsIGluc3RhbmNlb2YgU1ZHRWxlbWVudCkgewogICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNsYXNzTGlzdC5qb2luKCcgJykpOwogIH0gZWxzZSB7CiAgICBlbC5jbGFzc05hbWUgPSBjbGFzc0xpc3Quam9pbignICcpOwogIH0KfQoKdmFyIHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlOwoKaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7CiAgc3VwcG9ydHNQYXNzaXZlID0gZmFsc2U7CgogIHRyeSB7CiAgICB2YXIgb3B0cyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHN1cHBvcnRzUGFzc2l2ZSA9IHRydWU7CiAgICAgIH0KICAgIH0pOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRzKTsKICB9IGNhdGNoIChlKSB7fQp9Ci8qKgogKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBsaXN0IGNhY2hlLgogKgogKiBAcHJpdmF0ZQogKiBAbmFtZSBjbGVhcgogKiBAbWVtYmVyT2YgTGlzdENhY2hlCiAqLwoKCmZ1bmN0aW9uIGxpc3RDYWNoZUNsZWFyKCkgewogIHRoaXMuX19kYXRhX18gPSBbXTsKICB0aGlzLnNpemUgPSAwOwp9Cgp2YXIgX2xpc3RDYWNoZUNsZWFyID0gbGlzdENhY2hlQ2xlYXI7Ci8qKgogKiBQZXJmb3JtcyBhCiAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pCiAqIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZSBlcXVpdmFsZW50LgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSA0LjAuMAogKiBAY2F0ZWdvcnkgTGFuZwogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLgogKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTsKICogdmFyIG90aGVyID0geyAnYSc6IDEgfTsKICoKICogXy5lcShvYmplY3QsIG9iamVjdCk7CiAqIC8vID0+IHRydWUKICoKICogXy5lcShvYmplY3QsIG90aGVyKTsKICogLy8gPT4gZmFsc2UKICoKICogXy5lcSgnYScsICdhJyk7CiAqIC8vID0+IHRydWUKICoKICogXy5lcSgnYScsIE9iamVjdCgnYScpKTsKICogLy8gPT4gZmFsc2UKICoKICogXy5lcShOYU4sIE5hTik7CiAqIC8vID0+IHRydWUKICovCgpmdW5jdGlvbiBlcSh2YWx1ZSwgb3RoZXIpIHsKICByZXR1cm4gdmFsdWUgPT09IG90aGVyIHx8IHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7Cn0KCnZhciBlcV8xID0gZXE7Ci8qKgogKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgYGtleWAgaXMgZm91bmQgaW4gYGFycmF5YCBvZiBrZXktdmFsdWUgcGFpcnMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LgogKiBAcGFyYW0geyp9IGtleSBUaGUga2V5IHRvIHNlYXJjaCBmb3IuCiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuCiAqLwoKZnVuY3Rpb24gYXNzb2NJbmRleE9mKGFycmF5LCBrZXkpIHsKICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwoKICB3aGlsZSAobGVuZ3RoLS0pIHsKICAgIGlmIChlcV8xKGFycmF5W2xlbmd0aF1bMF0sIGtleSkpIHsKICAgICAgcmV0dXJuIGxlbmd0aDsKICAgIH0KICB9CgogIHJldHVybiAtMTsKfQoKdmFyIF9hc3NvY0luZGV4T2YgPSBhc3NvY0luZGV4T2Y7Ci8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KCnZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlOwovKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi8KCnZhciBzcGxpY2UgPSBhcnJheVByb3RvLnNwbGljZTsKLyoqCiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBsaXN0IGNhY2hlLgogKgogKiBAcHJpdmF0ZQogKiBAbmFtZSBkZWxldGUKICogQG1lbWJlck9mIExpc3RDYWNoZQogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIGxpc3RDYWNoZURlbGV0ZShrZXkpIHsKICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sCiAgICAgIGluZGV4ID0gX2Fzc29jSW5kZXhPZihkYXRhLCBrZXkpOwoKICBpZiAoaW5kZXggPCAwKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICB2YXIgbGFzdEluZGV4ID0gZGF0YS5sZW5ndGggLSAxOwoKICBpZiAoaW5kZXggPT0gbGFzdEluZGV4KSB7CiAgICBkYXRhLnBvcCgpOwogIH0gZWxzZSB7CiAgICBzcGxpY2UuY2FsbChkYXRhLCBpbmRleCwgMSk7CiAgfQoKICAtLXRoaXMuc2l6ZTsKICByZXR1cm4gdHJ1ZTsKfQoKdmFyIF9saXN0Q2FjaGVEZWxldGUgPSBsaXN0Q2FjaGVEZWxldGU7Ci8qKgogKiBHZXRzIHRoZSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YC4KICoKICogQHByaXZhdGUKICogQG5hbWUgZ2V0CiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGUKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuCiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS4KICovCgpmdW5jdGlvbiBsaXN0Q2FjaGVHZXQoa2V5KSB7CiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLAogICAgICBpbmRleCA9IF9hc3NvY0luZGV4T2YoZGF0YSwga2V5KTsKCiAgcmV0dXJuIGluZGV4IDwgMCA/IHVuZGVmaW5lZCA6IGRhdGFbaW5kZXhdWzFdOwp9Cgp2YXIgX2xpc3RDYWNoZUdldCA9IGxpc3RDYWNoZUdldDsKLyoqCiAqIENoZWNrcyBpZiBhIGxpc3QgY2FjaGUgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy4KICoKICogQHByaXZhdGUKICogQG5hbWUgaGFzCiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGUKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBsaXN0Q2FjaGVIYXMoa2V5KSB7CiAgcmV0dXJuIF9hc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xOwp9Cgp2YXIgX2xpc3RDYWNoZUhhcyA9IGxpc3RDYWNoZUhhczsKLyoqCiAqIFNldHMgdGhlIGxpc3QgY2FjaGUgYGtleWAgdG8gYHZhbHVlYC4KICoKICogQHByaXZhdGUKICogQG5hbWUgc2V0CiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGUKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC4KICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbGlzdCBjYWNoZSBpbnN0YW5jZS4KICovCgpmdW5jdGlvbiBsaXN0Q2FjaGVTZXQoa2V5LCB2YWx1ZSkgewogIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXywKICAgICAgaW5kZXggPSBfYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7CgogIGlmIChpbmRleCA8IDApIHsKICAgICsrdGhpcy5zaXplOwogICAgZGF0YS5wdXNoKFtrZXksIHZhbHVlXSk7CiAgfSBlbHNlIHsKICAgIGRhdGFbaW5kZXhdWzFdID0gdmFsdWU7CiAgfQoKICByZXR1cm4gdGhpczsKfQoKdmFyIF9saXN0Q2FjaGVTZXQgPSBsaXN0Q2FjaGVTZXQ7Ci8qKgogKiBDcmVhdGVzIGFuIGxpc3QgY2FjaGUgb2JqZWN0LgogKgogKiBAcHJpdmF0ZQogKiBAY29uc3RydWN0b3IKICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuCiAqLwoKZnVuY3Rpb24gTGlzdENhY2hlKGVudHJpZXMpIHsKICB2YXIgaW5kZXggPSAtMSwKICAgICAgbGVuZ3RoID0gZW50cmllcyA9PSBudWxsID8gMCA6IGVudHJpZXMubGVuZ3RoOwogIHRoaXMuY2xlYXIoKTsKCiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdOwogICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTsKICB9Cn0gLy8gQWRkIG1ldGhvZHMgdG8gYExpc3RDYWNoZWAuCgoKTGlzdENhY2hlLnByb3RvdHlwZS5jbGVhciA9IF9saXN0Q2FjaGVDbGVhcjsKTGlzdENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBfbGlzdENhY2hlRGVsZXRlOwpMaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IF9saXN0Q2FjaGVHZXQ7Ckxpc3RDYWNoZS5wcm90b3R5cGUuaGFzID0gX2xpc3RDYWNoZUhhczsKTGlzdENhY2hlLnByb3RvdHlwZS5zZXQgPSBfbGlzdENhY2hlU2V0Owp2YXIgX0xpc3RDYWNoZSA9IExpc3RDYWNoZTsKLyoqCiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIHN0YWNrLgogKgogKiBAcHJpdmF0ZQogKiBAbmFtZSBjbGVhcgogKiBAbWVtYmVyT2YgU3RhY2sKICovCgpmdW5jdGlvbiBzdGFja0NsZWFyKCkgewogIHRoaXMuX19kYXRhX18gPSBuZXcgX0xpc3RDYWNoZSgpOwogIHRoaXMuc2l6ZSA9IDA7Cn0KCnZhciBfc3RhY2tDbGVhciA9IHN0YWNrQ2xlYXI7Ci8qKgogKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgc3RhY2suCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIGRlbGV0ZQogKiBAbWVtYmVyT2YgU3RhY2sKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBzdGFja0RlbGV0ZShrZXkpIHsKICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sCiAgICAgIHJlc3VsdCA9IGRhdGFbJ2RlbGV0ZSddKGtleSk7CiAgdGhpcy5zaXplID0gZGF0YS5zaXplOwogIHJldHVybiByZXN1bHQ7Cn0KCnZhciBfc3RhY2tEZWxldGUgPSBzdGFja0RlbGV0ZTsKLyoqCiAqIEdldHMgdGhlIHN0YWNrIHZhbHVlIGZvciBga2V5YC4KICoKICogQHByaXZhdGUKICogQG5hbWUgZ2V0CiAqIEBtZW1iZXJPZiBTdGFjawogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC4KICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLgogKi8KCmZ1bmN0aW9uIHN0YWNrR2V0KGtleSkgewogIHJldHVybiB0aGlzLl9fZGF0YV9fLmdldChrZXkpOwp9Cgp2YXIgX3N0YWNrR2V0ID0gc3RhY2tHZXQ7Ci8qKgogKiBDaGVja3MgaWYgYSBzdGFjayB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLgogKgogKiBAcHJpdmF0ZQogKiBAbmFtZSBoYXMKICogQG1lbWJlck9mIFN0YWNrCiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gc3RhY2tIYXMoa2V5KSB7CiAgcmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKGtleSk7Cn0KCnZhciBfc3RhY2tIYXMgPSBzdGFja0hhczsKdmFyIGNvbW1vbmpzR2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge307CgpmdW5jdGlvbiBjcmVhdGVDb21tb25qc01vZHVsZShmbiwgbW9kdWxlKSB7CiAgcmV0dXJuIG1vZHVsZSA9IHsKICAgIGV4cG9ydHM6IHt9CiAgfSwgZm4obW9kdWxlLCBtb2R1bGUuZXhwb3J0cyksIG1vZHVsZS5leHBvcnRzOwp9Ci8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovCgoKdmFyIGZyZWVHbG9iYWwgPSBfdHlwZW9mMihjb21tb25qc0dsb2JhbCkgPT0gJ29iamVjdCcgJiYgY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgY29tbW9uanNHbG9iYWw7CnZhciBfZnJlZUdsb2JhbCA9IGZyZWVHbG9iYWw7Ci8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovCgp2YXIgZnJlZVNlbGYgPSAodHlwZW9mIHNlbGYgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mMihzZWxmKSkgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7Ci8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqLwoKdmFyIHJvb3QgPSBfZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpOwp2YXIgX3Jvb3QgPSByb290OwovKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi8KCnZhciBTeW1ib2wkMSA9IF9yb290LlN5bWJvbDsKdmFyIF9TeW1ib2wgPSBTeW1ib2wkMTsKLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqLwoKdmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTsKLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovCgp2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTsKLyoqCiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUKICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpCiAqIG9mIHZhbHVlcy4KICovCgp2YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZzsKLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovCgp2YXIgc3ltVG9TdHJpbmdUYWcgPSBfU3ltYm9sID8gX1N5bWJvbC50b1N0cmluZ1RhZyA6IHVuZGVmaW5lZDsKLyoqCiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUdldFRhZ2Agd2hpY2ggaWdub3JlcyBgU3ltYm9sLnRvU3RyaW5nVGFnYCB2YWx1ZXMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LgogKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSByYXcgYHRvU3RyaW5nVGFnYC4KICovCgpmdW5jdGlvbiBnZXRSYXdUYWcodmFsdWUpIHsKICB2YXIgaXNPd24gPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBzeW1Ub1N0cmluZ1RhZyksCiAgICAgIHRhZyA9IHZhbHVlW3N5bVRvU3RyaW5nVGFnXTsKCiAgdHJ5IHsKICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnXSA9IHVuZGVmaW5lZDsKICAgIHZhciB1bm1hc2tlZCA9IHRydWU7CiAgfSBjYXRjaCAoZSkge30KCiAgdmFyIHJlc3VsdCA9IG5hdGl2ZU9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpOwoKICBpZiAodW5tYXNrZWQpIHsKICAgIGlmIChpc093bikgewogICAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ10gPSB0YWc7CiAgICB9IGVsc2UgewogICAgICBkZWxldGUgdmFsdWVbc3ltVG9TdHJpbmdUYWddOwogICAgfQogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfQoKdmFyIF9nZXRSYXdUYWcgPSBnZXRSYXdUYWc7Ci8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KCnZhciBvYmplY3RQcm90byQxID0gT2JqZWN0LnByb3RvdHlwZTsKLyoqCiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUKICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpCiAqIG9mIHZhbHVlcy4KICovCgp2YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmckMSA9IG9iamVjdFByb3RvJDEudG9TdHJpbmc7Ci8qKgogKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIHVzaW5nIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC4KICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgY29udmVydGVkIHN0cmluZy4KICovCgpmdW5jdGlvbiBvYmplY3RUb1N0cmluZyh2YWx1ZSkgewogIHJldHVybiBuYXRpdmVPYmplY3RUb1N0cmluZyQxLmNhbGwodmFsdWUpOwp9Cgp2YXIgX29iamVjdFRvU3RyaW5nID0gb2JqZWN0VG9TdHJpbmc7Ci8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi8KCnZhciBudWxsVGFnID0gJ1tvYmplY3QgTnVsbF0nLAogICAgdW5kZWZpbmVkVGFnID0gJ1tvYmplY3QgVW5kZWZpbmVkXSc7Ci8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqLwoKdmFyIHN5bVRvU3RyaW5nVGFnJDEgPSBfU3ltYm9sID8gX1N5bWJvbC50b1N0cmluZ1RhZyA6IHVuZGVmaW5lZDsKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRUYWdgIHdpdGhvdXQgZmFsbGJhY2tzIGZvciBidWdneSBlbnZpcm9ubWVudHMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LgogKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBgdG9TdHJpbmdUYWdgLgogKi8KCmZ1bmN0aW9uIGJhc2VHZXRUYWcodmFsdWUpIHsKICBpZiAodmFsdWUgPT0gbnVsbCkgewogICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWRUYWcgOiBudWxsVGFnOwogIH0KCiAgcmV0dXJuIHN5bVRvU3RyaW5nVGFnJDEgJiYgc3ltVG9TdHJpbmdUYWckMSBpbiBPYmplY3QodmFsdWUpID8gX2dldFJhd1RhZyh2YWx1ZSkgOiBfb2JqZWN0VG9TdHJpbmcodmFsdWUpOwp9Cgp2YXIgX2Jhc2VHZXRUYWcgPSBiYXNlR2V0VGFnOwovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlCiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcykKICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKQogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSAwLjEuMAogKiBAY2F0ZWdvcnkgTGFuZwogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuCiAqIEBleGFtcGxlCiAqCiAqIF8uaXNPYmplY3Qoe30pOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzT2JqZWN0KF8ubm9vcCk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc09iamVjdChudWxsKTsKICogLy8gPT4gZmFsc2UKICovCgpmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkgewogIHZhciB0eXBlID0gX3R5cGVvZjIodmFsdWUpOwoKICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpOwp9Cgp2YXIgaXNPYmplY3RfMSA9IGlzT2JqZWN0OwovKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovCgp2YXIgYXN5bmNUYWcgPSAnW29iamVjdCBBc3luY0Z1bmN0aW9uXScsCiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJywKICAgIGdlblRhZyA9ICdbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXScsCiAgICBwcm94eVRhZyA9ICdbb2JqZWN0IFByb3h5XSc7Ci8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDAuMS4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuCiAqIEBleGFtcGxlCiAqCiAqIF8uaXNGdW5jdGlvbihfKTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzRnVuY3Rpb24oL2FiYy8pOwogKiAvLyA9PiBmYWxzZQogKi8KCmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHsKICBpZiAoIWlzT2JqZWN0XzEodmFsdWUpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfSAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3IKICAvLyBpbiBTYWZhcmkgOSB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheXMgYW5kIG90aGVyIGNvbnN0cnVjdG9ycy4KCgogIHZhciB0YWcgPSBfYmFzZUdldFRhZyh2YWx1ZSk7CgogIHJldHVybiB0YWcgPT0gZnVuY1RhZyB8fCB0YWcgPT0gZ2VuVGFnIHx8IHRhZyA9PSBhc3luY1RhZyB8fCB0YWcgPT0gcHJveHlUYWc7Cn0KCnZhciBpc0Z1bmN0aW9uXzEgPSBpc0Z1bmN0aW9uOwovKiogVXNlZCB0byBkZXRlY3Qgb3ZlcnJlYWNoaW5nIGNvcmUtanMgc2hpbXMuICovCgp2YXIgY29yZUpzRGF0YSA9IF9yb290WydfX2NvcmUtanNfc2hhcmVkX18nXTsKdmFyIF9jb3JlSnNEYXRhID0gY29yZUpzRGF0YTsKLyoqIFVzZWQgdG8gZGV0ZWN0IG1ldGhvZHMgbWFzcXVlcmFkaW5nIGFzIG5hdGl2ZS4gKi8KCnZhciBtYXNrU3JjS2V5ID0gZnVuY3Rpb24gKCkgewogIHZhciB1aWQgPSAvW14uXSskLy5leGVjKF9jb3JlSnNEYXRhICYmIF9jb3JlSnNEYXRhLmtleXMgJiYgX2NvcmVKc0RhdGEua2V5cy5JRV9QUk9UTyB8fCAnJyk7CiAgcmV0dXJuIHVpZCA/ICdTeW1ib2woc3JjKV8xLicgKyB1aWQgOiAnJzsKfSgpOwovKioKICogQ2hlY2tzIGlmIGBmdW5jYCBoYXMgaXRzIHNvdXJjZSBtYXNrZWQuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGZ1bmNgIGlzIG1hc2tlZCwgZWxzZSBgZmFsc2VgLgogKi8KCgpmdW5jdGlvbiBpc01hc2tlZChmdW5jKSB7CiAgcmV0dXJuICEhbWFza1NyY0tleSAmJiBtYXNrU3JjS2V5IGluIGZ1bmM7Cn0KCnZhciBfaXNNYXNrZWQgPSBpc01hc2tlZDsKLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqLwoKdmFyIGZ1bmNQcm90byA9IEZ1bmN0aW9uLnByb3RvdHlwZTsKLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqLwoKdmFyIGZ1bmNUb1N0cmluZyA9IGZ1bmNQcm90by50b1N0cmluZzsKLyoqCiAqIENvbnZlcnRzIGBmdW5jYCB0byBpdHMgc291cmNlIGNvZGUuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNvbnZlcnQuCiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHNvdXJjZSBjb2RlLgogKi8KCmZ1bmN0aW9uIHRvU291cmNlKGZ1bmMpIHsKICBpZiAoZnVuYyAhPSBudWxsKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gZnVuY1RvU3RyaW5nLmNhbGwoZnVuYyk7CiAgICB9IGNhdGNoIChlKSB7fQoKICAgIHRyeSB7CiAgICAgIHJldHVybiBmdW5jICsgJyc7CiAgICB9IGNhdGNoIChlKSB7fQogIH0KCiAgcmV0dXJuICcnOwp9Cgp2YXIgX3RvU291cmNlID0gdG9Tb3VyY2U7Ci8qKgogKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgCiAqIFtzeW50YXggY2hhcmFjdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcGF0dGVybnMpLgogKi8KCnZhciByZVJlZ0V4cENoYXIgPSAvW1xcXiQuKis/KClbXF17fXxdL2c7Ci8qKiBVc2VkIHRvIGRldGVjdCBob3N0IGNvbnN0cnVjdG9ycyAoU2FmYXJpKS4gKi8KCnZhciByZUlzSG9zdEN0b3IgPSAvXlxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXF0kLzsKLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqLwoKdmFyIGZ1bmNQcm90byQxID0gRnVuY3Rpb24ucHJvdG90eXBlLAogICAgb2JqZWN0UHJvdG8kMiA9IE9iamVjdC5wcm90b3R5cGU7Ci8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi8KCnZhciBmdW5jVG9TdHJpbmckMSA9IGZ1bmNQcm90byQxLnRvU3RyaW5nOwovKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi8KCnZhciBoYXNPd25Qcm9wZXJ0eSQxID0gb2JqZWN0UHJvdG8kMi5oYXNPd25Qcm9wZXJ0eTsKLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi8KCnZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArIGZ1bmNUb1N0cmluZyQxLmNhbGwoaGFzT3duUHJvcGVydHkkMSkucmVwbGFjZShyZVJlZ0V4cENoYXIsICdcXCQmJykucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXCgpfCBmb3IgLis/KD89XFxcXSkvZywgJyQxLio/JykgKyAnJCcpOwovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNOYXRpdmVgIHdpdGhvdXQgYmFkIHNoaW0gY2hlY2tzLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sCiAqICBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gYmFzZUlzTmF0aXZlKHZhbHVlKSB7CiAgaWYgKCFpc09iamVjdF8xKHZhbHVlKSB8fCBfaXNNYXNrZWQodmFsdWUpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICB2YXIgcGF0dGVybiA9IGlzRnVuY3Rpb25fMSh2YWx1ZSkgPyByZUlzTmF0aXZlIDogcmVJc0hvc3RDdG9yOwogIHJldHVybiBwYXR0ZXJuLnRlc3QoX3RvU291cmNlKHZhbHVlKSk7Cn0KCnZhciBfYmFzZUlzTmF0aXZlID0gYmFzZUlzTmF0aXZlOwovKioKICogR2V0cyB0aGUgdmFsdWUgYXQgYGtleWAgb2YgYG9iamVjdGAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LgogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC4KICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlLgogKi8KCmZ1bmN0aW9uIGdldFZhbHVlKG9iamVjdCwga2V5KSB7CiAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07Cn0KCnZhciBfZ2V0VmFsdWUgPSBnZXRWYWx1ZTsKLyoqCiAqIEdldHMgdGhlIG5hdGl2ZSBmdW5jdGlvbiBhdCBga2V5YCBvZiBgb2JqZWN0YC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LgogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGhvZCB0byBnZXQuCiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmdW5jdGlvbiBpZiBpdCdzIG5hdGl2ZSwgZWxzZSBgdW5kZWZpbmVkYC4KICovCgpmdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHsKICB2YXIgdmFsdWUgPSBfZ2V0VmFsdWUob2JqZWN0LCBrZXkpOwoKICByZXR1cm4gX2Jhc2VJc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDsKfQoKdmFyIF9nZXROYXRpdmUgPSBnZXROYXRpdmU7Ci8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi8KCnZhciBNYXAgPSBfZ2V0TmF0aXZlKF9yb290LCAnTWFwJyk7Cgp2YXIgX01hcCA9IE1hcDsKLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqLwoKdmFyIG5hdGl2ZUNyZWF0ZSA9IF9nZXROYXRpdmUoT2JqZWN0LCAnY3JlYXRlJyk7Cgp2YXIgX25hdGl2ZUNyZWF0ZSA9IG5hdGl2ZUNyZWF0ZTsKLyoqCiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGhhc2guCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIGNsZWFyCiAqIEBtZW1iZXJPZiBIYXNoCiAqLwoKZnVuY3Rpb24gaGFzaENsZWFyKCkgewogIHRoaXMuX19kYXRhX18gPSBfbmF0aXZlQ3JlYXRlID8gX25hdGl2ZUNyZWF0ZShudWxsKSA6IHt9OwogIHRoaXMuc2l6ZSA9IDA7Cn0KCnZhciBfaGFzaENsZWFyID0gaGFzaENsZWFyOwovKioKICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGhhc2guCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIGRlbGV0ZQogKiBAbWVtYmVyT2YgSGFzaAogKiBAcGFyYW0ge09iamVjdH0gaGFzaCBUaGUgaGFzaCB0byBtb2RpZnkuCiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gaGFzaERlbGV0ZShrZXkpIHsKICB2YXIgcmVzdWx0ID0gdGhpcy5oYXMoa2V5KSAmJiBkZWxldGUgdGhpcy5fX2RhdGFfX1trZXldOwogIHRoaXMuc2l6ZSAtPSByZXN1bHQgPyAxIDogMDsKICByZXR1cm4gcmVzdWx0Owp9Cgp2YXIgX2hhc2hEZWxldGUgPSBoYXNoRGVsZXRlOwovKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovCgp2YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7Ci8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KCnZhciBvYmplY3RQcm90byQzID0gT2JqZWN0LnByb3RvdHlwZTsKLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovCgp2YXIgaGFzT3duUHJvcGVydHkkMiA9IG9iamVjdFByb3RvJDMuaGFzT3duUHJvcGVydHk7Ci8qKgogKiBHZXRzIHRoZSBoYXNoIHZhbHVlIGZvciBga2V5YC4KICoKICogQHByaXZhdGUKICogQG5hbWUgZ2V0CiAqIEBtZW1iZXJPZiBIYXNoCiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LgogKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuCiAqLwoKZnVuY3Rpb24gaGFzaEdldChrZXkpIHsKICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187CgogIGlmIChfbmF0aXZlQ3JlYXRlKSB7CiAgICB2YXIgcmVzdWx0ID0gZGF0YVtrZXldOwogICAgcmV0dXJuIHJlc3VsdCA9PT0gSEFTSF9VTkRFRklORUQgPyB1bmRlZmluZWQgOiByZXN1bHQ7CiAgfQoKICByZXR1cm4gaGFzT3duUHJvcGVydHkkMi5jYWxsKGRhdGEsIGtleSkgPyBkYXRhW2tleV0gOiB1bmRlZmluZWQ7Cn0KCnZhciBfaGFzaEdldCA9IGhhc2hHZXQ7Ci8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KCnZhciBvYmplY3RQcm90byQ0ID0gT2JqZWN0LnByb3RvdHlwZTsKLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovCgp2YXIgaGFzT3duUHJvcGVydHkkMyA9IG9iamVjdFByb3RvJDQuaGFzT3duUHJvcGVydHk7Ci8qKgogKiBDaGVja3MgaWYgYSBoYXNoIHZhbHVlIGZvciBga2V5YCBleGlzdHMuCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIGhhcwogKiBAbWVtYmVyT2YgSGFzaAogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIGhhc2hIYXMoa2V5KSB7CiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fOwogIHJldHVybiBfbmF0aXZlQ3JlYXRlID8gZGF0YVtrZXldICE9PSB1bmRlZmluZWQgOiBoYXNPd25Qcm9wZXJ0eSQzLmNhbGwoZGF0YSwga2V5KTsKfQoKdmFyIF9oYXNoSGFzID0gaGFzaEhhczsKLyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqLwoKdmFyIEhBU0hfVU5ERUZJTkVEJDEgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7Ci8qKgogKiBTZXRzIHRoZSBoYXNoIGBrZXlgIHRvIGB2YWx1ZWAuCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIHNldAogKiBAbWVtYmVyT2YgSGFzaAogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC4KICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LgogKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBoYXNoIGluc3RhbmNlLgogKi8KCmZ1bmN0aW9uIGhhc2hTZXQoa2V5LCB2YWx1ZSkgewogIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXzsKICB0aGlzLnNpemUgKz0gdGhpcy5oYXMoa2V5KSA/IDAgOiAxOwogIGRhdGFba2V5XSA9IF9uYXRpdmVDcmVhdGUgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCA/IEhBU0hfVU5ERUZJTkVEJDEgOiB2YWx1ZTsKICByZXR1cm4gdGhpczsKfQoKdmFyIF9oYXNoU2V0ID0gaGFzaFNldDsKLyoqCiAqIENyZWF0ZXMgYSBoYXNoIG9iamVjdC4KICoKICogQHByaXZhdGUKICogQGNvbnN0cnVjdG9yCiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLgogKi8KCmZ1bmN0aW9uIEhhc2goZW50cmllcykgewogIHZhciBpbmRleCA9IC0xLAogICAgICBsZW5ndGggPSBlbnRyaWVzID09IG51bGwgPyAwIDogZW50cmllcy5sZW5ndGg7CiAgdGhpcy5jbGVhcigpOwoKICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkgewogICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07CiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pOwogIH0KfSAvLyBBZGQgbWV0aG9kcyB0byBgSGFzaGAuCgoKSGFzaC5wcm90b3R5cGUuY2xlYXIgPSBfaGFzaENsZWFyOwpIYXNoLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBfaGFzaERlbGV0ZTsKSGFzaC5wcm90b3R5cGUuZ2V0ID0gX2hhc2hHZXQ7Ckhhc2gucHJvdG90eXBlLmhhcyA9IF9oYXNoSGFzOwpIYXNoLnByb3RvdHlwZS5zZXQgPSBfaGFzaFNldDsKdmFyIF9IYXNoID0gSGFzaDsKLyoqCiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIG1hcC4KICoKICogQHByaXZhdGUKICogQG5hbWUgY2xlYXIKICogQG1lbWJlck9mIE1hcENhY2hlCiAqLwoKZnVuY3Rpb24gbWFwQ2FjaGVDbGVhcigpIHsKICB0aGlzLnNpemUgPSAwOwogIHRoaXMuX19kYXRhX18gPSB7CiAgICAnaGFzaCc6IG5ldyBfSGFzaCgpLAogICAgJ21hcCc6IG5ldyAoX01hcCB8fCBfTGlzdENhY2hlKSgpLAogICAgJ3N0cmluZyc6IG5ldyBfSGFzaCgpCiAgfTsKfQoKdmFyIF9tYXBDYWNoZUNsZWFyID0gbWFwQ2FjaGVDbGVhcjsKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciB1c2UgYXMgdW5pcXVlIG9iamVjdCBrZXkuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSwgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIGlzS2V5YWJsZSh2YWx1ZSkgewogIHZhciB0eXBlID0gX3R5cGVvZjIodmFsdWUpOwoKICByZXR1cm4gdHlwZSA9PSAnc3RyaW5nJyB8fCB0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N5bWJvbCcgfHwgdHlwZSA9PSAnYm9vbGVhbicgPyB2YWx1ZSAhPT0gJ19fcHJvdG9fXycgOiB2YWx1ZSA9PT0gbnVsbDsKfQoKdmFyIF9pc0tleWFibGUgPSBpc0tleWFibGU7Ci8qKgogKiBHZXRzIHRoZSBkYXRhIGZvciBgbWFwYC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIHF1ZXJ5LgogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSByZWZlcmVuY2Uga2V5LgogKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWFwIGRhdGEuCiAqLwoKZnVuY3Rpb24gZ2V0TWFwRGF0YShtYXAsIGtleSkgewogIHZhciBkYXRhID0gbWFwLl9fZGF0YV9fOwogIHJldHVybiBfaXNLZXlhYmxlKGtleSkgPyBkYXRhW3R5cGVvZiBrZXkgPT0gJ3N0cmluZycgPyAnc3RyaW5nJyA6ICdoYXNoJ10gOiBkYXRhLm1hcDsKfQoKdmFyIF9nZXRNYXBEYXRhID0gZ2V0TWFwRGF0YTsKLyoqCiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBtYXAuCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIGRlbGV0ZQogKiBAbWVtYmVyT2YgTWFwQ2FjaGUKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBtYXBDYWNoZURlbGV0ZShrZXkpIHsKICB2YXIgcmVzdWx0ID0gX2dldE1hcERhdGEodGhpcywga2V5KVsnZGVsZXRlJ10oa2V5KTsKCiAgdGhpcy5zaXplIC09IHJlc3VsdCA/IDEgOiAwOwogIHJldHVybiByZXN1bHQ7Cn0KCnZhciBfbWFwQ2FjaGVEZWxldGUgPSBtYXBDYWNoZURlbGV0ZTsKLyoqCiAqIEdldHMgdGhlIG1hcCB2YWx1ZSBmb3IgYGtleWAuCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIGdldAogKiBAbWVtYmVyT2YgTWFwQ2FjaGUKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuCiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS4KICovCgpmdW5jdGlvbiBtYXBDYWNoZUdldChrZXkpIHsKICByZXR1cm4gX2dldE1hcERhdGEodGhpcywga2V5KS5nZXQoa2V5KTsKfQoKdmFyIF9tYXBDYWNoZUdldCA9IG1hcENhY2hlR2V0OwovKioKICogQ2hlY2tzIGlmIGEgbWFwIHZhbHVlIGZvciBga2V5YCBleGlzdHMuCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIGhhcwogKiBAbWVtYmVyT2YgTWFwQ2FjaGUKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBtYXBDYWNoZUhhcyhrZXkpIHsKICByZXR1cm4gX2dldE1hcERhdGEodGhpcywga2V5KS5oYXMoa2V5KTsKfQoKdmFyIF9tYXBDYWNoZUhhcyA9IG1hcENhY2hlSGFzOwovKioKICogU2V0cyB0aGUgbWFwIGBrZXlgIHRvIGB2YWx1ZWAuCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIHNldAogKiBAbWVtYmVyT2YgTWFwQ2FjaGUKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC4KICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbWFwIGNhY2hlIGluc3RhbmNlLgogKi8KCmZ1bmN0aW9uIG1hcENhY2hlU2V0KGtleSwgdmFsdWUpIHsKICB2YXIgZGF0YSA9IF9nZXRNYXBEYXRhKHRoaXMsIGtleSksCiAgICAgIHNpemUgPSBkYXRhLnNpemU7CgogIGRhdGEuc2V0KGtleSwgdmFsdWUpOwogIHRoaXMuc2l6ZSArPSBkYXRhLnNpemUgPT0gc2l6ZSA/IDAgOiAxOwogIHJldHVybiB0aGlzOwp9Cgp2YXIgX21hcENhY2hlU2V0ID0gbWFwQ2FjaGVTZXQ7Ci8qKgogKiBDcmVhdGVzIGEgbWFwIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuCiAqCiAqIEBwcml2YXRlCiAqIEBjb25zdHJ1Y3RvcgogKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS4KICovCgpmdW5jdGlvbiBNYXBDYWNoZShlbnRyaWVzKSB7CiAgdmFyIGluZGV4ID0gLTEsCiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPT0gbnVsbCA/IDAgOiBlbnRyaWVzLmxlbmd0aDsKICB0aGlzLmNsZWFyKCk7CgogIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7CiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTsKICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7CiAgfQp9IC8vIEFkZCBtZXRob2RzIHRvIGBNYXBDYWNoZWAuCgoKTWFwQ2FjaGUucHJvdG90eXBlLmNsZWFyID0gX21hcENhY2hlQ2xlYXI7Ck1hcENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBfbWFwQ2FjaGVEZWxldGU7Ck1hcENhY2hlLnByb3RvdHlwZS5nZXQgPSBfbWFwQ2FjaGVHZXQ7Ck1hcENhY2hlLnByb3RvdHlwZS5oYXMgPSBfbWFwQ2FjaGVIYXM7Ck1hcENhY2hlLnByb3RvdHlwZS5zZXQgPSBfbWFwQ2FjaGVTZXQ7CnZhciBfTWFwQ2FjaGUgPSBNYXBDYWNoZTsKLyoqIFVzZWQgYXMgdGhlIHNpemUgdG8gZW5hYmxlIGxhcmdlIGFycmF5IG9wdGltaXphdGlvbnMuICovCgp2YXIgTEFSR0VfQVJSQVlfU0laRSA9IDIwMDsKLyoqCiAqIFNldHMgdGhlIHN0YWNrIGBrZXlgIHRvIGB2YWx1ZWAuCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIHNldAogKiBAbWVtYmVyT2YgU3RhY2sKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC4KICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgc3RhY2sgY2FjaGUgaW5zdGFuY2UuCiAqLwoKZnVuY3Rpb24gc3RhY2tTZXQoa2V5LCB2YWx1ZSkgewogIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXzsKCiAgaWYgKGRhdGEgaW5zdGFuY2VvZiBfTGlzdENhY2hlKSB7CiAgICB2YXIgcGFpcnMgPSBkYXRhLl9fZGF0YV9fOwoKICAgIGlmICghX01hcCB8fCBwYWlycy5sZW5ndGggPCBMQVJHRV9BUlJBWV9TSVpFIC0gMSkgewogICAgICBwYWlycy5wdXNoKFtrZXksIHZhbHVlXSk7CiAgICAgIHRoaXMuc2l6ZSA9ICsrZGF0YS5zaXplOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBkYXRhID0gdGhpcy5fX2RhdGFfXyA9IG5ldyBfTWFwQ2FjaGUocGFpcnMpOwogIH0KCiAgZGF0YS5zZXQoa2V5LCB2YWx1ZSk7CiAgdGhpcy5zaXplID0gZGF0YS5zaXplOwogIHJldHVybiB0aGlzOwp9Cgp2YXIgX3N0YWNrU2V0ID0gc3RhY2tTZXQ7Ci8qKgogKiBDcmVhdGVzIGEgc3RhY2sgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy4KICoKICogQHByaXZhdGUKICogQGNvbnN0cnVjdG9yCiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLgogKi8KCmZ1bmN0aW9uIFN0YWNrKGVudHJpZXMpIHsKICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18gPSBuZXcgX0xpc3RDYWNoZShlbnRyaWVzKTsKICB0aGlzLnNpemUgPSBkYXRhLnNpemU7Cn0gLy8gQWRkIG1ldGhvZHMgdG8gYFN0YWNrYC4KCgpTdGFjay5wcm90b3R5cGUuY2xlYXIgPSBfc3RhY2tDbGVhcjsKU3RhY2sucHJvdG90eXBlWydkZWxldGUnXSA9IF9zdGFja0RlbGV0ZTsKU3RhY2sucHJvdG90eXBlLmdldCA9IF9zdGFja0dldDsKU3RhY2sucHJvdG90eXBlLmhhcyA9IF9zdGFja0hhczsKU3RhY2sucHJvdG90eXBlLnNldCA9IF9zdGFja1NldDsKdmFyIF9TdGFjayA9IFN0YWNrOwovKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovCgp2YXIgSEFTSF9VTkRFRklORUQkMiA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJzsKLyoqCiAqIEFkZHMgYHZhbHVlYCB0byB0aGUgYXJyYXkgY2FjaGUuCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIGFkZAogKiBAbWVtYmVyT2YgU2V0Q2FjaGUKICogQGFsaWFzIHB1c2gKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2FjaGUuCiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNhY2hlIGluc3RhbmNlLgogKi8KCmZ1bmN0aW9uIHNldENhY2hlQWRkKHZhbHVlKSB7CiAgdGhpcy5fX2RhdGFfXy5zZXQodmFsdWUsIEhBU0hfVU5ERUZJTkVEJDIpOwoKICByZXR1cm4gdGhpczsKfQoKdmFyIF9zZXRDYWNoZUFkZCA9IHNldENhY2hlQWRkOwovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgaW4gdGhlIGFycmF5IGNhY2hlLgogKgogKiBAcHJpdmF0ZQogKiBAbmFtZSBoYXMKICogQG1lbWJlck9mIFNldENhY2hlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuCiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgZm91bmQsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBzZXRDYWNoZUhhcyh2YWx1ZSkgewogIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh2YWx1ZSk7Cn0KCnZhciBfc2V0Q2FjaGVIYXMgPSBzZXRDYWNoZUhhczsKLyoqCiAqCiAqIENyZWF0ZXMgYW4gYXJyYXkgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIHVuaXF1ZSB2YWx1ZXMuCiAqCiAqIEBwcml2YXRlCiAqIEBjb25zdHJ1Y3RvcgogKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGNhY2hlLgogKi8KCmZ1bmN0aW9uIFNldENhY2hlKHZhbHVlcykgewogIHZhciBpbmRleCA9IC0xLAogICAgICBsZW5ndGggPSB2YWx1ZXMgPT0gbnVsbCA/IDAgOiB2YWx1ZXMubGVuZ3RoOwogIHRoaXMuX19kYXRhX18gPSBuZXcgX01hcENhY2hlKCk7CgogIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7CiAgICB0aGlzLmFkZCh2YWx1ZXNbaW5kZXhdKTsKICB9Cn0gLy8gQWRkIG1ldGhvZHMgdG8gYFNldENhY2hlYC4KCgpTZXRDYWNoZS5wcm90b3R5cGUuYWRkID0gU2V0Q2FjaGUucHJvdG90eXBlLnB1c2ggPSBfc2V0Q2FjaGVBZGQ7ClNldENhY2hlLnByb3RvdHlwZS5oYXMgPSBfc2V0Q2FjaGVIYXM7CnZhciBfU2V0Q2FjaGUgPSBTZXRDYWNoZTsKLyoqCiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5zb21lYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUKICogc2hvcnRoYW5kcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLAogKiAgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIGFycmF5U29tZShhcnJheSwgcHJlZGljYXRlKSB7CiAgdmFyIGluZGV4ID0gLTEsCiAgICAgIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoOwoKICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkgewogICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfQoKICByZXR1cm4gZmFsc2U7Cn0KCnZhciBfYXJyYXlTb21lID0gYXJyYXlTb21lOwovKioKICogQ2hlY2tzIGlmIGEgYGNhY2hlYCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gY2FjaGUgVGhlIGNhY2hlIHRvIHF1ZXJ5LgogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIGNhY2hlSGFzKGNhY2hlLCBrZXkpIHsKICByZXR1cm4gY2FjaGUuaGFzKGtleSk7Cn0KCnZhciBfY2FjaGVIYXMgPSBjYWNoZUhhczsKLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgdmFsdWUgY29tcGFyaXNvbnMuICovCgp2YXIgQ09NUEFSRV9QQVJUSUFMX0ZMQUcgPSAxLAogICAgQ09NUEFSRV9VTk9SREVSRURfRkxBRyA9IDI7Ci8qKgogKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGFycmF5cyB3aXRoIHN1cHBvcnQgZm9yCiAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhcmUuCiAqIEBwYXJhbSB7QXJyYXl9IG90aGVyIFRoZSBvdGhlciBhcnJheSB0byBjb21wYXJlLgogKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGAgZm9yIG1vcmUgZGV0YWlscy4KICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuCiAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBhcnJheWAgYW5kIGBvdGhlcmAgb2JqZWN0cy4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcnJheXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHsKICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIENPTVBBUkVfUEFSVElBTF9GTEFHLAogICAgICBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsCiAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDsKCiAgaWYgKGFyckxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIShpc1BhcnRpYWwgJiYgb3RoTGVuZ3RoID4gYXJyTGVuZ3RoKSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0gLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLgoKCiAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQoYXJyYXkpOwoKICBpZiAoc3RhY2tlZCAmJiBzdGFjay5nZXQob3RoZXIpKSB7CiAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjsKICB9CgogIHZhciBpbmRleCA9IC0xLAogICAgICByZXN1bHQgPSB0cnVlLAogICAgICBzZWVuID0gYml0bWFzayAmIENPTVBBUkVfVU5PUkRFUkVEX0ZMQUcgPyBuZXcgX1NldENhY2hlKCkgOiB1bmRlZmluZWQ7CiAgc3RhY2suc2V0KGFycmF5LCBvdGhlcik7CiAgc3RhY2suc2V0KG90aGVyLCBhcnJheSk7IC8vIElnbm9yZSBub24taW5kZXggcHJvcGVydGllcy4KCiAgd2hpbGUgKCsraW5kZXggPCBhcnJMZW5ndGgpIHsKICAgIHZhciBhcnJWYWx1ZSA9IGFycmF5W2luZGV4XSwKICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2luZGV4XTsKCiAgICBpZiAoY3VzdG9taXplcikgewogICAgICB2YXIgY29tcGFyZWQgPSBpc1BhcnRpYWwgPyBjdXN0b21pemVyKG90aFZhbHVlLCBhcnJWYWx1ZSwgaW5kZXgsIG90aGVyLCBhcnJheSwgc3RhY2spIDogY3VzdG9taXplcihhcnJWYWx1ZSwgb3RoVmFsdWUsIGluZGV4LCBhcnJheSwgb3RoZXIsIHN0YWNrKTsKICAgIH0KCiAgICBpZiAoY29tcGFyZWQgIT09IHVuZGVmaW5lZCkgewogICAgICBpZiAoY29tcGFyZWQpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgcmVzdWx0ID0gZmFsc2U7CiAgICAgIGJyZWFrOwogICAgfSAvLyBSZWN1cnNpdmVseSBjb21wYXJlIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLgoKCiAgICBpZiAoc2VlbikgewogICAgICBpZiAoIV9hcnJheVNvbWUob3RoZXIsIGZ1bmN0aW9uIChvdGhWYWx1ZSwgb3RoSW5kZXgpIHsKICAgICAgICBpZiAoIV9jYWNoZUhhcyhzZWVuLCBvdGhJbmRleCkgJiYgKGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjaykpKSB7CiAgICAgICAgICByZXR1cm4gc2Vlbi5wdXNoKG90aEluZGV4KTsKICAgICAgICB9CiAgICAgIH0pKSB7CiAgICAgICAgcmVzdWx0ID0gZmFsc2U7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoIShhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgYml0bWFzaywgY3VzdG9taXplciwgc3RhY2spKSkgewogICAgICByZXN1bHQgPSBmYWxzZTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICBzdGFja1snZGVsZXRlJ10oYXJyYXkpOwogIHN0YWNrWydkZWxldGUnXShvdGhlcik7CiAgcmV0dXJuIHJlc3VsdDsKfQoKdmFyIF9lcXVhbEFycmF5cyA9IGVxdWFsQXJyYXlzOwovKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi8KCnZhciBVaW50OEFycmF5ID0gX3Jvb3QuVWludDhBcnJheTsKdmFyIF9VaW50OEFycmF5ID0gVWludDhBcnJheTsKLyoqCiAqIENvbnZlcnRzIGBtYXBgIHRvIGl0cyBrZXktdmFsdWUgcGFpcnMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSBtYXAgVGhlIG1hcCB0byBjb252ZXJ0LgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGtleS12YWx1ZSBwYWlycy4KICovCgpmdW5jdGlvbiBtYXBUb0FycmF5KG1hcCkgewogIHZhciBpbmRleCA9IC0xLAogICAgICByZXN1bHQgPSBBcnJheShtYXAuc2l6ZSk7CiAgbWFwLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHsKICAgIHJlc3VsdFsrK2luZGV4XSA9IFtrZXksIHZhbHVlXTsKICB9KTsKICByZXR1cm4gcmVzdWx0Owp9Cgp2YXIgX21hcFRvQXJyYXkgPSBtYXBUb0FycmF5OwovKioKICogQ29udmVydHMgYHNldGAgdG8gYW4gYXJyYXkgb2YgaXRzIHZhbHVlcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IHNldCBUaGUgc2V0IHRvIGNvbnZlcnQuCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgdmFsdWVzLgogKi8KCmZ1bmN0aW9uIHNldFRvQXJyYXkoc2V0KSB7CiAgdmFyIGluZGV4ID0gLTEsCiAgICAgIHJlc3VsdCA9IEFycmF5KHNldC5zaXplKTsKICBzZXQuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgIHJlc3VsdFsrK2luZGV4XSA9IHZhbHVlOwogIH0pOwogIHJldHVybiByZXN1bHQ7Cn0KCnZhciBfc2V0VG9BcnJheSA9IHNldFRvQXJyYXk7Ci8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIHZhbHVlIGNvbXBhcmlzb25zLiAqLwoKdmFyIENPTVBBUkVfUEFSVElBTF9GTEFHJDEgPSAxLAogICAgQ09NUEFSRV9VTk9SREVSRURfRkxBRyQxID0gMjsKLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqLwoKdmFyIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsCiAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLAogICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLAogICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsCiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJywKICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLAogICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsCiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJywKICAgIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nOwp2YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLAogICAgZGF0YVZpZXdUYWcgPSAnW29iamVjdCBEYXRhVmlld10nOwovKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi8KCnZhciBzeW1ib2xQcm90byA9IF9TeW1ib2wgPyBfU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCwKICAgIHN5bWJvbFZhbHVlT2YgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnZhbHVlT2YgOiB1bmRlZmluZWQ7Ci8qKgogKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGNvbXBhcmluZyBvYmplY3RzIG9mCiAqIHRoZSBzYW1lIGB0b1N0cmluZ1RhZ2AuCiAqCiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY29tcGFyaW5nIHZhbHVlcyB3aXRoIHRhZ3Mgb2YKICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLgogKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLgogKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuCiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYCBmb3IgbW9yZSBkZXRhaWxzLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy4KICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCB0YWcsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHsKICBzd2l0Y2ggKHRhZykgewogICAgY2FzZSBkYXRhVmlld1RhZzoKICAgICAgaWYgKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGggfHwgb2JqZWN0LmJ5dGVPZmZzZXQgIT0gb3RoZXIuYnl0ZU9mZnNldCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgb2JqZWN0ID0gb2JqZWN0LmJ1ZmZlcjsKICAgICAgb3RoZXIgPSBvdGhlci5idWZmZXI7CgogICAgY2FzZSBhcnJheUJ1ZmZlclRhZzoKICAgICAgaWYgKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGggfHwgIWVxdWFsRnVuYyhuZXcgX1VpbnQ4QXJyYXkob2JqZWN0KSwgbmV3IF9VaW50OEFycmF5KG90aGVyKSkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwoKICAgIGNhc2UgYm9vbFRhZzoKICAgIGNhc2UgZGF0ZVRhZzoKICAgIGNhc2UgbnVtYmVyVGFnOgogICAgICAvLyBDb2VyY2UgYm9vbGVhbnMgdG8gYDFgIG9yIGAwYCBhbmQgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzLgogICAgICAvLyBJbnZhbGlkIGRhdGVzIGFyZSBjb2VyY2VkIHRvIGBOYU5gLgogICAgICByZXR1cm4gZXFfMSgrb2JqZWN0LCArb3RoZXIpOwoKICAgIGNhc2UgZXJyb3JUYWc6CiAgICAgIHJldHVybiBvYmplY3QubmFtZSA9PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09IG90aGVyLm1lc3NhZ2U7CgogICAgY2FzZSByZWdleHBUYWc6CiAgICBjYXNlIHN0cmluZ1RhZzoKICAgICAgLy8gQ29lcmNlIHJlZ2V4ZXMgdG8gc3RyaW5ncyBhbmQgdHJlYXQgc3RyaW5ncywgcHJpbWl0aXZlcyBhbmQgb2JqZWN0cywKICAgICAgLy8gYXMgZXF1YWwuIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcmVnZXhwLnByb3RvdHlwZS50b3N0cmluZwogICAgICAvLyBmb3IgbW9yZSBkZXRhaWxzLgogICAgICByZXR1cm4gb2JqZWN0ID09IG90aGVyICsgJyc7CgogICAgY2FzZSBtYXBUYWc6CiAgICAgIHZhciBjb252ZXJ0ID0gX21hcFRvQXJyYXk7CgogICAgY2FzZSBzZXRUYWc6CiAgICAgIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgQ09NUEFSRV9QQVJUSUFMX0ZMQUckMTsKICAgICAgY29udmVydCB8fCAoY29udmVydCA9IF9zZXRUb0FycmF5KTsKCiAgICAgIGlmIChvYmplY3Quc2l6ZSAhPSBvdGhlci5zaXplICYmICFpc1BhcnRpYWwpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLgoKCiAgICAgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7CgogICAgICBpZiAoc3RhY2tlZCkgewogICAgICAgIHJldHVybiBzdGFja2VkID09IG90aGVyOwogICAgICB9CgogICAgICBiaXRtYXNrIHw9IENPTVBBUkVfVU5PUkRFUkVEX0ZMQUckMTsgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuCgogICAgICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7CgogICAgICB2YXIgcmVzdWx0ID0gX2VxdWFsQXJyYXlzKGNvbnZlcnQob2JqZWN0KSwgY29udmVydChvdGhlciksIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spOwoKICAgICAgc3RhY2tbJ2RlbGV0ZSddKG9iamVjdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CgogICAgY2FzZSBzeW1ib2xUYWc6CiAgICAgIGlmIChzeW1ib2xWYWx1ZU9mKSB7CiAgICAgICAgcmV0dXJuIHN5bWJvbFZhbHVlT2YuY2FsbChvYmplY3QpID09IHN5bWJvbFZhbHVlT2YuY2FsbChvdGhlcik7CiAgICAgIH0KCiAgfQoKICByZXR1cm4gZmFsc2U7Cn0KCnZhciBfZXF1YWxCeVRhZyA9IGVxdWFsQnlUYWc7Ci8qKgogKiBBcHBlbmRzIHRoZSBlbGVtZW50cyBvZiBgdmFsdWVzYCB0byBgYXJyYXlgLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LgogKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBhcHBlbmQuCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLgogKi8KCmZ1bmN0aW9uIGFycmF5UHVzaChhcnJheSwgdmFsdWVzKSB7CiAgdmFyIGluZGV4ID0gLTEsCiAgICAgIGxlbmd0aCA9IHZhbHVlcy5sZW5ndGgsCiAgICAgIG9mZnNldCA9IGFycmF5Lmxlbmd0aDsKCiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgIGFycmF5W29mZnNldCArIGluZGV4XSA9IHZhbHVlc1tpbmRleF07CiAgfQoKICByZXR1cm4gYXJyYXk7Cn0KCnZhciBfYXJyYXlQdXNoID0gYXJyYXlQdXNoOwovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgQXJyYXlgIG9iamVjdC4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgMC4xLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LCBlbHNlIGBmYWxzZWAuCiAqIEBleGFtcGxlCiAqCiAqIF8uaXNBcnJheShbMSwgMiwgM10pOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNBcnJheShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTsKICogLy8gPT4gZmFsc2UKICoKICogXy5pc0FycmF5KCdhYmMnKTsKICogLy8gPT4gZmFsc2UKICoKICogXy5pc0FycmF5KF8ubm9vcCk7CiAqIC8vID0+IGZhbHNlCiAqLwoKdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5Owp2YXIgaXNBcnJheV8xID0gaXNBcnJheTsKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRBbGxLZXlzYCBhbmQgYGdldEFsbEtleXNJbmAgd2hpY2ggdXNlcwogKiBga2V5c0Z1bmNgIGFuZCBgc3ltYm9sc0Z1bmNgIHRvIGdldCB0aGUgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBhbmQKICogc3ltYm9scyBvZiBgb2JqZWN0YC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlzRnVuYyBUaGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBrZXlzIG9mIGBvYmplY3RgLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBzeW1ib2xzRnVuYyBUaGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBzeW1ib2xzIG9mIGBvYmplY3RgLgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzIGFuZCBzeW1ib2xzLgogKi8KCmZ1bmN0aW9uIGJhc2VHZXRBbGxLZXlzKG9iamVjdCwga2V5c0Z1bmMsIHN5bWJvbHNGdW5jKSB7CiAgdmFyIHJlc3VsdCA9IGtleXNGdW5jKG9iamVjdCk7CiAgcmV0dXJuIGlzQXJyYXlfMShvYmplY3QpID8gcmVzdWx0IDogX2FycmF5UHVzaChyZXN1bHQsIHN5bWJvbHNGdW5jKG9iamVjdCkpOwp9Cgp2YXIgX2Jhc2VHZXRBbGxLZXlzID0gYmFzZUdldEFsbEtleXM7Ci8qKgogKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uZmlsdGVyYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IKICogaXRlcmF0ZWUgc2hvcnRoYW5kcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmlsdGVyZWQgYXJyYXkuCiAqLwoKZnVuY3Rpb24gYXJyYXlGaWx0ZXIoYXJyYXksIHByZWRpY2F0ZSkgewogIHZhciBpbmRleCA9IC0xLAogICAgICBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aCwKICAgICAgcmVzSW5kZXggPSAwLAogICAgICByZXN1bHQgPSBbXTsKCiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTsKCiAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgYXJyYXkpKSB7CiAgICAgIHJlc3VsdFtyZXNJbmRleCsrXSA9IHZhbHVlOwogICAgfQogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfQoKdmFyIF9hcnJheUZpbHRlciA9IGFycmF5RmlsdGVyOwovKioKICogVGhpcyBtZXRob2QgcmV0dXJucyBhIG5ldyBlbXB0eSBhcnJheS4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgNC4xMy4wCiAqIEBjYXRlZ29yeSBVdGlsCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGVtcHR5IGFycmF5LgogKiBAZXhhbXBsZQogKgogKiB2YXIgYXJyYXlzID0gXy50aW1lcygyLCBfLnN0dWJBcnJheSk7CiAqCiAqIGNvbnNvbGUubG9nKGFycmF5cyk7CiAqIC8vID0+IFtbXSwgW11dCiAqCiAqIGNvbnNvbGUubG9nKGFycmF5c1swXSA9PT0gYXJyYXlzWzFdKTsKICogLy8gPT4gZmFsc2UKICovCgpmdW5jdGlvbiBzdHViQXJyYXkoKSB7CiAgcmV0dXJuIFtdOwp9Cgp2YXIgc3R1YkFycmF5XzEgPSBzdHViQXJyYXk7Ci8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KCnZhciBvYmplY3RQcm90byQ1ID0gT2JqZWN0LnByb3RvdHlwZTsKLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovCgp2YXIgcHJvcGVydHlJc0VudW1lcmFibGUgPSBvYmplY3RQcm90byQ1LnByb3BlcnR5SXNFbnVtZXJhYmxlOwovKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovCgp2YXIgbmF0aXZlR2V0U3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7Ci8qKgogKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBzeW1ib2xzIG9mIGBvYmplY3RgLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2Ygc3ltYm9scy4KICovCgp2YXIgZ2V0U3ltYm9scyA9ICFuYXRpdmVHZXRTeW1ib2xzID8gc3R1YkFycmF5XzEgOiBmdW5jdGlvbiAob2JqZWN0KSB7CiAgaWYgKG9iamVjdCA9PSBudWxsKSB7CiAgICByZXR1cm4gW107CiAgfQoKICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTsKICByZXR1cm4gX2FycmF5RmlsdGVyKG5hdGl2ZUdldFN5bWJvbHMob2JqZWN0KSwgZnVuY3Rpb24gKHN5bWJvbCkgewogICAgcmV0dXJuIHByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwob2JqZWN0LCBzeW1ib2wpOwogIH0pOwp9Owp2YXIgX2dldFN5bWJvbHMgPSBnZXRTeW1ib2xzOwovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udGltZXNgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcwogKiBvciBtYXggYXJyYXkgbGVuZ3RoIGNoZWNrcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0byBpbnZva2UgYGl0ZXJhdGVlYC4KICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiByZXN1bHRzLgogKi8KCmZ1bmN0aW9uIGJhc2VUaW1lcyhuLCBpdGVyYXRlZSkgewogIHZhciBpbmRleCA9IC0xLAogICAgICByZXN1bHQgPSBBcnJheShuKTsKCiAgd2hpbGUgKCsraW5kZXggPCBuKSB7CiAgICByZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoaW5kZXgpOwogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfQoKdmFyIF9iYXNlVGltZXMgPSBiYXNlVGltZXM7Ci8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGAKICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiAib2JqZWN0Ii4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgNC4wLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuCiAqIEBleGFtcGxlCiAqCiAqIF8uaXNPYmplY3RMaWtlKHt9KTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7CiAqIC8vID0+IGZhbHNlCiAqCiAqIF8uaXNPYmplY3RMaWtlKG51bGwpOwogKiAvLyA9PiBmYWxzZQogKi8KCmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkgewogIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIF90eXBlb2YyKHZhbHVlKSA9PSAnb2JqZWN0JzsKfQoKdmFyIGlzT2JqZWN0TGlrZV8xID0gaXNPYmplY3RMaWtlOwovKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovCgp2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nOwovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNBcmd1bWVudHNgLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LAogKi8KCmZ1bmN0aW9uIGJhc2VJc0FyZ3VtZW50cyh2YWx1ZSkgewogIHJldHVybiBpc09iamVjdExpa2VfMSh2YWx1ZSkgJiYgX2Jhc2VHZXRUYWcodmFsdWUpID09IGFyZ3NUYWc7Cn0KCnZhciBfYmFzZUlzQXJndW1lbnRzID0gYmFzZUlzQXJndW1lbnRzOwovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCgp2YXIgb2JqZWN0UHJvdG8kNiA9IE9iamVjdC5wcm90b3R5cGU7Ci8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqLwoKdmFyIGhhc093blByb3BlcnR5JDQgPSBvYmplY3RQcm90byQ2Lmhhc093blByb3BlcnR5OwovKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi8KCnZhciBwcm9wZXJ0eUlzRW51bWVyYWJsZSQxID0gb2JqZWN0UHJvdG8kNi5wcm9wZXJ0eUlzRW51bWVyYWJsZTsKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhbiBgYXJndW1lbnRzYCBvYmplY3QuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDAuMS4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBgYXJndW1lbnRzYCBvYmplY3QsCiAqICBlbHNlIGBmYWxzZWAuCiAqIEBleGFtcGxlCiAqCiAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pOwogKiAvLyA9PiBmYWxzZQogKi8KCnZhciBpc0FyZ3VtZW50cyA9IF9iYXNlSXNBcmd1bWVudHMoZnVuY3Rpb24gKCkgewogIHJldHVybiBhcmd1bWVudHM7Cn0oKSkgPyBfYmFzZUlzQXJndW1lbnRzIDogZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGlzT2JqZWN0TGlrZV8xKHZhbHVlKSAmJiBoYXNPd25Qcm9wZXJ0eSQ0LmNhbGwodmFsdWUsICdjYWxsZWUnKSAmJiAhcHJvcGVydHlJc0VudW1lcmFibGUkMS5jYWxsKHZhbHVlLCAnY2FsbGVlJyk7Cn07CnZhciBpc0FyZ3VtZW50c18xID0gaXNBcmd1bWVudHM7Ci8qKgogKiBUaGlzIG1ldGhvZCByZXR1cm5zIGBmYWxzZWAuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDQuMTMuMAogKiBAY2F0ZWdvcnkgVXRpbAogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLnRpbWVzKDIsIF8uc3R1YkZhbHNlKTsKICogLy8gPT4gW2ZhbHNlLCBmYWxzZV0KICovCgpmdW5jdGlvbiBzdHViRmFsc2UoKSB7CiAgcmV0dXJuIGZhbHNlOwp9Cgp2YXIgc3R1YkZhbHNlXzEgPSBzdHViRmFsc2U7CnZhciBpc0J1ZmZlcl8xID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZXhwb3J0c2AuICovCiAgdmFyIGZyZWVFeHBvcnRzID0gZXhwb3J0cyAmJiAhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzOwogIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgbW9kdWxlYC4gKi8KCiAgdmFyIGZyZWVNb2R1bGUgPSBmcmVlRXhwb3J0cyAmJiAnb2JqZWN0JyA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7CiAgLyoqIERldGVjdCB0aGUgcG9wdWxhciBDb21tb25KUyBleHRlbnNpb24gYG1vZHVsZS5leHBvcnRzYC4gKi8KCiAgdmFyIG1vZHVsZUV4cG9ydHMgPSBmcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUuZXhwb3J0cyA9PT0gZnJlZUV4cG9ydHM7CiAgLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovCgogIHZhciBCdWZmZXIgPSBtb2R1bGVFeHBvcnRzID8gX3Jvb3QuQnVmZmVyIDogdW5kZWZpbmVkOwogIC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi8KCiAgdmFyIG5hdGl2ZUlzQnVmZmVyID0gQnVmZmVyID8gQnVmZmVyLmlzQnVmZmVyIDogdW5kZWZpbmVkOwogIC8qKgogICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgYnVmZmVyLgogICAqCiAgICogQHN0YXRpYwogICAqIEBtZW1iZXJPZiBfCiAgICogQHNpbmNlIDQuMy4wCiAgICogQGNhdGVnb3J5IExhbmcKICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGJ1ZmZlciwgZWxzZSBgZmFsc2VgLgogICAqIEBleGFtcGxlCiAgICoKICAgKiBfLmlzQnVmZmVyKG5ldyBCdWZmZXIoMikpOwogICAqIC8vID0+IHRydWUKICAgKgogICAqIF8uaXNCdWZmZXIobmV3IFVpbnQ4QXJyYXkoMikpOwogICAqIC8vID0+IGZhbHNlCiAgICovCgogIHZhciBpc0J1ZmZlciA9IG5hdGl2ZUlzQnVmZmVyIHx8IHN0dWJGYWxzZV8xOwogIG1vZHVsZS5leHBvcnRzID0gaXNCdWZmZXI7Cn0pOwovKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi8KCnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTsKLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqLwoKdmFyIHJlSXNVaW50ID0gL14oPzowfFsxLTldXGQqKSQvOwovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSwgbGVuZ3RoKSB7CiAgdmFyIHR5cGUgPSBfdHlwZW9mMih2YWx1ZSk7CgogIGxlbmd0aCA9IGxlbmd0aCA9PSBudWxsID8gTUFYX1NBRkVfSU5URUdFUiA6IGxlbmd0aDsKICByZXR1cm4gISFsZW5ndGggJiYgKHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSAhPSAnc3ltYm9sJyAmJiByZUlzVWludC50ZXN0KHZhbHVlKSkgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aDsKfQoKdmFyIF9pc0luZGV4ID0gaXNJbmRleDsKLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovCgp2YXIgTUFYX1NBRkVfSU5URUdFUiQxID0gOTAwNzE5OTI1NDc0MDk5MTsKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguCiAqCiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uCiAqIFtgVG9MZW5ndGhgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy10b2xlbmd0aCkuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDQuMC4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzTGVuZ3RoKDMpOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNMZW5ndGgoTnVtYmVyLk1JTl9WQUxVRSk7CiAqIC8vID0+IGZhbHNlCiAqCiAqIF8uaXNMZW5ndGgoSW5maW5pdHkpOwogKiAvLyA9PiBmYWxzZQogKgogKiBfLmlzTGVuZ3RoKCczJyk7CiAqIC8vID0+IGZhbHNlCiAqLwoKZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHsKICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUiQxOwp9Cgp2YXIgaXNMZW5ndGhfMSA9IGlzTGVuZ3RoOwovKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovCgp2YXIgYXJnc1RhZyQxID0gJ1tvYmplY3QgQXJndW1lbnRzXScsCiAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsCiAgICBib29sVGFnJDEgPSAnW29iamVjdCBCb29sZWFuXScsCiAgICBkYXRlVGFnJDEgPSAnW29iamVjdCBEYXRlXScsCiAgICBlcnJvclRhZyQxID0gJ1tvYmplY3QgRXJyb3JdJywKICAgIGZ1bmNUYWckMSA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsCiAgICBtYXBUYWckMSA9ICdbb2JqZWN0IE1hcF0nLAogICAgbnVtYmVyVGFnJDEgPSAnW29iamVjdCBOdW1iZXJdJywKICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLAogICAgcmVnZXhwVGFnJDEgPSAnW29iamVjdCBSZWdFeHBdJywKICAgIHNldFRhZyQxID0gJ1tvYmplY3QgU2V0XScsCiAgICBzdHJpbmdUYWckMSA9ICdbb2JqZWN0IFN0cmluZ10nLAogICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJzsKdmFyIGFycmF5QnVmZmVyVGFnJDEgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLAogICAgZGF0YVZpZXdUYWckMSA9ICdbb2JqZWN0IERhdGFWaWV3XScsCiAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsCiAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsCiAgICBpbnQ4VGFnID0gJ1tvYmplY3QgSW50OEFycmF5XScsCiAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJywKICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLAogICAgdWludDhUYWcgPSAnW29iamVjdCBVaW50OEFycmF5XScsCiAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLAogICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJywKICAgIHVpbnQzMlRhZyA9ICdbb2JqZWN0IFVpbnQzMkFycmF5XSc7Ci8qKiBVc2VkIHRvIGlkZW50aWZ5IGB0b1N0cmluZ1RhZ2AgdmFsdWVzIG9mIHR5cGVkIGFycmF5cy4gKi8KCnZhciB0eXBlZEFycmF5VGFncyA9IHt9Owp0eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlOwp0eXBlZEFycmF5VGFnc1thcmdzVGFnJDFdID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlUYWddID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWckMV0gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnJDFdID0gdHlwZWRBcnJheVRhZ3NbZGF0YVZpZXdUYWckMV0gPSB0eXBlZEFycmF5VGFnc1tkYXRlVGFnJDFdID0gdHlwZWRBcnJheVRhZ3NbZXJyb3JUYWckMV0gPSB0eXBlZEFycmF5VGFnc1tmdW5jVGFnJDFdID0gdHlwZWRBcnJheVRhZ3NbbWFwVGFnJDFdID0gdHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnJDFdID0gdHlwZWRBcnJheVRhZ3Nbb2JqZWN0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZyQxXSA9IHR5cGVkQXJyYXlUYWdzW3NldFRhZyQxXSA9IHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZyQxXSA9IHR5cGVkQXJyYXlUYWdzW3dlYWtNYXBUYWddID0gZmFsc2U7Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc1R5cGVkQXJyYXlgIHdpdGhvdXQgTm9kZS5qcyBvcHRpbWl6YXRpb25zLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB0eXBlZCBhcnJheSwgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIGJhc2VJc1R5cGVkQXJyYXkodmFsdWUpIHsKICByZXR1cm4gaXNPYmplY3RMaWtlXzEodmFsdWUpICYmIGlzTGVuZ3RoXzEodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW19iYXNlR2V0VGFnKHZhbHVlKV07Cn0KCnZhciBfYmFzZUlzVHlwZWRBcnJheSA9IGJhc2VJc1R5cGVkQXJyYXk7Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy51bmFyeWAgd2l0aG91dCBzdXBwb3J0IGZvciBzdG9yaW5nIG1ldGFkYXRhLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjYXAgYXJndW1lbnRzIGZvci4KICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY2FwcGVkIGZ1bmN0aW9uLgogKi8KCmZ1bmN0aW9uIGJhc2VVbmFyeShmdW5jKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmModmFsdWUpOwogIH07Cn0KCnZhciBfYmFzZVVuYXJ5ID0gYmFzZVVuYXJ5OwoKdmFyIF9ub2RlVXRpbCA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGV4cG9ydHNgLiAqLwogIHZhciBmcmVlRXhwb3J0cyA9IGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0czsKICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYG1vZHVsZWAuICovCgogIHZhciBmcmVlTW9kdWxlID0gZnJlZUV4cG9ydHMgJiYgJ29iamVjdCcgPT0gJ29iamVjdCcgJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlOwogIC8qKiBEZXRlY3QgdGhlIHBvcHVsYXIgQ29tbW9uSlMgZXh0ZW5zaW9uIGBtb2R1bGUuZXhwb3J0c2AuICovCgogIHZhciBtb2R1bGVFeHBvcnRzID0gZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLmV4cG9ydHMgPT09IGZyZWVFeHBvcnRzOwogIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgcHJvY2Vzc2AgZnJvbSBOb2RlLmpzLiAqLwoKICB2YXIgZnJlZVByb2Nlc3MgPSBtb2R1bGVFeHBvcnRzICYmIF9mcmVlR2xvYmFsLnByb2Nlc3M7CiAgLyoqIFVzZWQgdG8gYWNjZXNzIGZhc3RlciBOb2RlLmpzIGhlbHBlcnMuICovCgogIHZhciBub2RlVXRpbCA9IGZ1bmN0aW9uICgpIHsKICAgIHRyeSB7CiAgICAgIC8vIFVzZSBgdXRpbC50eXBlc2AgZm9yIE5vZGUuanMgMTArLgogICAgICB2YXIgdHlwZXMgPSBmcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUucmVxdWlyZSAmJiBmcmVlTW9kdWxlLnJlcXVpcmUoJ3V0aWwnKS50eXBlczsKCiAgICAgIGlmICh0eXBlcykgewogICAgICAgIHJldHVybiB0eXBlczsKICAgICAgfSAvLyBMZWdhY3kgYHByb2Nlc3MuYmluZGluZygndXRpbCcpYCBmb3IgTm9kZS5qcyA8IDEwLgoKCiAgICAgIHJldHVybiBmcmVlUHJvY2VzcyAmJiBmcmVlUHJvY2Vzcy5iaW5kaW5nICYmIGZyZWVQcm9jZXNzLmJpbmRpbmcoJ3V0aWwnKTsKICAgIH0gY2F0Y2ggKGUpIHt9CiAgfSgpOwoKICBtb2R1bGUuZXhwb3J0cyA9IG5vZGVVdGlsOwp9KTsKLyogTm9kZS5qcyBoZWxwZXIgcmVmZXJlbmNlcy4gKi8KCgp2YXIgbm9kZUlzVHlwZWRBcnJheSA9IF9ub2RlVXRpbCAmJiBfbm9kZVV0aWwuaXNUeXBlZEFycmF5OwovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIHR5cGVkIGFycmF5LgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSAzLjAuMAogKiBAY2F0ZWdvcnkgTGFuZwogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB0eXBlZCBhcnJheSwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzVHlwZWRBcnJheShuZXcgVWludDhBcnJheSk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc1R5cGVkQXJyYXkoW10pOwogKiAvLyA9PiBmYWxzZQogKi8KCnZhciBpc1R5cGVkQXJyYXkgPSBub2RlSXNUeXBlZEFycmF5ID8gX2Jhc2VVbmFyeShub2RlSXNUeXBlZEFycmF5KSA6IF9iYXNlSXNUeXBlZEFycmF5Owp2YXIgaXNUeXBlZEFycmF5XzEgPSBpc1R5cGVkQXJyYXk7Ci8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KCnZhciBvYmplY3RQcm90byQ3ID0gT2JqZWN0LnByb3RvdHlwZTsKLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovCgp2YXIgaGFzT3duUHJvcGVydHkkNSA9IG9iamVjdFByb3RvJDcuaGFzT3duUHJvcGVydHk7Ci8qKgogKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIHRoZSBhcnJheS1saWtlIGB2YWx1ZWAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LgogKiBAcGFyYW0ge2Jvb2xlYW59IGluaGVyaXRlZCBTcGVjaWZ5IHJldHVybmluZyBpbmhlcml0ZWQgcHJvcGVydHkgbmFtZXMuCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuCiAqLwoKZnVuY3Rpb24gYXJyYXlMaWtlS2V5cyh2YWx1ZSwgaW5oZXJpdGVkKSB7CiAgdmFyIGlzQXJyID0gaXNBcnJheV8xKHZhbHVlKSwKICAgICAgaXNBcmcgPSAhaXNBcnIgJiYgaXNBcmd1bWVudHNfMSh2YWx1ZSksCiAgICAgIGlzQnVmZiA9ICFpc0FyciAmJiAhaXNBcmcgJiYgaXNCdWZmZXJfMSh2YWx1ZSksCiAgICAgIGlzVHlwZSA9ICFpc0FyciAmJiAhaXNBcmcgJiYgIWlzQnVmZiAmJiBpc1R5cGVkQXJyYXlfMSh2YWx1ZSksCiAgICAgIHNraXBJbmRleGVzID0gaXNBcnIgfHwgaXNBcmcgfHwgaXNCdWZmIHx8IGlzVHlwZSwKICAgICAgcmVzdWx0ID0gc2tpcEluZGV4ZXMgPyBfYmFzZVRpbWVzKHZhbHVlLmxlbmd0aCwgU3RyaW5nKSA6IFtdLAogICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoOwoKICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHsKICAgIGlmICgoaW5oZXJpdGVkIHx8IGhhc093blByb3BlcnR5JDUuY2FsbCh2YWx1ZSwga2V5KSkgJiYgIShza2lwSW5kZXhlcyAmJiAoIC8vIFNhZmFyaSA5IGhhcyBlbnVtZXJhYmxlIGBhcmd1bWVudHMubGVuZ3RoYCBpbiBzdHJpY3QgbW9kZS4KICAgIGtleSA9PSAnbGVuZ3RoJyB8fCAvLyBOb2RlLmpzIDAuMTAgaGFzIGVudW1lcmFibGUgbm9uLWluZGV4IHByb3BlcnRpZXMgb24gYnVmZmVycy4KICAgIGlzQnVmZiAmJiAoa2V5ID09ICdvZmZzZXQnIHx8IGtleSA9PSAncGFyZW50JykgfHwgLy8gUGhhbnRvbUpTIDIgaGFzIGVudW1lcmFibGUgbm9uLWluZGV4IHByb3BlcnRpZXMgb24gdHlwZWQgYXJyYXlzLgogICAgaXNUeXBlICYmIChrZXkgPT0gJ2J1ZmZlcicgfHwga2V5ID09ICdieXRlTGVuZ3RoJyB8fCBrZXkgPT0gJ2J5dGVPZmZzZXQnKSB8fCAvLyBTa2lwIGluZGV4IHByb3BlcnRpZXMuCiAgICBfaXNJbmRleChrZXksIGxlbmd0aCkpKSkgewogICAgICByZXN1bHQucHVzaChrZXkpOwogICAgfQogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfQoKdmFyIF9hcnJheUxpa2VLZXlzID0gYXJyYXlMaWtlS2V5czsKLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqLwoKdmFyIG9iamVjdFByb3RvJDggPSBPYmplY3QucHJvdG90eXBlOwovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGEgcHJvdG90eXBlIG9iamVjdC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gaXNQcm90b3R5cGUodmFsdWUpIHsKICB2YXIgQ3RvciA9IHZhbHVlICYmIHZhbHVlLmNvbnN0cnVjdG9yLAogICAgICBwcm90byA9IHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUgfHwgb2JqZWN0UHJvdG8kODsKICByZXR1cm4gdmFsdWUgPT09IHByb3RvOwp9Cgp2YXIgX2lzUHJvdG90eXBlID0gaXNQcm90b3R5cGU7Ci8qKgogKiBDcmVhdGVzIGEgdW5hcnkgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGl0cyBhcmd1bWVudCB0cmFuc2Zvcm1lZC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC4KICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLgogKi8KCmZ1bmN0aW9uIG92ZXJBcmcoZnVuYywgdHJhbnNmb3JtKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChhcmcpIHsKICAgIHJldHVybiBmdW5jKHRyYW5zZm9ybShhcmcpKTsKICB9Owp9Cgp2YXIgX292ZXJBcmcgPSBvdmVyQXJnOwovKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovCgp2YXIgbmF0aXZlS2V5cyA9IF9vdmVyQXJnKE9iamVjdC5rZXlzLCBPYmplY3QpOwoKdmFyIF9uYXRpdmVLZXlzID0gbmF0aXZlS2V5czsKLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqLwoKdmFyIG9iamVjdFByb3RvJDkgPSBPYmplY3QucHJvdG90eXBlOwovKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi8KCnZhciBoYXNPd25Qcm9wZXJ0eSQ2ID0gb2JqZWN0UHJvdG8kOS5oYXNPd25Qcm9wZXJ0eTsKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmtleXNgIHdoaWNoIGRvZXNuJ3QgdHJlYXQgc3BhcnNlIGFycmF5cyBhcyBkZW5zZS4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLgogKi8KCmZ1bmN0aW9uIGJhc2VLZXlzKG9iamVjdCkgewogIGlmICghX2lzUHJvdG90eXBlKG9iamVjdCkpIHsKICAgIHJldHVybiBfbmF0aXZlS2V5cyhvYmplY3QpOwogIH0KCiAgdmFyIHJlc3VsdCA9IFtdOwoKICBmb3IgKHZhciBrZXkgaW4gT2JqZWN0KG9iamVjdCkpIHsKICAgIGlmIChoYXNPd25Qcm9wZXJ0eSQ2LmNhbGwob2JqZWN0LCBrZXkpICYmIGtleSAhPSAnY29uc3RydWN0b3InKSB7CiAgICAgIHJlc3VsdC5wdXNoKGtleSk7CiAgICB9CiAgfQoKICByZXR1cm4gcmVzdWx0Owp9Cgp2YXIgX2Jhc2VLZXlzID0gYmFzZUtleXM7Ci8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLiBBIHZhbHVlIGlzIGNvbnNpZGVyZWQgYXJyYXktbGlrZSBpZiBpdCdzCiAqIG5vdCBhIGZ1bmN0aW9uIGFuZCBoYXMgYSBgdmFsdWUubGVuZ3RoYCB0aGF0J3MgYW4gaW50ZWdlciBncmVhdGVyIHRoYW4gb3IKICogZXF1YWwgdG8gYDBgIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYC4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgNC4wLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC4KICogQGV4YW1wbGUKICoKICogXy5pc0FycmF5TGlrZShbMSwgMiwgM10pOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNBcnJheUxpa2UoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7CiAqIC8vID0+IHRydWUKICoKICogXy5pc0FycmF5TGlrZSgnYWJjJyk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc0FycmF5TGlrZShfLm5vb3ApOwogKiAvLyA9PiBmYWxzZQogKi8KCmZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7CiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGhfMSh2YWx1ZS5sZW5ndGgpICYmICFpc0Z1bmN0aW9uXzEodmFsdWUpOwp9Cgp2YXIgaXNBcnJheUxpa2VfMSA9IGlzQXJyYXlMaWtlOwovKioKICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuCiAqCiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlCiAqIFtFUyBzcGVjXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3Qua2V5cykKICogZm9yIG1vcmUgZGV0YWlscy4KICoKICogQHN0YXRpYwogKiBAc2luY2UgMC4xLjAKICogQG1lbWJlck9mIF8KICogQGNhdGVnb3J5IE9iamVjdAogKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuCiAqIEBleGFtcGxlCiAqCiAqIGZ1bmN0aW9uIEZvbygpIHsKICogICB0aGlzLmEgPSAxOwogKiAgIHRoaXMuYiA9IDI7CiAqIH0KICoKICogRm9vLnByb3RvdHlwZS5jID0gMzsKICoKICogXy5rZXlzKG5ldyBGb28pOwogKiAvLyA9PiBbJ2EnLCAnYiddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpCiAqCiAqIF8ua2V5cygnaGknKTsKICogLy8gPT4gWycwJywgJzEnXQogKi8KCmZ1bmN0aW9uIGtleXMob2JqZWN0KSB7CiAgcmV0dXJuIGlzQXJyYXlMaWtlXzEob2JqZWN0KSA/IF9hcnJheUxpa2VLZXlzKG9iamVjdCkgOiBfYmFzZUtleXMob2JqZWN0KTsKfQoKdmFyIGtleXNfMSA9IGtleXM7Ci8qKgogKiBDcmVhdGVzIGFuIGFycmF5IG9mIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIGFuZCBzeW1ib2xzIG9mIGBvYmplY3RgLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgYW5kIHN5bWJvbHMuCiAqLwoKZnVuY3Rpb24gZ2V0QWxsS2V5cyhvYmplY3QpIHsKICByZXR1cm4gX2Jhc2VHZXRBbGxLZXlzKG9iamVjdCwga2V5c18xLCBfZ2V0U3ltYm9scyk7Cn0KCnZhciBfZ2V0QWxsS2V5cyA9IGdldEFsbEtleXM7Ci8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIHZhbHVlIGNvbXBhcmlzb25zLiAqLwoKdmFyIENPTVBBUkVfUEFSVElBTF9GTEFHJDIgPSAxOwovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCgp2YXIgb2JqZWN0UHJvdG8kYSA9IE9iamVjdC5wcm90b3R5cGU7Ci8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqLwoKdmFyIGhhc093blByb3BlcnR5JDcgPSBvYmplY3RQcm90byRhLmhhc093blByb3BlcnR5OwovKioKICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBvYmplY3RzIHdpdGggc3VwcG9ydCBmb3IKICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS4KICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS4KICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgIGZvciBtb3JlIGRldGFpbHMuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy4KICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLgogKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjaykgewogIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgQ09NUEFSRV9QQVJUSUFMX0ZMQUckMiwKICAgICAgb2JqUHJvcHMgPSBfZ2V0QWxsS2V5cyhvYmplY3QpLAogICAgICBvYmpMZW5ndGggPSBvYmpQcm9wcy5sZW5ndGgsCiAgICAgIG90aFByb3BzID0gX2dldEFsbEtleXMob3RoZXIpLAogICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7CgogIGlmIChvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc1BhcnRpYWwpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHZhciBpbmRleCA9IG9iakxlbmd0aDsKCiAgd2hpbGUgKGluZGV4LS0pIHsKICAgIHZhciBrZXkgPSBvYmpQcm9wc1tpbmRleF07CgogICAgaWYgKCEoaXNQYXJ0aWFsID8ga2V5IGluIG90aGVyIDogaGFzT3duUHJvcGVydHkkNy5jYWxsKG90aGVyLCBrZXkpKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuCgoKICB2YXIgc3RhY2tlZCA9IHN0YWNrLmdldChvYmplY3QpOwoKICBpZiAoc3RhY2tlZCAmJiBzdGFjay5nZXQob3RoZXIpKSB7CiAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjsKICB9CgogIHZhciByZXN1bHQgPSB0cnVlOwogIHN0YWNrLnNldChvYmplY3QsIG90aGVyKTsKICBzdGFjay5zZXQob3RoZXIsIG9iamVjdCk7CiAgdmFyIHNraXBDdG9yID0gaXNQYXJ0aWFsOwoKICB3aGlsZSAoKytpbmRleCA8IG9iakxlbmd0aCkgewogICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdOwogICAgdmFyIG9ialZhbHVlID0gb2JqZWN0W2tleV0sCiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltrZXldOwoKICAgIGlmIChjdXN0b21pemVyKSB7CiAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbCA/IGN1c3RvbWl6ZXIob3RoVmFsdWUsIG9ialZhbHVlLCBrZXksIG90aGVyLCBvYmplY3QsIHN0YWNrKSA6IGN1c3RvbWl6ZXIob2JqVmFsdWUsIG90aFZhbHVlLCBrZXksIG9iamVjdCwgb3RoZXIsIHN0YWNrKTsKICAgIH0gLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuCgoKICAgIGlmICghKGNvbXBhcmVkID09PSB1bmRlZmluZWQgPyBvYmpWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKG9ialZhbHVlLCBvdGhWYWx1ZSwgYml0bWFzaywgY3VzdG9taXplciwgc3RhY2spIDogY29tcGFyZWQpKSB7CiAgICAgIHJlc3VsdCA9IGZhbHNlOwogICAgICBicmVhazsKICAgIH0KCiAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT0gJ2NvbnN0cnVjdG9yJyk7CiAgfQoKICBpZiAocmVzdWx0ICYmICFza2lwQ3RvcikgewogICAgdmFyIG9iakN0b3IgPSBvYmplY3QuY29uc3RydWN0b3IsCiAgICAgICAgb3RoQ3RvciA9IG90aGVyLmNvbnN0cnVjdG9yOyAvLyBOb24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbC4KCiAgICBpZiAob2JqQ3RvciAhPSBvdGhDdG9yICYmICdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIgJiYgISh0eXBlb2Ygb2JqQ3RvciA9PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmIHR5cGVvZiBvdGhDdG9yID09ICdmdW5jdGlvbicgJiYgb3RoQ3RvciBpbnN0YW5jZW9mIG90aEN0b3IpKSB7CiAgICAgIHJlc3VsdCA9IGZhbHNlOwogICAgfQogIH0KCiAgc3RhY2tbJ2RlbGV0ZSddKG9iamVjdCk7CiAgc3RhY2tbJ2RlbGV0ZSddKG90aGVyKTsKICByZXR1cm4gcmVzdWx0Owp9Cgp2YXIgX2VxdWFsT2JqZWN0cyA9IGVxdWFsT2JqZWN0czsKLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqLwoKdmFyIERhdGFWaWV3ID0gX2dldE5hdGl2ZShfcm9vdCwgJ0RhdGFWaWV3Jyk7Cgp2YXIgX0RhdGFWaWV3ID0gRGF0YVZpZXc7Ci8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi8KCnZhciBQcm9taXNlJDEgPSBfZ2V0TmF0aXZlKF9yb290LCAnUHJvbWlzZScpOwoKdmFyIF9Qcm9taXNlID0gUHJvbWlzZSQxOwovKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovCgp2YXIgU2V0ID0gX2dldE5hdGl2ZShfcm9vdCwgJ1NldCcpOwoKdmFyIF9TZXQgPSBTZXQ7Ci8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi8KCnZhciBXZWFrTWFwID0gX2dldE5hdGl2ZShfcm9vdCwgJ1dlYWtNYXAnKTsKCnZhciBfV2Vha01hcCA9IFdlYWtNYXA7Ci8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi8KCnZhciBtYXBUYWckMiA9ICdbb2JqZWN0IE1hcF0nLAogICAgb2JqZWN0VGFnJDEgPSAnW29iamVjdCBPYmplY3RdJywKICAgIHByb21pc2VUYWcgPSAnW29iamVjdCBQcm9taXNlXScsCiAgICBzZXRUYWckMiA9ICdbb2JqZWN0IFNldF0nLAogICAgd2Vha01hcFRhZyQxID0gJ1tvYmplY3QgV2Vha01hcF0nOwp2YXIgZGF0YVZpZXdUYWckMiA9ICdbb2JqZWN0IERhdGFWaWV3XSc7Ci8qKiBVc2VkIHRvIGRldGVjdCBtYXBzLCBzZXRzLCBhbmQgd2Vha21hcHMuICovCgp2YXIgZGF0YVZpZXdDdG9yU3RyaW5nID0gX3RvU291cmNlKF9EYXRhVmlldyksCiAgICBtYXBDdG9yU3RyaW5nID0gX3RvU291cmNlKF9NYXApLAogICAgcHJvbWlzZUN0b3JTdHJpbmcgPSBfdG9Tb3VyY2UoX1Byb21pc2UpLAogICAgc2V0Q3RvclN0cmluZyA9IF90b1NvdXJjZShfU2V0KSwKICAgIHdlYWtNYXBDdG9yU3RyaW5nID0gX3RvU291cmNlKF9XZWFrTWFwKTsKLyoqCiAqIEdldHMgdGhlIGB0b1N0cmluZ1RhZ2Agb2YgYHZhbHVlYC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuCiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuCiAqLwoKCnZhciBnZXRUYWcgPSBfYmFzZUdldFRhZzsgLy8gRmFsbGJhY2sgZm9yIGRhdGEgdmlld3MsIG1hcHMsIHNldHMsIGFuZCB3ZWFrIG1hcHMgaW4gSUUgMTEgYW5kIHByb21pc2VzIGluIE5vZGUuanMgPCA2LgoKaWYgKF9EYXRhVmlldyAmJiBnZXRUYWcobmV3IF9EYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMSkpKSAhPSBkYXRhVmlld1RhZyQyIHx8IF9NYXAgJiYgZ2V0VGFnKG5ldyBfTWFwKCkpICE9IG1hcFRhZyQyIHx8IF9Qcm9taXNlICYmIGdldFRhZyhfUHJvbWlzZS5yZXNvbHZlKCkpICE9IHByb21pc2VUYWcgfHwgX1NldCAmJiBnZXRUYWcobmV3IF9TZXQoKSkgIT0gc2V0VGFnJDIgfHwgX1dlYWtNYXAgJiYgZ2V0VGFnKG5ldyBfV2Vha01hcCgpKSAhPSB3ZWFrTWFwVGFnJDEpIHsKICBnZXRUYWcgPSBmdW5jdGlvbiBnZXRUYWcodmFsdWUpIHsKICAgIHZhciByZXN1bHQgPSBfYmFzZUdldFRhZyh2YWx1ZSksCiAgICAgICAgQ3RvciA9IHJlc3VsdCA9PSBvYmplY3RUYWckMSA/IHZhbHVlLmNvbnN0cnVjdG9yIDogdW5kZWZpbmVkLAogICAgICAgIGN0b3JTdHJpbmcgPSBDdG9yID8gX3RvU291cmNlKEN0b3IpIDogJyc7CgogICAgaWYgKGN0b3JTdHJpbmcpIHsKICAgICAgc3dpdGNoIChjdG9yU3RyaW5nKSB7CiAgICAgICAgY2FzZSBkYXRhVmlld0N0b3JTdHJpbmc6CiAgICAgICAgICByZXR1cm4gZGF0YVZpZXdUYWckMjsKCiAgICAgICAgY2FzZSBtYXBDdG9yU3RyaW5nOgogICAgICAgICAgcmV0dXJuIG1hcFRhZyQyOwoKICAgICAgICBjYXNlIHByb21pc2VDdG9yU3RyaW5nOgogICAgICAgICAgcmV0dXJuIHByb21pc2VUYWc7CgogICAgICAgIGNhc2Ugc2V0Q3RvclN0cmluZzoKICAgICAgICAgIHJldHVybiBzZXRUYWckMjsKCiAgICAgICAgY2FzZSB3ZWFrTWFwQ3RvclN0cmluZzoKICAgICAgICAgIHJldHVybiB3ZWFrTWFwVGFnJDE7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gcmVzdWx0OwogIH07Cn0KCnZhciBfZ2V0VGFnID0gZ2V0VGFnOwovKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciB2YWx1ZSBjb21wYXJpc29ucy4gKi8KCnZhciBDT01QQVJFX1BBUlRJQUxfRkxBRyQzID0gMTsKLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqLwoKdmFyIGFyZ3NUYWckMiA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLAogICAgYXJyYXlUYWckMSA9ICdbb2JqZWN0IEFycmF5XScsCiAgICBvYmplY3RUYWckMiA9ICdbb2JqZWN0IE9iamVjdF0nOwovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCgp2YXIgb2JqZWN0UHJvdG8kYiA9IE9iamVjdC5wcm90b3R5cGU7Ci8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqLwoKdmFyIGhhc093blByb3BlcnR5JDggPSBvYmplY3RQcm90byRiLmhhc093blByb3BlcnR5OwovKioKICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbGAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3JtcwogKiBkZWVwIGNvbXBhcmlzb25zIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMgZW5hYmxpbmcgb2JqZWN0cyB3aXRoIGNpcmN1bGFyCiAqIHJlZmVyZW5jZXMgdG8gYmUgY29tcGFyZWQuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLgogKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLgogKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGAgZm9yIG1vcmUgZGV0YWlscy4KICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuCiAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gYmFzZUlzRXF1YWxEZWVwKG9iamVjdCwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHsKICB2YXIgb2JqSXNBcnIgPSBpc0FycmF5XzEob2JqZWN0KSwKICAgICAgb3RoSXNBcnIgPSBpc0FycmF5XzEob3RoZXIpLAogICAgICBvYmpUYWcgPSBvYmpJc0FyciA/IGFycmF5VGFnJDEgOiBfZ2V0VGFnKG9iamVjdCksCiAgICAgIG90aFRhZyA9IG90aElzQXJyID8gYXJyYXlUYWckMSA6IF9nZXRUYWcob3RoZXIpOwogIG9ialRhZyA9IG9ialRhZyA9PSBhcmdzVGFnJDIgPyBvYmplY3RUYWckMiA6IG9ialRhZzsKICBvdGhUYWcgPSBvdGhUYWcgPT0gYXJnc1RhZyQyID8gb2JqZWN0VGFnJDIgOiBvdGhUYWc7CiAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyQyLAogICAgICBvdGhJc09iaiA9IG90aFRhZyA9PSBvYmplY3RUYWckMiwKICAgICAgaXNTYW1lVGFnID0gb2JqVGFnID09IG90aFRhZzsKCiAgaWYgKGlzU2FtZVRhZyAmJiBpc0J1ZmZlcl8xKG9iamVjdCkpIHsKICAgIGlmICghaXNCdWZmZXJfMShvdGhlcikpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIG9iaklzQXJyID0gdHJ1ZTsKICAgIG9iaklzT2JqID0gZmFsc2U7CiAgfQoKICBpZiAoaXNTYW1lVGFnICYmICFvYmpJc09iaikgewogICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IF9TdGFjaygpKTsKICAgIHJldHVybiBvYmpJc0FyciB8fCBpc1R5cGVkQXJyYXlfMShvYmplY3QpID8gX2VxdWFsQXJyYXlzKG9iamVjdCwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIDogX2VxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgb2JqVGFnLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKTsKICB9CgogIGlmICghKGJpdG1hc2sgJiBDT01QQVJFX1BBUlRJQUxfRkxBRyQzKSkgewogICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5JDguY2FsbChvYmplY3QsICdfX3dyYXBwZWRfXycpLAogICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5JDguY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7CgogICAgaWYgKG9iaklzV3JhcHBlZCB8fCBvdGhJc1dyYXBwZWQpIHsKICAgICAgdmFyIG9ialVud3JhcHBlZCA9IG9iaklzV3JhcHBlZCA/IG9iamVjdC52YWx1ZSgpIDogb2JqZWN0LAogICAgICAgICAgb3RoVW53cmFwcGVkID0gb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyOwogICAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgX1N0YWNrKCkpOwogICAgICByZXR1cm4gZXF1YWxGdW5jKG9ialVud3JhcHBlZCwgb3RoVW53cmFwcGVkLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjayk7CiAgICB9CiAgfQoKICBpZiAoIWlzU2FtZVRhZykgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IF9TdGFjaygpKTsKICByZXR1cm4gX2VxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKTsKfQoKdmFyIF9iYXNlSXNFcXVhbERlZXAgPSBiYXNlSXNFcXVhbERlZXA7Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCB3aGljaCBzdXBwb3J0cyBwYXJ0aWFsIGNvbXBhcmlzb25zCiAqIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuCiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuCiAqIEBwYXJhbSB7Ym9vbGVhbn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4KICogIDEgLSBVbm9yZGVyZWQgY29tcGFyaXNvbgogKiAgMiAtIFBhcnRpYWwgY29tcGFyaXNvbgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy4KICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIGFuZCBgb3RoZXJgIG9iamVjdHMuCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjaykgewogIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgaWYgKHZhbHVlID09IG51bGwgfHwgb3RoZXIgPT0gbnVsbCB8fCAhaXNPYmplY3RMaWtlXzEodmFsdWUpICYmICFpc09iamVjdExpa2VfMShvdGhlcikpIHsKICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyOwogIH0KCiAgcmV0dXJuIF9iYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBiYXNlSXNFcXVhbCwgc3RhY2spOwp9Cgp2YXIgX2Jhc2VJc0VxdWFsID0gYmFzZUlzRXF1YWw7Ci8qKgogKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlCiAqIGVxdWl2YWxlbnQuCiAqCiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBzdXBwb3J0cyBjb21wYXJpbmcgYXJyYXlzLCBhcnJheSBidWZmZXJzLCBib29sZWFucywKICogZGF0ZSBvYmplY3RzLCBlcnJvciBvYmplY3RzLCBtYXBzLCBudW1iZXJzLCBgT2JqZWN0YCBvYmplY3RzLCByZWdleGVzLAogKiBzZXRzLCBzdHJpbmdzLCBzeW1ib2xzLCBhbmQgdHlwZWQgYXJyYXlzLiBgT2JqZWN0YCBvYmplY3RzIGFyZSBjb21wYXJlZAogKiBieSB0aGVpciBvd24sIG5vdCBpbmhlcml0ZWQsIGVudW1lcmFibGUgcHJvcGVydGllcy4gRnVuY3Rpb25zIGFuZCBET00KICogbm9kZXMgYXJlIGNvbXBhcmVkIGJ5IHN0cmljdCBlcXVhbGl0eSwgaS5lLiBgPT09YC4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgMC4xLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS4KICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC4KICogQGV4YW1wbGUKICoKICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxIH07CiAqIHZhciBvdGhlciA9IHsgJ2EnOiAxIH07CiAqCiAqIF8uaXNFcXVhbChvYmplY3QsIG90aGVyKTsKICogLy8gPT4gdHJ1ZQogKgogKiBvYmplY3QgPT09IG90aGVyOwogKiAvLyA9PiBmYWxzZQogKi8KCmZ1bmN0aW9uIGlzRXF1YWwodmFsdWUsIG90aGVyKSB7CiAgcmV0dXJuIF9iYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIpOwp9Cgp2YXIgaXNFcXVhbF8xID0gaXNFcXVhbDsKdmFyIERFRkFVTFRfT1BUSU9OUyA9IHsKICBjb250YWluZXI6IGZhbHNlLAogIGRlbGF5OiAwLAogIGh0bWw6IGZhbHNlLAogIHBsYWNlbWVudDogJ3RvcCcsCiAgdGl0bGU6ICcnLAogIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz0idG9vbHRpcCIgcm9sZT0idG9vbHRpcCI+PGRpdiBjbGFzcz0idG9vbHRpcC1hcnJvdyI+PC9kaXY+PGRpdiBjbGFzcz0idG9vbHRpcC1pbm5lciI+PC9kaXY+PC9kaXY+JywKICB0cmlnZ2VyOiAnaG92ZXIgZm9jdXMnLAogIG9mZnNldDogMAp9Owp2YXIgb3BlblRvb2x0aXBzID0gW107Cgp2YXIgVG9vbHRpcCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIC8qKgogICAqIENyZWF0ZSBhIG5ldyBUb29sdGlwLmpzIGluc3RhbmNlCiAgICogQGNsYXNzIFRvb2x0aXAKICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSByZWZlcmVuY2UgLSBUaGUgRE9NIG5vZGUgdXNlZCBhcyByZWZlcmVuY2Ugb2YgdGhlIHRvb2x0aXAgKGl0IGNhbiBiZSBhIGpRdWVyeSBlbGVtZW50KS4KICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLnBsYWNlbWVudD1ib3R0b20KICAgKiAgICAgIFBsYWNlbWVudCBvZiB0aGUgcG9wcGVyIGFjY2VwdGVkIHZhbHVlczogYHRvcCgtc3RhcnQsIC1lbmQpLCByaWdodCgtc3RhcnQsIC1lbmQpLCBib3R0b20oLXN0YXJ0LCAtZW5kKSwKICAgKiAgICAgIGxlZnQoLXN0YXJ0LCAtZW5kKWAKICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFN0cmluZ3xmYWxzZX0gb3B0aW9ucy5jb250YWluZXI9ZmFsc2UgLSBBcHBlbmQgdGhlIHRvb2x0aXAgdG8gYSBzcGVjaWZpYyBlbGVtZW50LgogICAqIEBwYXJhbSB7TnVtYmVyfE9iamVjdH0gb3B0aW9ucy5kZWxheT0wCiAgICogICAgICBEZWxheSBzaG93aW5nIGFuZCBoaWRpbmcgdGhlIHRvb2x0aXAgKG1zKSAtIGRvZXMgbm90IGFwcGx5IHRvIG1hbnVhbCB0cmlnZ2VyIHR5cGUuCiAgICogICAgICBJZiBhIG51bWJlciBpcyBzdXBwbGllZCwgZGVsYXkgaXMgYXBwbGllZCB0byBib3RoIGhpZGUvc2hvdy4KICAgKiAgICAgIE9iamVjdCBzdHJ1Y3R1cmUgaXM6IGB7IHNob3c6IDUwMCwgaGlkZTogMTAwIH1gCiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLmh0bWw9ZmFsc2UgLSBJbnNlcnQgSFRNTCBpbnRvIHRoZSB0b29sdGlwLiBJZiBmYWxzZSwgdGhlIGNvbnRlbnQgd2lsbCBpbnNlcnRlZCB3aXRoIGBpbm5lclRleHRgLgogICAqIEBwYXJhbSB7U3RyaW5nfFBsYWNlbWVudEZ1bmN0aW9ufSBvcHRpb25zLnBsYWNlbWVudD0ndG9wJyAtIE9uZSBvZiB0aGUgYWxsb3dlZCBwbGFjZW1lbnRzLCBvciBhIGZ1bmN0aW9uIHJldHVybmluZyBvbmUgb2YgdGhlbS4KICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMudGVtcGxhdGU9JzxkaXYgY2xhc3M9InRvb2x0aXAiIHJvbGU9InRvb2x0aXAiPjxkaXYgY2xhc3M9InRvb2x0aXAtYXJyb3ciPjwvZGl2PjxkaXYgY2xhc3M9InRvb2x0aXAtaW5uZXIiPjwvZGl2PjwvZGl2PiddCiAgICogICAgICBCYXNlIEhUTUwgdG8gdXNlZCB3aGVuIGNyZWF0aW5nIHRoZSB0b29sdGlwLgogICAqICAgICAgVGhlIHRvb2x0aXAncyBgdGl0bGVgIHdpbGwgYmUgaW5qZWN0ZWQgaW50byB0aGUgYC50b29sdGlwLWlubmVyYCBvciBgLnRvb2x0aXBfX2lubmVyYC4KICAgKiAgICAgIGAudG9vbHRpcC1hcnJvd2Agb3IgYC50b29sdGlwX19hcnJvd2Agd2lsbCBiZWNvbWUgdGhlIHRvb2x0aXAncyBhcnJvdy4KICAgKiAgICAgIFRoZSBvdXRlcm1vc3Qgd3JhcHBlciBlbGVtZW50IHNob3VsZCBoYXZlIHRoZSBgLnRvb2x0aXBgIGNsYXNzLgogICAqIEBwYXJhbSB7U3RyaW5nfEhUTUxFbGVtZW50fFRpdGxlRnVuY3Rpb259IG9wdGlvbnMudGl0bGU9JycgLSBEZWZhdWx0IHRpdGxlIHZhbHVlIGlmIGB0aXRsZWAgYXR0cmlidXRlIGlzbid0IHByZXNlbnQuCiAgICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLnRyaWdnZXI9J2hvdmVyIGZvY3VzJ10KICAgKiAgICAgIEhvdyB0b29sdGlwIGlzIHRyaWdnZXJlZCAtIGNsaWNrLCBob3ZlciwgZm9jdXMsIG1hbnVhbC4KICAgKiAgICAgIFlvdSBtYXkgcGFzcyBtdWx0aXBsZSB0cmlnZ2Vyczsgc2VwYXJhdGUgdGhlbSB3aXRoIGEgc3BhY2UuIGBtYW51YWxgIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIGFueSBvdGhlciB0cmlnZ2VyLgogICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG9wdGlvbnMuYm91bmRhcmllc0VsZW1lbnQKICAgKiAgICAgIFRoZSBlbGVtZW50IHVzZWQgYXMgYm91bmRhcmllcyBmb3IgdGhlIHRvb2x0aXAuIEZvciBtb3JlIGluZm9ybWF0aW9uIHJlZmVyIHRvIFBvcHBlci5qcycKICAgKiAgICAgIFtib3VuZGFyaWVzRWxlbWVudCBkb2NzXShodHRwczovL3BvcHBlci5qcy5vcmcvcG9wcGVyLWRvY3VtZW50YXRpb24uaHRtbCkKICAgKiBAcGFyYW0ge051bWJlcnxTdHJpbmd9IG9wdGlvbnMub2Zmc2V0PTAgLSBPZmZzZXQgb2YgdGhlIHRvb2x0aXAgcmVsYXRpdmUgdG8gaXRzIHJlZmVyZW5jZS4gRm9yIG1vcmUgaW5mb3JtYXRpb24gcmVmZXIgdG8gUG9wcGVyLmpzJwogICAqICAgICAgW29mZnNldCBkb2NzXShodHRwczovL3BvcHBlci5qcy5vcmcvcG9wcGVyLWRvY3VtZW50YXRpb24uaHRtbCkKICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5wb3BwZXJPcHRpb25zPXt9IC0gUG9wcGVyIG9wdGlvbnMsIHdpbGwgYmUgcGFzc2VkIGRpcmVjdGx5IHRvIHBvcHBlciBpbnN0YW5jZS4gRm9yIG1vcmUgaW5mb3JtYXRpb24gcmVmZXIgdG8gUG9wcGVyLmpzJwogICAqICAgICAgW29wdGlvbnMgZG9jc10oaHR0cHM6Ly9wb3BwZXIuanMub3JnL3BvcHBlci1kb2N1bWVudGF0aW9uLmh0bWwpCiAgICogQHJldHVybiB7T2JqZWN0fSBpbnN0YW5jZSAtIFRoZSBnZW5lcmF0ZWQgdG9vbHRpcCBpbnN0YW5jZQogICAqLwogIGZ1bmN0aW9uIFRvb2x0aXAoX3JlZmVyZW5jZSwgX29wdGlvbnMpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRvb2x0aXApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiX2V2ZW50cyIsIFtdKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIl9zZXRUb29sdGlwTm9kZUV2ZW50IiwgZnVuY3Rpb24gKGV2dCwgcmVmZXJlbmNlLCBkZWxheSwgb3B0aW9ucykgewogICAgICB2YXIgcmVsYXRlZHJlZmVyZW5jZSA9IGV2dC5yZWxhdGVkcmVmZXJlbmNlIHx8IGV2dC50b0VsZW1lbnQgfHwgZXZ0LnJlbGF0ZWRUYXJnZXQ7CgogICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjayhldnQyKSB7CiAgICAgICAgdmFyIHJlbGF0ZWRyZWZlcmVuY2UyID0gZXZ0Mi5yZWxhdGVkcmVmZXJlbmNlIHx8IGV2dDIudG9FbGVtZW50IHx8IGV2dDIucmVsYXRlZFRhcmdldDsgLy8gUmVtb3ZlIGV2ZW50IGxpc3RlbmVyIGFmdGVyIGNhbGwKCiAgICAgICAgX3RoaXMuX3Rvb2x0aXBOb2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZ0LnR5cGUsIGNhbGxiYWNrKTsgLy8gSWYgdGhlIG5ldyByZWZlcmVuY2UgaXMgbm90IHRoZSByZWZlcmVuY2UgZWxlbWVudAoKCiAgICAgICAgaWYgKCFyZWZlcmVuY2UuY29udGFpbnMocmVsYXRlZHJlZmVyZW5jZTIpKSB7CiAgICAgICAgICAvLyBTY2hlZHVsZSB0byBoaWRlIHRvb2x0aXAKICAgICAgICAgIF90aGlzLl9zY2hlZHVsZUhpZGUocmVmZXJlbmNlLCBvcHRpb25zLmRlbGF5LCBvcHRpb25zLCBldnQyKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX3Rvb2x0aXBOb2RlLmNvbnRhaW5zKHJlbGF0ZWRyZWZlcmVuY2UpKSB7CiAgICAgICAgLy8gbGlzdGVuIHRvIG1vdXNlbGVhdmUgb24gdGhlIHRvb2x0aXAgZWxlbWVudCB0byBiZSBhYmxlIHRvIGhpZGUgdGhlIHRvb2x0aXAKICAgICAgICBfdGhpcy5fdG9vbHRpcE5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldnQudHlwZSwgY2FsbGJhY2spOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7IC8vIGFwcGx5IHVzZXIgb3B0aW9ucyBvdmVyIGRlZmF1bHQgb25lcwoKCiAgICBfb3B0aW9ucyA9IF9vYmplY3RTcHJlYWQyKHt9LCBERUZBVUxUX09QVElPTlMsIHt9LCBfb3B0aW9ucyk7CiAgICBfcmVmZXJlbmNlLmpxdWVyeSAmJiAoX3JlZmVyZW5jZSA9IF9yZWZlcmVuY2VbMF0pOwogICAgdGhpcy5zaG93ID0gdGhpcy5zaG93LmJpbmQodGhpcyk7CiAgICB0aGlzLmhpZGUgPSB0aGlzLmhpZGUuYmluZCh0aGlzKTsgLy8gY2FjaGUgcmVmZXJlbmNlIGFuZCBvcHRpb25zCgogICAgdGhpcy5yZWZlcmVuY2UgPSBfcmVmZXJlbmNlOwogICAgdGhpcy5vcHRpb25zID0gX29wdGlvbnM7IC8vIHNldCBpbml0aWFsIHN0YXRlCgogICAgdGhpcy5faXNPcGVuID0gZmFsc2U7CgogICAgdGhpcy5faW5pdCgpOwogIH0gLy8KICAvLyBQdWJsaWMgbWV0aG9kcwogIC8vCgogIC8qKgogICAqIFJldmVhbHMgYW4gZWxlbWVudCdzIHRvb2x0aXAuIFRoaXMgaXMgY29uc2lkZXJlZCBhICJtYW51YWwiIHRyaWdnZXJpbmcgb2YgdGhlIHRvb2x0aXAuCiAgICogVG9vbHRpcHMgd2l0aCB6ZXJvLWxlbmd0aCB0aXRsZXMgYXJlIG5ldmVyIGRpc3BsYXllZC4KICAgKiBAbWV0aG9kIFRvb2x0aXAjc2hvdwogICAqIEBtZW1iZXJvZiBUb29sdGlwCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoVG9vbHRpcCwgW3sKICAgIGtleTogInNob3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob3coKSB7CiAgICAgIHRoaXMuX3Nob3codGhpcy5yZWZlcmVuY2UsIHRoaXMub3B0aW9ucyk7CiAgICB9CiAgICAvKioKICAgICAqIEhpZGVzIGFuIGVsZW1lbnTigJlzIHRvb2x0aXAuIFRoaXMgaXMgY29uc2lkZXJlZCBhIOKAnG1hbnVhbOKAnSB0cmlnZ2VyaW5nIG9mIHRoZSB0b29sdGlwLgogICAgICogQG1ldGhvZCBUb29sdGlwI2hpZGUKICAgICAqIEBtZW1iZXJvZiBUb29sdGlwCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaGlkZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZSgpIHsKICAgICAgdGhpcy5faGlkZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBIaWRlcyBhbmQgZGVzdHJveXMgYW4gZWxlbWVudOKAmXMgdG9vbHRpcC4KICAgICAqIEBtZXRob2QgVG9vbHRpcCNkaXNwb3NlCiAgICAgKiBAbWVtYmVyb2YgVG9vbHRpcAogICAgICovCgogIH0sIHsKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIHRoaXMuX2Rpc3Bvc2UoKTsKICAgIH0KICAgIC8qKgogICAgICogVG9nZ2xlcyBhbiBlbGVtZW504oCZcyB0b29sdGlwLiBUaGlzIGlzIGNvbnNpZGVyZWQgYSDigJxtYW51YWzigJ0gdHJpZ2dlcmluZyBvZiB0aGUgdG9vbHRpcC4KICAgICAqIEBtZXRob2QgVG9vbHRpcCN0b2dnbGUKICAgICAqIEBtZW1iZXJvZiBUb29sdGlwCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidG9nZ2xlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGUoKSB7CiAgICAgIGlmICh0aGlzLl9pc09wZW4pIHsKICAgICAgICByZXR1cm4gdGhpcy5oaWRlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc2hvdygpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0Q2xhc3NlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q2xhc3NlcyhjbGFzc2VzKSB7CiAgICAgIHRoaXMuX2NsYXNzZXMgPSBjbGFzc2VzOwogICAgfQogIH0sIHsKICAgIGtleTogInNldENvbnRlbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldENvbnRlbnQoY29udGVudCkgewogICAgICB0aGlzLm9wdGlvbnMudGl0bGUgPSBjb250ZW50OwoKICAgICAgaWYgKHRoaXMuX3Rvb2x0aXBOb2RlKSB7CiAgICAgICAgdGhpcy5fc2V0Q29udGVudChjb250ZW50LCB0aGlzLm9wdGlvbnMpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0T3B0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIHZhciBjbGFzc2VzVXBkYXRlZCA9IGZhbHNlOwogICAgICB2YXIgY2xhc3NlcyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5jbGFzc2VzIHx8IGRpcmVjdGl2ZS5vcHRpb25zLmRlZmF1bHRDbGFzczsKCiAgICAgIGlmICghaXNFcXVhbF8xKHRoaXMuX2NsYXNzZXMsIGNsYXNzZXMpKSB7CiAgICAgICAgdGhpcy5zZXRDbGFzc2VzKGNsYXNzZXMpOwogICAgICAgIGNsYXNzZXNVcGRhdGVkID0gdHJ1ZTsKICAgICAgfQoKICAgICAgb3B0aW9ucyA9IGdldE9wdGlvbnMob3B0aW9ucyk7CiAgICAgIHZhciBuZWVkUG9wcGVyVXBkYXRlID0gZmFsc2U7CiAgICAgIHZhciBuZWVkUmVzdGFydCA9IGZhbHNlOwoKICAgICAgaWYgKHRoaXMub3B0aW9ucy5vZmZzZXQgIT09IG9wdGlvbnMub2Zmc2V0IHx8IHRoaXMub3B0aW9ucy5wbGFjZW1lbnQgIT09IG9wdGlvbnMucGxhY2VtZW50KSB7CiAgICAgICAgbmVlZFBvcHBlclVwZGF0ZSA9IHRydWU7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm9wdGlvbnMudGVtcGxhdGUgIT09IG9wdGlvbnMudGVtcGxhdGUgfHwgdGhpcy5vcHRpb25zLnRyaWdnZXIgIT09IG9wdGlvbnMudHJpZ2dlciB8fCB0aGlzLm9wdGlvbnMuY29udGFpbmVyICE9PSBvcHRpb25zLmNvbnRhaW5lciB8fCBjbGFzc2VzVXBkYXRlZCkgewogICAgICAgIG5lZWRSZXN0YXJ0ID0gdHJ1ZTsKICAgICAgfQoKICAgICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMpIHsKICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IG9wdGlvbnNba2V5XTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX3Rvb2x0aXBOb2RlKSB7CiAgICAgICAgaWYgKG5lZWRSZXN0YXJ0KSB7CiAgICAgICAgICB2YXIgaXNPcGVuID0gdGhpcy5faXNPcGVuOwogICAgICAgICAgdGhpcy5kaXNwb3NlKCk7CgogICAgICAgICAgdGhpcy5faW5pdCgpOwoKICAgICAgICAgIGlmIChpc09wZW4pIHsKICAgICAgICAgICAgdGhpcy5zaG93KCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChuZWVkUG9wcGVyVXBkYXRlKSB7CiAgICAgICAgICB0aGlzLnBvcHBlckluc3RhbmNlLnVwZGF0ZSgpOwogICAgICAgIH0KICAgICAgfQogICAgfSAvLwogICAgLy8gUHJpdmF0ZSBtZXRob2RzCiAgICAvLwoKICB9LCB7CiAgICBrZXk6ICJfaW5pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2luaXQoKSB7CiAgICAgIC8vIGdldCBldmVudHMgbGlzdAogICAgICB2YXIgZXZlbnRzID0gdHlwZW9mIHRoaXMub3B0aW9ucy50cmlnZ2VyID09PSAnc3RyaW5nJyA/IHRoaXMub3B0aW9ucy50cmlnZ2VyLnNwbGl0KCcgJykgOiBbXTsKICAgICAgdGhpcy5faXNEaXNwb3NlZCA9IGZhbHNlOwogICAgICB0aGlzLl9lbmFibGVEb2N1bWVudFRvdWNoID0gZXZlbnRzLmluZGV4T2YoJ21hbnVhbCcpID09PSAtMTsKICAgICAgZXZlbnRzID0gZXZlbnRzLmZpbHRlcihmdW5jdGlvbiAodHJpZ2dlcikgewogICAgICAgIHJldHVybiBbJ2NsaWNrJywgJ2hvdmVyJywgJ2ZvY3VzJ10uaW5kZXhPZih0cmlnZ2VyKSAhPT0gLTE7CiAgICAgIH0pOyAvLyBzZXQgZXZlbnQgbGlzdGVuZXJzCgogICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLnJlZmVyZW5jZSwgZXZlbnRzLCB0aGlzLm9wdGlvbnMpOyAvLyB0aXRsZSBhdHRyaWJ1dGUKCgogICAgICB0aGlzLiRfb3JpZ2luYWxUaXRsZSA9IHRoaXMucmVmZXJlbmNlLmdldEF0dHJpYnV0ZSgndGl0bGUnKTsKICAgICAgdGhpcy5yZWZlcmVuY2UucmVtb3ZlQXR0cmlidXRlKCd0aXRsZScpOwogICAgICB0aGlzLnJlZmVyZW5jZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnLCB0aGlzLiRfb3JpZ2luYWxUaXRsZSk7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZXMgYSBuZXcgdG9vbHRpcCBub2RlCiAgICAgKiBAbWVtYmVyb2YgVG9vbHRpcAogICAgICogQHByaXZhdGUKICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHJlZmVyZW5jZQogICAgICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlCiAgICAgKiBAcGFyYW0ge1N0cmluZ3xIVE1MRWxlbWVudHxUaXRsZUZ1bmN0aW9ufSB0aXRsZQogICAgICogQHBhcmFtIHtCb29sZWFufSBhbGxvd0h0bWwKICAgICAqIEByZXR1cm4ge0hUTUxlbGVtZW50fSB0b29sdGlwTm9kZQogICAgICovCgogIH0sIHsKICAgIGtleTogIl9jcmVhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGUocmVmZXJlbmNlLCB0ZW1wbGF0ZSkgewogICAgICAvLyBjcmVhdGUgdG9vbHRpcCBlbGVtZW50CiAgICAgIHZhciB0b29sdGlwR2VuZXJhdG9yID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICB0b29sdGlwR2VuZXJhdG9yLmlubmVySFRNTCA9IHRlbXBsYXRlLnRyaW0oKTsKICAgICAgdmFyIHRvb2x0aXBOb2RlID0gdG9vbHRpcEdlbmVyYXRvci5jaGlsZE5vZGVzWzBdOyAvLyBhZGQgdW5pcXVlIElEIHRvIG91ciB0b29sdGlwIChuZWVkZWQgZm9yIGFjY2Vzc2liaWxpdHkgcmVhc29ucykKCiAgICAgIHRvb2x0aXBOb2RlLmlkID0gInRvb2x0aXBfIi5jb25jYXQoTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDEwKSk7IC8vIEluaXRpYWxseSBoaWRlIHRoZSB0b29sdGlwCiAgICAgIC8vIFRoZSBhdHRyaWJ1dGUgd2lsbCBiZSBzd2l0Y2hlZCBpbiBhIG5leHQgZnJhbWUgc28KICAgICAgLy8gQ1NTIHRyYW5zaXRpb25zIGNhbiBwbGF5CgogICAgICB0b29sdGlwTm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTsKCiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXV0b0hpZGUgJiYgdGhpcy5vcHRpb25zLnRyaWdnZXIuaW5kZXhPZignaG92ZXInKSAhPT0gLTEpIHsKICAgICAgICB0b29sdGlwTm9kZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5oaWRlKTsKICAgICAgICB0b29sdGlwTm9kZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGlkZSk7CiAgICAgIH0gLy8gcmV0dXJuIHRoZSBnZW5lcmF0ZWQgdG9vbHRpcCBub2RlCgoKICAgICAgcmV0dXJuIHRvb2x0aXBOb2RlOwogICAgfQogIH0sIHsKICAgIGtleTogIl9zZXRDb250ZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0Q29udGVudChjb250ZW50LCBvcHRpb25zKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5hc3luY0NvbnRlbnQgPSBmYWxzZTsKCiAgICAgIHRoaXMuX2FwcGx5Q29udGVudChjb250ZW50LCBvcHRpb25zKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIucG9wcGVySW5zdGFuY2UudXBkYXRlKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIl9hcHBseUNvbnRlbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBseUNvbnRlbnQodGl0bGUsIG9wdGlvbnMpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBhbGxvd0h0bWwgPSBvcHRpb25zLmh0bWw7CiAgICAgICAgdmFyIHJvb3ROb2RlID0gX3RoaXMzLl90b29sdGlwTm9kZTsKICAgICAgICBpZiAoIXJvb3ROb2RlKSByZXR1cm47CiAgICAgICAgdmFyIHRpdGxlTm9kZSA9IHJvb3ROb2RlLnF1ZXJ5U2VsZWN0b3IoX3RoaXMzLm9wdGlvbnMuaW5uZXJTZWxlY3Rvcik7CgogICAgICAgIGlmICh0aXRsZS5ub2RlVHlwZSA9PT0gMSkgewogICAgICAgICAgLy8gaWYgdGl0bGUgaXMgYSBub2RlLCBhcHBlbmQgaXQgb25seSBpZiBhbGxvd0h0bWwgaXMgdHJ1ZQogICAgICAgICAgaWYgKGFsbG93SHRtbCkgewogICAgICAgICAgICB3aGlsZSAodGl0bGVOb2RlLmZpcnN0Q2hpbGQpIHsKICAgICAgICAgICAgICB0aXRsZU5vZGUucmVtb3ZlQ2hpbGQodGl0bGVOb2RlLmZpcnN0Q2hpbGQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aXRsZU5vZGUuYXBwZW5kQ2hpbGQodGl0bGUpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRpdGxlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAvLyBpZiB0aXRsZSBpcyBhIGZ1bmN0aW9uLCBjYWxsIGl0IGFuZCBzZXQgaW5uZXJUZXh0IG9yIGlubmVySHRtbCBkZXBlbmRpbmcgYnkgYGFsbG93SHRtbGAgdmFsdWUKICAgICAgICAgIHZhciByZXN1bHQgPSB0aXRsZSgpOwoKICAgICAgICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIF90aGlzMy5hc3luY0NvbnRlbnQgPSB0cnVlOwogICAgICAgICAgICBvcHRpb25zLmxvYWRpbmdDbGFzcyAmJiBhZGRDbGFzc2VzKHJvb3ROb2RlLCBvcHRpb25zLmxvYWRpbmdDbGFzcyk7CgogICAgICAgICAgICBpZiAob3B0aW9ucy5sb2FkaW5nQ29udGVudCkgewogICAgICAgICAgICAgIF90aGlzMy5fYXBwbHlDb250ZW50KG9wdGlvbnMubG9hZGluZ0NvbnRlbnQsIG9wdGlvbnMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXN1bHQudGhlbihmdW5jdGlvbiAoYXN5bmNSZXN1bHQpIHsKICAgICAgICAgICAgICBvcHRpb25zLmxvYWRpbmdDbGFzcyAmJiByZW1vdmVDbGFzc2VzKHJvb3ROb2RlLCBvcHRpb25zLmxvYWRpbmdDbGFzcyk7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5fYXBwbHlDb250ZW50KGFzeW5jUmVzdWx0LCBvcHRpb25zKTsKICAgICAgICAgICAgfSkudGhlbihyZXNvbHZlKVsiY2F0Y2giXShyZWplY3QpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMzLl9hcHBseUNvbnRlbnQocmVzdWx0LCBvcHRpb25zKS50aGVuKHJlc29sdmUpWyJjYXRjaCJdKHJlamVjdCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBpZiBpdCdzIGp1c3QgYSBzaW1wbGUgdGV4dCwgc2V0IGlubmVyVGV4dCBvciBpbm5lckh0bWwgZGVwZW5kaW5nIGJ5IGBhbGxvd0h0bWxgIHZhbHVlCiAgICAgICAgICBhbGxvd0h0bWwgPyB0aXRsZU5vZGUuaW5uZXJIVE1MID0gdGl0bGUgOiB0aXRsZU5vZGUuaW5uZXJUZXh0ID0gdGl0bGU7CiAgICAgICAgfQoKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIl9zaG93IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2hvdyhyZWZlcmVuY2UsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMuY29udGFpbmVyID09PSAnc3RyaW5nJykgewogICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMuY29udGFpbmVyKTsKICAgICAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuOwogICAgICB9CgogICAgICBjbGVhclRpbWVvdXQodGhpcy5fZGlzcG9zZVRpbWVyKTsKICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpOwogICAgICBkZWxldGUgb3B0aW9ucy5vZmZzZXQ7CiAgICAgIHZhciB1cGRhdGVDbGFzc2VzID0gdHJ1ZTsKCiAgICAgIGlmICh0aGlzLl90b29sdGlwTm9kZSkgewogICAgICAgIGFkZENsYXNzZXModGhpcy5fdG9vbHRpcE5vZGUsIHRoaXMuX2NsYXNzZXMpOwogICAgICAgIHVwZGF0ZUNsYXNzZXMgPSBmYWxzZTsKICAgICAgfQoKICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2Vuc3VyZVNob3duKHJlZmVyZW5jZSwgb3B0aW9ucyk7CgogICAgICBpZiAodXBkYXRlQ2xhc3NlcyAmJiB0aGlzLl90b29sdGlwTm9kZSkgewogICAgICAgIGFkZENsYXNzZXModGhpcy5fdG9vbHRpcE5vZGUsIHRoaXMuX2NsYXNzZXMpOwogICAgICB9CgogICAgICBhZGRDbGFzc2VzKHJlZmVyZW5jZSwgWyd2LXRvb2x0aXAtb3BlbiddKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZW5zdXJlU2hvd24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9lbnN1cmVTaG93bihyZWZlcmVuY2UsIG9wdGlvbnMpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7IC8vIGRvbid0IHNob3cgaWYgaXQncyBhbHJlYWR5IHZpc2libGUKCgogICAgICBpZiAodGhpcy5faXNPcGVuKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIHRoaXMuX2lzT3BlbiA9IHRydWU7CiAgICAgIG9wZW5Ub29sdGlwcy5wdXNoKHRoaXMpOyAvLyBpZiB0aGUgdG9vbHRpcE5vZGUgYWxyZWFkeSBleGlzdHMsIGp1c3Qgc2hvdyBpdAoKICAgICAgaWYgKHRoaXMuX3Rvb2x0aXBOb2RlKSB7CiAgICAgICAgdGhpcy5fdG9vbHRpcE5vZGUuc3R5bGUuZGlzcGxheSA9ICcnOwoKICAgICAgICB0aGlzLl90b29sdGlwTm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7CgogICAgICAgIHRoaXMucG9wcGVySW5zdGFuY2UuZW5hYmxlRXZlbnRMaXN0ZW5lcnMoKTsKICAgICAgICB0aGlzLnBvcHBlckluc3RhbmNlLnVwZGF0ZSgpOwoKICAgICAgICBpZiAodGhpcy5hc3luY0NvbnRlbnQpIHsKICAgICAgICAgIHRoaXMuX3NldENvbnRlbnQob3B0aW9ucy50aXRsZSwgb3B0aW9ucyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfSAvLyBnZXQgdGl0bGUKCgogICAgICB2YXIgdGl0bGUgPSByZWZlcmVuY2UuZ2V0QXR0cmlidXRlKCd0aXRsZScpIHx8IG9wdGlvbnMudGl0bGU7IC8vIGRvbid0IHNob3cgdG9vbHRpcCBpZiBubyB0aXRsZSBpcyBkZWZpbmVkCgogICAgICBpZiAoIXRpdGxlKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0gLy8gY3JlYXRlIHRvb2x0aXAgbm9kZQoKCiAgICAgIHZhciB0b29sdGlwTm9kZSA9IHRoaXMuX2NyZWF0ZShyZWZlcmVuY2UsIG9wdGlvbnMudGVtcGxhdGUpOwoKICAgICAgdGhpcy5fdG9vbHRpcE5vZGUgPSB0b29sdGlwTm9kZTsgLy8gQWRkIGBhcmlhLWRlc2NyaWJlZGJ5YCB0byBvdXIgcmVmZXJlbmNlIGVsZW1lbnQgZm9yIGFjY2Vzc2liaWxpdHkgcmVhc29ucwoKICAgICAgcmVmZXJlbmNlLnNldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScsIHRvb2x0aXBOb2RlLmlkKTsgLy8gYXBwZW5kIHRvb2x0aXAgdG8gY29udGFpbmVyCgogICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5fZmluZENvbnRhaW5lcihvcHRpb25zLmNvbnRhaW5lciwgcmVmZXJlbmNlKTsKCiAgICAgIHRoaXMuX2FwcGVuZCh0b29sdGlwTm9kZSwgY29udGFpbmVyKTsKCiAgICAgIHZhciBwb3BwZXJPcHRpb25zID0gX29iamVjdFNwcmVhZDIoe30sIG9wdGlvbnMucG9wcGVyT3B0aW9ucywgewogICAgICAgIHBsYWNlbWVudDogb3B0aW9ucy5wbGFjZW1lbnQKICAgICAgfSk7CgogICAgICBwb3BwZXJPcHRpb25zLm1vZGlmaWVycyA9IF9vYmplY3RTcHJlYWQyKHt9LCBwb3BwZXJPcHRpb25zLm1vZGlmaWVycywgewogICAgICAgIGFycm93OiB7CiAgICAgICAgICBlbGVtZW50OiB0aGlzLm9wdGlvbnMuYXJyb3dTZWxlY3RvcgogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAob3B0aW9ucy5ib3VuZGFyaWVzRWxlbWVudCkgewogICAgICAgIHBvcHBlck9wdGlvbnMubW9kaWZpZXJzLnByZXZlbnRPdmVyZmxvdyA9IHsKICAgICAgICAgIGJvdW5kYXJpZXNFbGVtZW50OiBvcHRpb25zLmJvdW5kYXJpZXNFbGVtZW50CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdGhpcy5wb3BwZXJJbnN0YW5jZSA9IG5ldyBQb3BwZXIocmVmZXJlbmNlLCB0b29sdGlwTm9kZSwgcG9wcGVyT3B0aW9ucyk7CgogICAgICB0aGlzLl9zZXRDb250ZW50KHRpdGxlLCBvcHRpb25zKTsgLy8gRml4IHBvc2l0aW9uCgoKICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIV90aGlzNC5faXNEaXNwb3NlZCAmJiBfdGhpczQucG9wcGVySW5zdGFuY2UpIHsKICAgICAgICAgIF90aGlzNC5wb3BwZXJJbnN0YW5jZS51cGRhdGUoKTsgLy8gU2hvdyB0aGUgdG9vbHRpcAoKCiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIV90aGlzNC5faXNEaXNwb3NlZCkgewogICAgICAgICAgICAgIF90aGlzNC5faXNPcGVuICYmIHRvb2x0aXBOb2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczQuZGlzcG9zZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXM0LmRpc3Bvc2UoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfbm9Mb25nZXJPcGVuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbm9Mb25nZXJPcGVuKCkgewogICAgICB2YXIgaW5kZXggPSBvcGVuVG9vbHRpcHMuaW5kZXhPZih0aGlzKTsKCiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICBvcGVuVG9vbHRpcHMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIl9oaWRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaGlkZSgpCiAgICAvKiByZWZlcmVuY2UsIG9wdGlvbnMgKi8KICAgIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7IC8vIGRvbid0IGhpZGUgaWYgaXQncyBhbHJlYWR5IGhpZGRlbgoKCiAgICAgIGlmICghdGhpcy5faXNPcGVuKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlOwoKICAgICAgdGhpcy5fbm9Mb25nZXJPcGVuKCk7IC8vIGhpZGUgdG9vbHRpcE5vZGUKCgogICAgICB0aGlzLl90b29sdGlwTm9kZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwoKICAgICAgdGhpcy5fdG9vbHRpcE5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7CgogICAgICB0aGlzLnBvcHBlckluc3RhbmNlLmRpc2FibGVFdmVudExpc3RlbmVycygpOwogICAgICBjbGVhclRpbWVvdXQodGhpcy5fZGlzcG9zZVRpbWVyKTsKICAgICAgdmFyIGRpc3Bvc2VUaW1lID0gZGlyZWN0aXZlLm9wdGlvbnMuZGlzcG9zZVRpbWVvdXQ7CgogICAgICBpZiAoZGlzcG9zZVRpbWUgIT09IG51bGwpIHsKICAgICAgICB0aGlzLl9kaXNwb3NlVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChfdGhpczUuX3Rvb2x0aXBOb2RlKSB7CiAgICAgICAgICAgIF90aGlzNS5fdG9vbHRpcE5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIF90aGlzNS5oaWRlKTsKCiAgICAgICAgICAgIF90aGlzNS5fdG9vbHRpcE5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGhpczUuaGlkZSk7IC8vIERvbid0IHJlbW92ZSBwb3BwZXIgaW5zdGFuY2UsIGp1c3QgdGhlIEhUTUwgZWxlbWVudAoKCiAgICAgICAgICAgIF90aGlzNS5fcmVtb3ZlVG9vbHRpcE5vZGUoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBkaXNwb3NlVGltZSk7CiAgICAgIH0KCiAgICAgIHJlbW92ZUNsYXNzZXModGhpcy5yZWZlcmVuY2UsIFsndi10b29sdGlwLW9wZW4nXSk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogIl9yZW1vdmVUb29sdGlwTm9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZVRvb2x0aXBOb2RlKCkgewogICAgICBpZiAoIXRoaXMuX3Rvb2x0aXBOb2RlKSByZXR1cm47CiAgICAgIHZhciBwYXJlbnROb2RlID0gdGhpcy5fdG9vbHRpcE5vZGUucGFyZW50Tm9kZTsKCiAgICAgIGlmIChwYXJlbnROb2RlKSB7CiAgICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl90b29sdGlwTm9kZSk7CiAgICAgICAgdGhpcy5yZWZlcmVuY2UucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5Jyk7CiAgICAgIH0KCiAgICAgIHRoaXMuX3Rvb2x0aXBOb2RlID0gbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2Rpc3Bvc2UoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdGhpcy5faXNEaXNwb3NlZCA9IHRydWU7CiAgICAgIHRoaXMucmVmZXJlbmNlLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1vcmlnaW5hbC10aXRsZScpOwoKICAgICAgaWYgKHRoaXMuJF9vcmlnaW5hbFRpdGxlKSB7CiAgICAgICAgdGhpcy5yZWZlcmVuY2Uuc2V0QXR0cmlidXRlKCd0aXRsZScsIHRoaXMuJF9vcmlnaW5hbFRpdGxlKTsKICAgICAgfSAvLyByZW1vdmUgZXZlbnQgbGlzdGVuZXJzIGZpcnN0IHRvIHByZXZlbnQgYW55IHVuZXhwZWN0ZWQgYmVoYXZpb3VyCgoKICAgICAgdGhpcy5fZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgZnVuYyA9IF9yZWYuZnVuYywKICAgICAgICAgICAgZXZlbnQgPSBfcmVmLmV2ZW50OwoKICAgICAgICBfdGhpczYucmVmZXJlbmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGZ1bmMpOwogICAgICB9KTsKCiAgICAgIHRoaXMuX2V2ZW50cyA9IFtdOwoKICAgICAgaWYgKHRoaXMuX3Rvb2x0aXBOb2RlKSB7CiAgICAgICAgdGhpcy5faGlkZSgpOwoKICAgICAgICB0aGlzLl90b29sdGlwTm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5oaWRlKTsKCiAgICAgICAgdGhpcy5fdG9vbHRpcE5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhpZGUpOyAvLyBkZXN0cm95IGluc3RhbmNlCgoKICAgICAgICB0aGlzLnBvcHBlckluc3RhbmNlLmRlc3Ryb3koKTsgLy8gZGVzdHJveSB0b29sdGlwTm9kZSBpZiByZW1vdmVPbkRlc3Ryb3kgaXMgbm90IHNldCwgYXMgcG9wcGVySW5zdGFuY2UuZGVzdHJveSgpIGFscmVhZHkgcmVtb3ZlcyB0aGUgZWxlbWVudAoKICAgICAgICBpZiAoIXRoaXMucG9wcGVySW5zdGFuY2Uub3B0aW9ucy5yZW1vdmVPbkRlc3Ryb3kpIHsKICAgICAgICAgIHRoaXMuX3JlbW92ZVRvb2x0aXBOb2RlKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX25vTG9uZ2VyT3BlbigpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZmluZENvbnRhaW5lciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpbmRDb250YWluZXIoY29udGFpbmVyLCByZWZlcmVuY2UpIHsKICAgICAgLy8gaWYgY29udGFpbmVyIGlzIGEgcXVlcnksIGdldCB0aGUgcmVsYXRpdmUgZWxlbWVudAogICAgICBpZiAodHlwZW9mIGNvbnRhaW5lciA9PT0gJ3N0cmluZycpIHsKICAgICAgICBjb250YWluZXIgPSB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpOwogICAgICB9IGVsc2UgaWYgKGNvbnRhaW5lciA9PT0gZmFsc2UpIHsKICAgICAgICAvLyBpZiBjb250YWluZXIgaXMgYGZhbHNlYCwgc2V0IGl0IHRvIHJlZmVyZW5jZSBwYXJlbnQKICAgICAgICBjb250YWluZXIgPSByZWZlcmVuY2UucGFyZW50Tm9kZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0KICAgIC8qKgogICAgICogQXBwZW5kIHRvb2x0aXAgdG8gY29udGFpbmVyCiAgICAgKiBAbWVtYmVyb2YgVG9vbHRpcAogICAgICogQHByaXZhdGUKICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRvb2x0aXAKICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8U3RyaW5nfGZhbHNlfSBjb250YWluZXIKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJfYXBwZW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfYXBwZW5kKHRvb2x0aXBOb2RlLCBjb250YWluZXIpIHsKICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRvb2x0aXBOb2RlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfc2V0RXZlbnRMaXN0ZW5lcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRFdmVudExpc3RlbmVycyhyZWZlcmVuY2UsIGV2ZW50cywgb3B0aW9ucykgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciBkaXJlY3RFdmVudHMgPSBbXTsKICAgICAgdmFyIG9wcG9zaXRlRXZlbnRzID0gW107CiAgICAgIGV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHN3aXRjaCAoZXZlbnQpIHsKICAgICAgICAgIGNhc2UgJ2hvdmVyJzoKICAgICAgICAgICAgZGlyZWN0RXZlbnRzLnB1c2goJ21vdXNlZW50ZXInKTsKICAgICAgICAgICAgb3Bwb3NpdGVFdmVudHMucHVzaCgnbW91c2VsZWF2ZScpOwogICAgICAgICAgICBpZiAoX3RoaXM3Lm9wdGlvbnMuaGlkZU9uVGFyZ2V0Q2xpY2spIG9wcG9zaXRlRXZlbnRzLnB1c2goJ2NsaWNrJyk7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ2ZvY3VzJzoKICAgICAgICAgICAgZGlyZWN0RXZlbnRzLnB1c2goJ2ZvY3VzJyk7CiAgICAgICAgICAgIG9wcG9zaXRlRXZlbnRzLnB1c2goJ2JsdXInKTsKICAgICAgICAgICAgaWYgKF90aGlzNy5vcHRpb25zLmhpZGVPblRhcmdldENsaWNrKSBvcHBvc2l0ZUV2ZW50cy5wdXNoKCdjbGljaycpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdjbGljayc6CiAgICAgICAgICAgIGRpcmVjdEV2ZW50cy5wdXNoKCdjbGljaycpOwogICAgICAgICAgICBvcHBvc2l0ZUV2ZW50cy5wdXNoKCdjbGljaycpOwogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0pOyAvLyBzY2hlZHVsZSBzaG93IHRvb2x0aXAKCiAgICAgIGRpcmVjdEV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciBmdW5jID0gZnVuY3Rpb24gZnVuYyhldnQpIHsKICAgICAgICAgIGlmIChfdGhpczcuX2lzT3BlbiA9PT0gdHJ1ZSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgZXZ0LnVzZWRCeVRvb2x0aXAgPSB0cnVlOwoKICAgICAgICAgIF90aGlzNy5fc2NoZWR1bGVTaG93KHJlZmVyZW5jZSwgb3B0aW9ucy5kZWxheSwgb3B0aW9ucywgZXZ0KTsKICAgICAgICB9OwoKICAgICAgICBfdGhpczcuX2V2ZW50cy5wdXNoKHsKICAgICAgICAgIGV2ZW50OiBldmVudCwKICAgICAgICAgIGZ1bmM6IGZ1bmMKICAgICAgICB9KTsKCiAgICAgICAgcmVmZXJlbmNlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGZ1bmMpOwogICAgICB9KTsgLy8gc2NoZWR1bGUgaGlkZSB0b29sdGlwCgogICAgICBvcHBvc2l0ZUV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciBmdW5jID0gZnVuY3Rpb24gZnVuYyhldnQpIHsKICAgICAgICAgIGlmIChldnQudXNlZEJ5VG9vbHRpcCA9PT0gdHJ1ZSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXM3Ll9zY2hlZHVsZUhpZGUocmVmZXJlbmNlLCBvcHRpb25zLmRlbGF5LCBvcHRpb25zLCBldnQpOwogICAgICAgIH07CgogICAgICAgIF90aGlzNy5fZXZlbnRzLnB1c2goewogICAgICAgICAgZXZlbnQ6IGV2ZW50LAogICAgICAgICAgZnVuYzogZnVuYwogICAgICAgIH0pOwoKICAgICAgICByZWZlcmVuY2UuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZnVuYyk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIl9vbkRvY3VtZW50VG91Y2giLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkRvY3VtZW50VG91Y2goZXZlbnQpIHsKICAgICAgaWYgKHRoaXMuX2VuYWJsZURvY3VtZW50VG91Y2gpIHsKICAgICAgICB0aGlzLl9zY2hlZHVsZUhpZGUodGhpcy5yZWZlcmVuY2UsIHRoaXMub3B0aW9ucy5kZWxheSwgdGhpcy5vcHRpb25zLCBldmVudCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfc2NoZWR1bGVTaG93IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2NoZWR1bGVTaG93KHJlZmVyZW5jZSwgZGVsYXksIG9wdGlvbnMKICAgIC8qLCBldnQgKi8KICAgICkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsgLy8gZGVmYXVsdHMgdG8gMAoKCiAgICAgIHZhciBjb21wdXRlZERlbGF5ID0gZGVsYXkgJiYgZGVsYXkuc2hvdyB8fCBkZWxheSB8fCAwOwogICAgICBjbGVhclRpbWVvdXQodGhpcy5fc2NoZWR1bGVUaW1lcik7CiAgICAgIHRoaXMuX3NjaGVkdWxlVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzOC5fc2hvdyhyZWZlcmVuY2UsIG9wdGlvbnMpOwogICAgICB9LCBjb21wdXRlZERlbGF5KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfc2NoZWR1bGVIaWRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2NoZWR1bGVIaWRlKHJlZmVyZW5jZSwgZGVsYXksIG9wdGlvbnMsIGV2dCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsgLy8gZGVmYXVsdHMgdG8gMAoKCiAgICAgIHZhciBjb21wdXRlZERlbGF5ID0gZGVsYXkgJiYgZGVsYXkuaGlkZSB8fCBkZWxheSB8fCAwOwogICAgICBjbGVhclRpbWVvdXQodGhpcy5fc2NoZWR1bGVUaW1lcik7CiAgICAgIHRoaXMuX3NjaGVkdWxlVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzOS5faXNPcGVuID09PSBmYWxzZSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFfdGhpczkuX3Rvb2x0aXBOb2RlLm93bmVyRG9jdW1lbnQuYm9keS5jb250YWlucyhfdGhpczkuX3Rvb2x0aXBOb2RlKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy8gaWYgd2UgYXJlIGhpZGluZyBiZWNhdXNlIG9mIGEgbW91c2VsZWF2ZSwgd2UgbXVzdCBjaGVjayB0aGF0IHRoZSBuZXcKICAgICAgICAvLyByZWZlcmVuY2UgaXNuJ3QgdGhlIHRvb2x0aXAsIGJlY2F1c2UgaW4gdGhpcyBjYXNlIHdlIGRvbid0IHdhbnQgdG8gaGlkZSBpdAoKCiAgICAgICAgaWYgKGV2dC50eXBlID09PSAnbW91c2VsZWF2ZScpIHsKICAgICAgICAgIHZhciBpc1NldCA9IF90aGlzOS5fc2V0VG9vbHRpcE5vZGVFdmVudChldnQsIHJlZmVyZW5jZSwgZGVsYXksIG9wdGlvbnMpOyAvLyBpZiB3ZSBzZXQgdGhlIG5ldyBldmVudCwgZG9uJ3QgaGlkZSB0aGUgdG9vbHRpcCB5ZXQKICAgICAgICAgIC8vIHRoZSBuZXcgZXZlbnQgd2lsbCB0YWtlIGNhcmUgdG8gaGlkZSBpdCBpZiBuZWNlc3NhcnkKCgogICAgICAgICAgaWYgKGlzU2V0KSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIF90aGlzOS5faGlkZShyZWZlcmVuY2UsIG9wdGlvbnMpOwogICAgICB9LCBjb21wdXRlZERlbGF5KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBUb29sdGlwOwp9KCk7IC8vIEhpZGUgdG9vbHRpcHMgb24gdG91Y2ggZGV2aWNlcwoKCmlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7CiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChldmVudCkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcGVuVG9vbHRpcHMubGVuZ3RoOyBpKyspIHsKICAgICAgb3BlblRvb2x0aXBzW2ldLl9vbkRvY3VtZW50VG91Y2goZXZlbnQpOwogICAgfQogIH0sIHN1cHBvcnRzUGFzc2l2ZSA/IHsKICAgIHBhc3NpdmU6IHRydWUsCiAgICBjYXB0dXJlOiB0cnVlCiAgfSA6IHRydWUpOwp9Ci8qKgogKiBQbGFjZW1lbnQgZnVuY3Rpb24sIGl0cyBjb250ZXh0IGlzIHRoZSBUb29sdGlwIGluc3RhbmNlLgogKiBAbWVtYmVyb2YgVG9vbHRpcAogKiBAY2FsbGJhY2sgUGxhY2VtZW50RnVuY3Rpb24KICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdG9vbHRpcCAtIHRvb2x0aXAgRE9NIG5vZGUuCiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHJlZmVyZW5jZSAtIHJlZmVyZW5jZSBET00gbm9kZS4KICogQHJldHVybiB7U3RyaW5nfSBwbGFjZW1lbnQgLSBPbmUgb2YgdGhlIGFsbG93ZWQgcGxhY2VtZW50IG9wdGlvbnMuCiAqLwoKLyoqCiAqIFRpdGxlIGZ1bmN0aW9uLCBpdHMgY29udGV4dCBpcyB0aGUgVG9vbHRpcCBpbnN0YW5jZS4KICogQG1lbWJlcm9mIFRvb2x0aXAKICogQGNhbGxiYWNrIFRpdGxlRnVuY3Rpb24KICogQHJldHVybiB7U3RyaW5nfSBwbGFjZW1lbnQgLSBUaGUgZGVzaXJlZCB0aXRsZS4KICovCgoKdmFyIHN0YXRlID0gewogIGVuYWJsZWQ6IHRydWUKfTsKdmFyIHBvc2l0aW9ucyA9IFsndG9wJywgJ3RvcC1zdGFydCcsICd0b3AtZW5kJywgJ3JpZ2h0JywgJ3JpZ2h0LXN0YXJ0JywgJ3JpZ2h0LWVuZCcsICdib3R0b20nLCAnYm90dG9tLXN0YXJ0JywgJ2JvdHRvbS1lbmQnLCAnbGVmdCcsICdsZWZ0LXN0YXJ0JywgJ2xlZnQtZW5kJ107CnZhciBkZWZhdWx0T3B0aW9ucyA9IHsKICAvLyBEZWZhdWx0IHRvb2x0aXAgcGxhY2VtZW50IHJlbGF0aXZlIHRvIHRhcmdldCBlbGVtZW50CiAgZGVmYXVsdFBsYWNlbWVudDogJ3RvcCcsCiAgLy8gRGVmYXVsdCBDU1MgY2xhc3NlcyBhcHBsaWVkIHRvIHRoZSB0b29sdGlwIGVsZW1lbnQKICBkZWZhdWx0Q2xhc3M6ICd2dWUtdG9vbHRpcC10aGVtZScsCiAgLy8gRGVmYXVsdCBDU1MgY2xhc3NlcyBhcHBsaWVkIHRvIHRoZSB0YXJnZXQgZWxlbWVudCBvZiB0aGUgdG9vbHRpcAogIGRlZmF1bHRUYXJnZXRDbGFzczogJ2hhcy10b29sdGlwJywKICAvLyBJcyB0aGUgY29udGVudCBIVE1MIGJ5IGRlZmF1bHQ/CiAgZGVmYXVsdEh0bWw6IHRydWUsCiAgLy8gRGVmYXVsdCBIVE1MIHRlbXBsYXRlIG9mIHRoZSB0b29sdGlwIGVsZW1lbnQKICAvLyBJdCBtdXN0IGluY2x1ZGUgYHRvb2x0aXAtYXJyb3dgICYgYHRvb2x0aXAtaW5uZXJgIENTUyBjbGFzc2VzIChjYW4gYmUgY29uZmlndXJlZCwgc2VlIGJlbG93KQogIC8vIENoYW5nZSBpZiB0aGUgY2xhc3NlcyBjb25mbGljdCB3aXRoIG90aGVyIGxpYnJhcmllcyAoZm9yIGV4YW1wbGUgYm9vdHN0cmFwKQogIGRlZmF1bHRUZW1wbGF0ZTogJzxkaXYgY2xhc3M9InRvb2x0aXAiIHJvbGU9InRvb2x0aXAiPjxkaXYgY2xhc3M9InRvb2x0aXAtYXJyb3ciPjwvZGl2PjxkaXYgY2xhc3M9InRvb2x0aXAtaW5uZXIiPjwvZGl2PjwvZGl2PicsCiAgLy8gU2VsZWN0b3IgdXNlZCB0byBnZXQgdGhlIGFycm93IGVsZW1lbnQgaW4gdGhlIHRvb2x0aXAgdGVtcGxhdGUKICBkZWZhdWx0QXJyb3dTZWxlY3RvcjogJy50b29sdGlwLWFycm93LCAudG9vbHRpcF9fYXJyb3cnLAogIC8vIFNlbGVjdG9yIHVzZWQgdG8gZ2V0IHRoZSBpbm5lciBjb250ZW50IGVsZW1lbnQgaW4gdGhlIHRvb2x0aXAgdGVtcGxhdGUKICBkZWZhdWx0SW5uZXJTZWxlY3RvcjogJy50b29sdGlwLWlubmVyLCAudG9vbHRpcF9faW5uZXInLAogIC8vIERlbGF5IChtcykKICBkZWZhdWx0RGVsYXk6IDAsCiAgLy8gRGVmYXVsdCBldmVudHMgdGhhdCB0cmlnZ2VyIHRoZSB0b29sdGlwCiAgZGVmYXVsdFRyaWdnZXI6ICdob3ZlciBmb2N1cycsCiAgLy8gRGVmYXVsdCBwb3NpdGlvbiBvZmZzZXQgKHB4KQogIGRlZmF1bHRPZmZzZXQ6IDAsCiAgLy8gRGVmYXVsdCBjb250YWluZXIgd2hlcmUgdGhlIHRvb2x0aXAgd2lsbCBiZSBhcHBlbmRlZAogIGRlZmF1bHRDb250YWluZXI6ICdib2R5JywKICBkZWZhdWx0Qm91bmRhcmllc0VsZW1lbnQ6IHVuZGVmaW5lZCwKICBkZWZhdWx0UG9wcGVyT3B0aW9uczoge30sCiAgLy8gQ2xhc3MgYWRkZWQgd2hlbiBjb250ZW50IGlzIGxvYWRpbmcKICBkZWZhdWx0TG9hZGluZ0NsYXNzOiAndG9vbHRpcC1sb2FkaW5nJywKICAvLyBEaXNwbGF5ZWQgd2hlbiB0b29sdGlwIGNvbnRlbnQgaXMgbG9hZGluZwogIGRlZmF1bHRMb2FkaW5nQ29udGVudDogJy4uLicsCiAgLy8gSGlkZSBvbiBtb3VzZW92ZXIgdG9vbHRpcAogIGF1dG9IaWRlOiB0cnVlLAogIC8vIENsb3NlIHRvb2x0aXAgb24gY2xpY2sgb24gdG9vbHRpcCB0YXJnZXQ/CiAgZGVmYXVsdEhpZGVPblRhcmdldENsaWNrOiB0cnVlLAogIC8vIEF1dG8gZGVzdHJveSB0b29sdGlwIERPTSBub2RlcyAobXMpCiAgZGlzcG9zZVRpbWVvdXQ6IDUwMDAsCiAgLy8gT3B0aW9ucyBmb3IgcG9wb3ZlcgogIHBvcG92ZXI6IHsKICAgIGRlZmF1bHRQbGFjZW1lbnQ6ICdib3R0b20nLAogICAgLy8gVXNlIHRoZSBgcG9wb3ZlckNsYXNzYCBwcm9wIGZvciB0aGVtaW5nCiAgICBkZWZhdWx0Q2xhc3M6ICd2dWUtcG9wb3Zlci10aGVtZScsCiAgICAvLyBCYXNlIGNsYXNzIChjaGFuZ2UgaWYgY29uZmxpY3RzIHdpdGggb3RoZXIgbGlicmFyaWVzKQogICAgZGVmYXVsdEJhc2VDbGFzczogJ3Rvb2x0aXAgcG9wb3ZlcicsCiAgICAvLyBXcmFwcGVyIGNsYXNzIChjb250YWlucyBhcnJvdyBhbmQgaW5uZXIpCiAgICBkZWZhdWx0V3JhcHBlckNsYXNzOiAnd3JhcHBlcicsCiAgICAvLyBJbm5lciBjb250ZW50IGNsYXNzCiAgICBkZWZhdWx0SW5uZXJDbGFzczogJ3Rvb2x0aXAtaW5uZXIgcG9wb3Zlci1pbm5lcicsCiAgICAvLyBBcnJvdyBjbGFzcwogICAgZGVmYXVsdEFycm93Q2xhc3M6ICd0b29sdGlwLWFycm93IHBvcG92ZXItYXJyb3cnLAogICAgLy8gQ2xhc3MgYWRkZWQgd2hlbiBwb3BvdmVyIGlzIG9wZW4KICAgIGRlZmF1bHRPcGVuQ2xhc3M6ICdvcGVuJywKICAgIGRlZmF1bHREZWxheTogMCwKICAgIGRlZmF1bHRUcmlnZ2VyOiAnY2xpY2snLAogICAgZGVmYXVsdE9mZnNldDogMCwKICAgIGRlZmF1bHRDb250YWluZXI6ICdib2R5JywKICAgIGRlZmF1bHRCb3VuZGFyaWVzRWxlbWVudDogdW5kZWZpbmVkLAogICAgZGVmYXVsdFBvcHBlck9wdGlvbnM6IHt9LAogICAgLy8gSGlkZXMgaWYgY2xpY2tlZCBvdXRzaWRlIG9mIHBvcG92ZXIKICAgIGRlZmF1bHRBdXRvSGlkZTogdHJ1ZSwKICAgIC8vIFVwZGF0ZSBwb3BwZXIgb24gY29udGVudCByZXNpemUKICAgIGRlZmF1bHRIYW5kbGVSZXNpemU6IHRydWUKICB9Cn07CgpmdW5jdGlvbiBnZXRPcHRpb25zKG9wdGlvbnMpIHsKICB2YXIgcmVzdWx0ID0gewogICAgcGxhY2VtZW50OiB0eXBlb2Ygb3B0aW9ucy5wbGFjZW1lbnQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5wbGFjZW1lbnQgOiBkaXJlY3RpdmUub3B0aW9ucy5kZWZhdWx0UGxhY2VtZW50LAogICAgZGVsYXk6IHR5cGVvZiBvcHRpb25zLmRlbGF5ICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZGVsYXkgOiBkaXJlY3RpdmUub3B0aW9ucy5kZWZhdWx0RGVsYXksCiAgICBodG1sOiB0eXBlb2Ygb3B0aW9ucy5odG1sICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaHRtbCA6IGRpcmVjdGl2ZS5vcHRpb25zLmRlZmF1bHRIdG1sLAogICAgdGVtcGxhdGU6IHR5cGVvZiBvcHRpb25zLnRlbXBsYXRlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMudGVtcGxhdGUgOiBkaXJlY3RpdmUub3B0aW9ucy5kZWZhdWx0VGVtcGxhdGUsCiAgICBhcnJvd1NlbGVjdG9yOiB0eXBlb2Ygb3B0aW9ucy5hcnJvd1NlbGVjdG9yICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYXJyb3dTZWxlY3RvciA6IGRpcmVjdGl2ZS5vcHRpb25zLmRlZmF1bHRBcnJvd1NlbGVjdG9yLAogICAgaW5uZXJTZWxlY3RvcjogdHlwZW9mIG9wdGlvbnMuaW5uZXJTZWxlY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmlubmVyU2VsZWN0b3IgOiBkaXJlY3RpdmUub3B0aW9ucy5kZWZhdWx0SW5uZXJTZWxlY3RvciwKICAgIHRyaWdnZXI6IHR5cGVvZiBvcHRpb25zLnRyaWdnZXIgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy50cmlnZ2VyIDogZGlyZWN0aXZlLm9wdGlvbnMuZGVmYXVsdFRyaWdnZXIsCiAgICBvZmZzZXQ6IHR5cGVvZiBvcHRpb25zLm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm9mZnNldCA6IGRpcmVjdGl2ZS5vcHRpb25zLmRlZmF1bHRPZmZzZXQsCiAgICBjb250YWluZXI6IHR5cGVvZiBvcHRpb25zLmNvbnRhaW5lciAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvbnRhaW5lciA6IGRpcmVjdGl2ZS5vcHRpb25zLmRlZmF1bHRDb250YWluZXIsCiAgICBib3VuZGFyaWVzRWxlbWVudDogdHlwZW9mIG9wdGlvbnMuYm91bmRhcmllc0VsZW1lbnQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5ib3VuZGFyaWVzRWxlbWVudCA6IGRpcmVjdGl2ZS5vcHRpb25zLmRlZmF1bHRCb3VuZGFyaWVzRWxlbWVudCwKICAgIGF1dG9IaWRlOiB0eXBlb2Ygb3B0aW9ucy5hdXRvSGlkZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmF1dG9IaWRlIDogZGlyZWN0aXZlLm9wdGlvbnMuYXV0b0hpZGUsCiAgICBoaWRlT25UYXJnZXRDbGljazogdHlwZW9mIG9wdGlvbnMuaGlkZU9uVGFyZ2V0Q2xpY2sgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5oaWRlT25UYXJnZXRDbGljayA6IGRpcmVjdGl2ZS5vcHRpb25zLmRlZmF1bHRIaWRlT25UYXJnZXRDbGljaywKICAgIGxvYWRpbmdDbGFzczogdHlwZW9mIG9wdGlvbnMubG9hZGluZ0NsYXNzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubG9hZGluZ0NsYXNzIDogZGlyZWN0aXZlLm9wdGlvbnMuZGVmYXVsdExvYWRpbmdDbGFzcywKICAgIGxvYWRpbmdDb250ZW50OiB0eXBlb2Ygb3B0aW9ucy5sb2FkaW5nQ29udGVudCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmxvYWRpbmdDb250ZW50IDogZGlyZWN0aXZlLm9wdGlvbnMuZGVmYXVsdExvYWRpbmdDb250ZW50LAogICAgcG9wcGVyT3B0aW9uczogX29iamVjdFNwcmVhZDIoe30sIHR5cGVvZiBvcHRpb25zLnBvcHBlck9wdGlvbnMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5wb3BwZXJPcHRpb25zIDogZGlyZWN0aXZlLm9wdGlvbnMuZGVmYXVsdFBvcHBlck9wdGlvbnMpCiAgfTsKCiAgaWYgKHJlc3VsdC5vZmZzZXQpIHsKICAgIHZhciB0eXBlb2ZPZmZzZXQgPSBfdHlwZW9mKHJlc3VsdC5vZmZzZXQpOwoKICAgIHZhciBvZmZzZXQgPSByZXN1bHQub2Zmc2V0OyAvLyBPbmUgdmFsdWUgLT4gc3dpdGNoCgogICAgaWYgKHR5cGVvZk9mZnNldCA9PT0gJ251bWJlcicgfHwgdHlwZW9mT2Zmc2V0ID09PSAnc3RyaW5nJyAmJiBvZmZzZXQuaW5kZXhPZignLCcpID09PSAtMSkgewogICAgICBvZmZzZXQgPSAiMCwgIi5jb25jYXQob2Zmc2V0KTsKICAgIH0KCiAgICBpZiAoIXJlc3VsdC5wb3BwZXJPcHRpb25zLm1vZGlmaWVycykgewogICAgICByZXN1bHQucG9wcGVyT3B0aW9ucy5tb2RpZmllcnMgPSB7fTsKICAgIH0KCiAgICByZXN1bHQucG9wcGVyT3B0aW9ucy5tb2RpZmllcnMub2Zmc2V0ID0gewogICAgICBvZmZzZXQ6IG9mZnNldAogICAgfTsKICB9CgogIGlmIChyZXN1bHQudHJpZ2dlciAmJiByZXN1bHQudHJpZ2dlci5pbmRleE9mKCdjbGljaycpICE9PSAtMSkgewogICAgcmVzdWx0LmhpZGVPblRhcmdldENsaWNrID0gZmFsc2U7CiAgfQoKICByZXR1cm4gcmVzdWx0Owp9CgpmdW5jdGlvbiBnZXRQbGFjZW1lbnQodmFsdWUsIG1vZGlmaWVycykgewogIHZhciBwbGFjZW1lbnQgPSB2YWx1ZS5wbGFjZW1lbnQ7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zaXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgcG9zID0gcG9zaXRpb25zW2ldOwoKICAgIGlmIChtb2RpZmllcnNbcG9zXSkgewogICAgICBwbGFjZW1lbnQgPSBwb3M7CiAgICB9CiAgfQoKICByZXR1cm4gcGxhY2VtZW50Owp9CgpmdW5jdGlvbiBnZXRDb250ZW50KHZhbHVlKSB7CiAgdmFyIHR5cGUgPSBfdHlwZW9mKHZhbHVlKTsKCiAgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7CiAgICByZXR1cm4gdmFsdWU7CiAgfSBlbHNlIGlmICh2YWx1ZSAmJiB0eXBlID09PSAnb2JqZWN0JykgewogICAgcmV0dXJuIHZhbHVlLmNvbnRlbnQ7CiAgfSBlbHNlIHsKICAgIHJldHVybiBmYWxzZTsKICB9Cn0KCmZ1bmN0aW9uIGNyZWF0ZVRvb2x0aXAoZWwsIHZhbHVlKSB7CiAgdmFyIG1vZGlmaWVycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgdmFyIGNvbnRlbnQgPSBnZXRDb250ZW50KHZhbHVlKTsKICB2YXIgY2xhc3NlcyA9IHR5cGVvZiB2YWx1ZS5jbGFzc2VzICE9PSAndW5kZWZpbmVkJyA/IHZhbHVlLmNsYXNzZXMgOiBkaXJlY3RpdmUub3B0aW9ucy5kZWZhdWx0Q2xhc3M7CgogIHZhciBvcHRzID0gX29iamVjdFNwcmVhZDIoewogICAgdGl0bGU6IGNvbnRlbnQKICB9LCBnZXRPcHRpb25zKF9vYmplY3RTcHJlYWQyKHt9LCB2YWx1ZSwgewogICAgcGxhY2VtZW50OiBnZXRQbGFjZW1lbnQodmFsdWUsIG1vZGlmaWVycykKICB9KSkpOwoKICB2YXIgdG9vbHRpcCA9IGVsLl90b29sdGlwID0gbmV3IFRvb2x0aXAoZWwsIG9wdHMpOwogIHRvb2x0aXAuc2V0Q2xhc3NlcyhjbGFzc2VzKTsKICB0b29sdGlwLl92dWVFbCA9IGVsOyAvLyBDbGFzcyBvbiB0YXJnZXQKCiAgdmFyIHRhcmdldENsYXNzZXMgPSB0eXBlb2YgdmFsdWUudGFyZ2V0Q2xhc3NlcyAhPT0gJ3VuZGVmaW5lZCcgPyB2YWx1ZS50YXJnZXRDbGFzc2VzIDogZGlyZWN0aXZlLm9wdGlvbnMuZGVmYXVsdFRhcmdldENsYXNzOwogIGVsLl90b29sdGlwVGFyZ2V0Q2xhc3NlcyA9IHRhcmdldENsYXNzZXM7CiAgYWRkQ2xhc3NlcyhlbCwgdGFyZ2V0Q2xhc3Nlcyk7CiAgcmV0dXJuIHRvb2x0aXA7Cn0KCmZ1bmN0aW9uIGRlc3Ryb3lUb29sdGlwKGVsKSB7CiAgaWYgKGVsLl90b29sdGlwKSB7CiAgICBlbC5fdG9vbHRpcC5kaXNwb3NlKCk7CgogICAgZGVsZXRlIGVsLl90b29sdGlwOwogICAgZGVsZXRlIGVsLl90b29sdGlwT2xkU2hvdzsKICB9CgogIGlmIChlbC5fdG9vbHRpcFRhcmdldENsYXNzZXMpIHsKICAgIHJlbW92ZUNsYXNzZXMoZWwsIGVsLl90b29sdGlwVGFyZ2V0Q2xhc3Nlcyk7CiAgICBkZWxldGUgZWwuX3Rvb2x0aXBUYXJnZXRDbGFzc2VzOwogIH0KfQoKZnVuY3Rpb24gYmluZChlbCwgX3JlZikgewogIHZhciB2YWx1ZSA9IF9yZWYudmFsdWUsCiAgICAgIG9sZFZhbHVlID0gX3JlZi5vbGRWYWx1ZSwKICAgICAgbW9kaWZpZXJzID0gX3JlZi5tb2RpZmllcnM7CiAgdmFyIGNvbnRlbnQgPSBnZXRDb250ZW50KHZhbHVlKTsKCiAgaWYgKCFjb250ZW50IHx8ICFzdGF0ZS5lbmFibGVkKSB7CiAgICBkZXN0cm95VG9vbHRpcChlbCk7CiAgfSBlbHNlIHsKICAgIHZhciB0b29sdGlwOwoKICAgIGlmIChlbC5fdG9vbHRpcCkgewogICAgICB0b29sdGlwID0gZWwuX3Rvb2x0aXA7IC8vIENvbnRlbnQKCiAgICAgIHRvb2x0aXAuc2V0Q29udGVudChjb250ZW50KTsgLy8gT3B0aW9ucwoKICAgICAgdG9vbHRpcC5zZXRPcHRpb25zKF9vYmplY3RTcHJlYWQyKHt9LCB2YWx1ZSwgewogICAgICAgIHBsYWNlbWVudDogZ2V0UGxhY2VtZW50KHZhbHVlLCBtb2RpZmllcnMpCiAgICAgIH0pKTsKICAgIH0gZWxzZSB7CiAgICAgIHRvb2x0aXAgPSBjcmVhdGVUb29sdGlwKGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTsKICAgIH0gLy8gTWFudWFsIHNob3cKCgogICAgaWYgKHR5cGVvZiB2YWx1ZS5zaG93ICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZS5zaG93ICE9PSBlbC5fdG9vbHRpcE9sZFNob3cpIHsKICAgICAgZWwuX3Rvb2x0aXBPbGRTaG93ID0gdmFsdWUuc2hvdzsKICAgICAgdmFsdWUuc2hvdyA/IHRvb2x0aXAuc2hvdygpIDogdG9vbHRpcC5oaWRlKCk7CiAgICB9CiAgfQp9Cgp2YXIgZGlyZWN0aXZlID0gewogIG9wdGlvbnM6IGRlZmF1bHRPcHRpb25zLAogIGJpbmQ6IGJpbmQsCiAgdXBkYXRlOiBiaW5kLAogIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKGVsKSB7CiAgICBkZXN0cm95VG9vbHRpcChlbCk7CiAgfQp9OwoKZnVuY3Rpb24gYWRkTGlzdGVuZXJzKGVsKSB7CiAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrKTsKICBlbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0LCBzdXBwb3J0c1Bhc3NpdmUgPyB7CiAgICBwYXNzaXZlOiB0cnVlCiAgfSA6IGZhbHNlKTsKfQoKZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJzKGVsKSB7CiAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrKTsKICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0KTsKICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hFbmQpOwogIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgb25Ub3VjaENhbmNlbCk7Cn0KCmZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHsKICB2YXIgZWwgPSBldmVudC5jdXJyZW50VGFyZ2V0OwogIGV2ZW50LmNsb3NlUG9wb3ZlciA9ICFlbC4kX3ZjbG9zZXBvcG92ZXJfdG91Y2g7CiAgZXZlbnQuY2xvc2VBbGxQb3BvdmVyID0gZWwuJF9jbG9zZVBvcG92ZXJNb2RpZmllcnMgJiYgISFlbC4kX2Nsb3NlUG9wb3Zlck1vZGlmaWVycy5hbGw7Cn0KCmZ1bmN0aW9uIG9uVG91Y2hTdGFydChldmVudCkgewogIGlmIChldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGggPT09IDEpIHsKICAgIHZhciBlbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7CiAgICBlbC4kX3ZjbG9zZXBvcG92ZXJfdG91Y2ggPSB0cnVlOwogICAgdmFyIHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF07CiAgICBlbC4kX3ZjbG9zZXBvcG92ZXJfdG91Y2hQb2ludCA9IHRvdWNoOwogICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblRvdWNoRW5kKTsKICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgb25Ub3VjaENhbmNlbCk7CiAgfQp9CgpmdW5jdGlvbiBvblRvdWNoRW5kKGV2ZW50KSB7CiAgdmFyIGVsID0gZXZlbnQuY3VycmVudFRhcmdldDsKICBlbC4kX3ZjbG9zZXBvcG92ZXJfdG91Y2ggPSBmYWxzZTsKCiAgaWYgKGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aCA9PT0gMSkgewogICAgdmFyIHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF07CiAgICB2YXIgZmlyc3RUb3VjaCA9IGVsLiRfdmNsb3NlcG9wb3Zlcl90b3VjaFBvaW50OwogICAgZXZlbnQuY2xvc2VQb3BvdmVyID0gTWF0aC5hYnModG91Y2guc2NyZWVuWSAtIGZpcnN0VG91Y2guc2NyZWVuWSkgPCAyMCAmJiBNYXRoLmFicyh0b3VjaC5zY3JlZW5YIC0gZmlyc3RUb3VjaC5zY3JlZW5YKSA8IDIwOwogICAgZXZlbnQuY2xvc2VBbGxQb3BvdmVyID0gZWwuJF9jbG9zZVBvcG92ZXJNb2RpZmllcnMgJiYgISFlbC4kX2Nsb3NlUG9wb3Zlck1vZGlmaWVycy5hbGw7CiAgfQp9CgpmdW5jdGlvbiBvblRvdWNoQ2FuY2VsKGV2ZW50KSB7CiAgdmFyIGVsID0gZXZlbnQuY3VycmVudFRhcmdldDsKICBlbC4kX3ZjbG9zZXBvcG92ZXJfdG91Y2ggPSBmYWxzZTsKfQoKdmFyIHZjbG9zZXBvcG92ZXIgPSB7CiAgYmluZDogZnVuY3Rpb24gYmluZChlbCwgX3JlZikgewogICAgdmFyIHZhbHVlID0gX3JlZi52YWx1ZSwKICAgICAgICBtb2RpZmllcnMgPSBfcmVmLm1vZGlmaWVyczsKICAgIGVsLiRfY2xvc2VQb3BvdmVyTW9kaWZpZXJzID0gbW9kaWZpZXJzOwoKICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnIHx8IHZhbHVlKSB7CiAgICAgIGFkZExpc3RlbmVycyhlbCk7CiAgICB9CiAgfSwKICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShlbCwgX3JlZjIpIHsKICAgIHZhciB2YWx1ZSA9IF9yZWYyLnZhbHVlLAogICAgICAgIG9sZFZhbHVlID0gX3JlZjIub2xkVmFsdWUsCiAgICAgICAgbW9kaWZpZXJzID0gX3JlZjIubW9kaWZpZXJzOwogICAgZWwuJF9jbG9zZVBvcG92ZXJNb2RpZmllcnMgPSBtb2RpZmllcnM7CgogICAgaWYgKHZhbHVlICE9PSBvbGRWYWx1ZSkgewogICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyB8fCB2YWx1ZSkgewogICAgICAgIGFkZExpc3RlbmVycyhlbCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVtb3ZlTGlzdGVuZXJzKGVsKTsKICAgICAgfQogICAgfQogIH0sCiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoZWwpIHsKICAgIHJlbW92ZUxpc3RlbmVycyhlbCk7CiAgfQp9OwoKZnVuY3Rpb24gZ2V0RGVmYXVsdChrZXkpIHsKICB2YXIgdmFsdWUgPSBkaXJlY3RpdmUub3B0aW9ucy5wb3BvdmVyW2tleV07CgogIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7CiAgICByZXR1cm4gZGlyZWN0aXZlLm9wdGlvbnNba2V5XTsKICB9CgogIHJldHVybiB2YWx1ZTsKfQoKdmFyIGlzSU9TID0gZmFsc2U7CgppZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcpIHsKICBpc0lPUyA9IC9pUGFkfGlQaG9uZXxpUG9kLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmICF3aW5kb3cuTVNTdHJlYW07Cn0KCnZhciBvcGVuUG9wb3ZlcnMgPSBbXTsKCnZhciBFbGVtZW50ID0gZnVuY3Rpb24gRWxlbWVudCgpIHt9OwoKaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7CiAgRWxlbWVudCA9IHdpbmRvdy5FbGVtZW50Owp9Cgp2YXIgc2NyaXB0ID0gewogIG5hbWU6ICdWUG9wb3ZlcicsCiAgY29tcG9uZW50czogewogICAgUmVzaXplT2JzZXJ2ZXI6IFJlc2l6ZU9ic2VydmVyCiAgfSwKICBwcm9wczogewogICAgb3BlbjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICAiZGVmYXVsdCI6IGZhbHNlCiAgICB9LAogICAgZGlzYWJsZWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgImRlZmF1bHQiOiBmYWxzZQogICAgfSwKICAgIHBsYWNlbWVudDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGdldERlZmF1bHQoJ2RlZmF1bHRQbGFjZW1lbnQnKTsKICAgICAgfQogICAgfSwKICAgIGRlbGF5OiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlciwgT2JqZWN0XSwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZ2V0RGVmYXVsdCgnZGVmYXVsdERlbGF5Jyk7CiAgICAgIH0KICAgIH0sCiAgICBvZmZzZXQ6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZ2V0RGVmYXVsdCgnZGVmYXVsdE9mZnNldCcpOwogICAgICB9CiAgICB9LAogICAgdHJpZ2dlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGdldERlZmF1bHQoJ2RlZmF1bHRUcmlnZ2VyJyk7CiAgICAgIH0KICAgIH0sCiAgICBjb250YWluZXI6IHsKICAgICAgdHlwZTogW1N0cmluZywgT2JqZWN0LCBFbGVtZW50LCBCb29sZWFuXSwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZ2V0RGVmYXVsdCgnZGVmYXVsdENvbnRhaW5lcicpOwogICAgICB9CiAgICB9LAogICAgYm91bmRhcmllc0VsZW1lbnQ6IHsKICAgICAgdHlwZTogW1N0cmluZywgRWxlbWVudF0sCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGdldERlZmF1bHQoJ2RlZmF1bHRCb3VuZGFyaWVzRWxlbWVudCcpOwogICAgICB9CiAgICB9LAogICAgcG9wcGVyT3B0aW9uczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGdldERlZmF1bHQoJ2RlZmF1bHRQb3BwZXJPcHRpb25zJyk7CiAgICAgIH0KICAgIH0sCiAgICBwb3BvdmVyQ2xhc3M6IHsKICAgICAgdHlwZTogW1N0cmluZywgQXJyYXldLAogICAgICAiZGVmYXVsdCI6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBnZXREZWZhdWx0KCdkZWZhdWx0Q2xhc3MnKTsKICAgICAgfQogICAgfSwKICAgIHBvcG92ZXJCYXNlQ2xhc3M6IHsKICAgICAgdHlwZTogW1N0cmluZywgQXJyYXldLAogICAgICAiZGVmYXVsdCI6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBkaXJlY3RpdmUub3B0aW9ucy5wb3BvdmVyLmRlZmF1bHRCYXNlQ2xhc3M7CiAgICAgIH0KICAgIH0sCiAgICBwb3BvdmVySW5uZXJDbGFzczogewogICAgICB0eXBlOiBbU3RyaW5nLCBBcnJheV0sCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZS5vcHRpb25zLnBvcG92ZXIuZGVmYXVsdElubmVyQ2xhc3M7CiAgICAgIH0KICAgIH0sCiAgICBwb3BvdmVyV3JhcHBlckNsYXNzOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEFycmF5XSwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZGlyZWN0aXZlLm9wdGlvbnMucG9wb3Zlci5kZWZhdWx0V3JhcHBlckNsYXNzOwogICAgICB9CiAgICB9LAogICAgcG9wb3ZlckFycm93Q2xhc3M6IHsKICAgICAgdHlwZTogW1N0cmluZywgQXJyYXldLAogICAgICAiZGVmYXVsdCI6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBkaXJlY3RpdmUub3B0aW9ucy5wb3BvdmVyLmRlZmF1bHRBcnJvd0NsYXNzOwogICAgICB9CiAgICB9LAogICAgYXV0b0hpZGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZGlyZWN0aXZlLm9wdGlvbnMucG9wb3Zlci5kZWZhdWx0QXV0b0hpZGU7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVSZXNpemU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZGlyZWN0aXZlLm9wdGlvbnMucG9wb3Zlci5kZWZhdWx0SGFuZGxlUmVzaXplOwogICAgICB9CiAgICB9LAogICAgb3Blbkdyb3VwOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgImRlZmF1bHQiOiBudWxsCiAgICB9LAogICAgb3BlbkNsYXNzOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEFycmF5XSwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZGlyZWN0aXZlLm9wdGlvbnMucG9wb3Zlci5kZWZhdWx0T3BlbkNsYXNzOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNPcGVuOiBmYWxzZSwKICAgICAgaWQ6IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCAxMCkKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY3NzQ2xhc3M6IGZ1bmN0aW9uIGNzc0NsYXNzKCkgewogICAgICByZXR1cm4gX2RlZmluZVByb3BlcnR5KHt9LCB0aGlzLm9wZW5DbGFzcywgdGhpcy5pc09wZW4pOwogICAgfSwKICAgIHBvcG92ZXJJZDogZnVuY3Rpb24gcG9wb3ZlcklkKCkgewogICAgICByZXR1cm4gInBvcG92ZXJfIi5jb25jYXQodGhpcy5pZCk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgb3BlbjogZnVuY3Rpb24gb3Blbih2YWwpIHsKICAgICAgaWYgKHZhbCkgewogICAgICAgIHRoaXMuc2hvdygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaGlkZSgpOwogICAgICB9CiAgICB9LAogICAgZGlzYWJsZWQ6IGZ1bmN0aW9uIGRpc2FibGVkKHZhbCwgb2xkVmFsKSB7CiAgICAgIGlmICh2YWwgIT09IG9sZFZhbCkgewogICAgICAgIGlmICh2YWwpIHsKICAgICAgICAgIHRoaXMuaGlkZSgpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcGVuKSB7CiAgICAgICAgICB0aGlzLnNob3coKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjb250YWluZXI6IGZ1bmN0aW9uIGNvbnRhaW5lcih2YWwpIHsKICAgICAgaWYgKHRoaXMuaXNPcGVuICYmIHRoaXMucG9wcGVySW5zdGFuY2UpIHsKICAgICAgICB2YXIgcG9wb3Zlck5vZGUgPSB0aGlzLiRyZWZzLnBvcG92ZXI7CiAgICAgICAgdmFyIHJlZmVyZW5jZSA9IHRoaXMuJHJlZnMudHJpZ2dlcjsKICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy4kX2ZpbmRDb250YWluZXIodGhpcy5jb250YWluZXIsIHJlZmVyZW5jZSk7CgogICAgICAgIGlmICghY29udGFpbmVyKSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIGNvbnRhaW5lciBmb3IgcG9wb3ZlcicsIHRoaXMpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBvcG92ZXJOb2RlKTsKICAgICAgICB0aGlzLnBvcHBlckluc3RhbmNlLnNjaGVkdWxlVXBkYXRlKCk7CiAgICAgIH0KICAgIH0sCiAgICB0cmlnZ2VyOiBmdW5jdGlvbiB0cmlnZ2VyKHZhbCkgewogICAgICB0aGlzLiRfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTsKICAgICAgdGhpcy4kX2FkZEV2ZW50TGlzdGVuZXJzKCk7CiAgICB9LAogICAgcGxhY2VtZW50OiBmdW5jdGlvbiBwbGFjZW1lbnQodmFsKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRfdXBkYXRlUG9wcGVyKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5wb3BwZXJJbnN0YW5jZS5vcHRpb25zLnBsYWNlbWVudCA9IHZhbDsKICAgICAgfSk7CiAgICB9LAogICAgb2Zmc2V0OiAnJF9yZXN0YXJ0UG9wcGVyJywKICAgIGJvdW5kYXJpZXNFbGVtZW50OiAnJF9yZXN0YXJ0UG9wcGVyJywKICAgIHBvcHBlck9wdGlvbnM6IHsKICAgICAgaGFuZGxlcjogJyRfcmVzdGFydFBvcHBlcicsCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLiRfaXNEaXNwb3NlZCA9IGZhbHNlOwogICAgdGhpcy4kX21vdW50ZWQgPSBmYWxzZTsKICAgIHRoaXMuJF9ldmVudHMgPSBbXTsKICAgIHRoaXMuJF9wcmV2ZW50T3BlbiA9IGZhbHNlOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBwb3BvdmVyTm9kZSA9IHRoaXMuJHJlZnMucG9wb3ZlcjsKICAgIHBvcG92ZXJOb2RlLnBhcmVudE5vZGUgJiYgcG9wb3Zlck5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwb3BvdmVyTm9kZSk7CiAgICB0aGlzLiRfaW5pdCgpOwoKICAgIGlmICh0aGlzLm9wZW4pIHsKICAgICAgdGhpcy5zaG93KCk7CiAgICB9CiAgfSwKICBkZWFjdGl2YXRlZDogZnVuY3Rpb24gZGVhY3RpdmF0ZWQoKSB7CiAgICB0aGlzLmhpZGUoKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLmRpc3Bvc2UoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNob3c6IGZ1bmN0aW9uIHNob3coKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSwKICAgICAgICAgIGV2ZW50ID0gX3JlZjIuZXZlbnQsCiAgICAgICAgICBfcmVmMiRza2lwRGVsYXkgPSBfcmVmMi5za2lwRGVsYXksCiAgICAgICAgICBfcmVmMiRmb3JjZSA9IF9yZWYyLmZvcmNlLAogICAgICAgICAgZm9yY2UgPSBfcmVmMiRmb3JjZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmMiRmb3JjZTsKCiAgICAgIGlmIChmb3JjZSB8fCAhdGhpcy5kaXNhYmxlZCkgewogICAgICAgIHRoaXMuJF9zY2hlZHVsZVNob3coZXZlbnQpOwogICAgICAgIHRoaXMuJGVtaXQoJ3Nob3cnKTsKICAgICAgfQoKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOm9wZW4nLCB0cnVlKTsKICAgICAgdGhpcy4kX2JlaW5nU2hvd2VkID0gdHJ1ZTsKICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuJF9iZWluZ1Nob3dlZCA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBoaWRlOiBmdW5jdGlvbiBoaWRlKCkgewogICAgICB2YXIgX3JlZjMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LAogICAgICAgICAgZXZlbnQgPSBfcmVmMy5ldmVudCwKICAgICAgICAgIF9yZWYzJHNraXBEZWxheSA9IF9yZWYzLnNraXBEZWxheTsKCiAgICAgIHRoaXMuJF9zY2hlZHVsZUhpZGUoZXZlbnQpOwogICAgICB0aGlzLiRlbWl0KCdoaWRlJyk7CiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpvcGVuJywgZmFsc2UpOwogICAgfSwKICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIHRoaXMuJF9pc0Rpc3Bvc2VkID0gdHJ1ZTsKICAgICAgdGhpcy4kX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7CiAgICAgIHRoaXMuaGlkZSh7CiAgICAgICAgc2tpcERlbGF5OiB0cnVlCiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMucG9wcGVySW5zdGFuY2UpIHsKICAgICAgICB0aGlzLnBvcHBlckluc3RhbmNlLmRlc3Ryb3koKTsgLy8gZGVzdHJveSB0b29sdGlwTm9kZSBpZiByZW1vdmVPbkRlc3Ryb3kgaXMgbm90IHNldCwgYXMgcG9wcGVySW5zdGFuY2UuZGVzdHJveSgpIGFscmVhZHkgcmVtb3ZlcyB0aGUgZWxlbWVudAoKICAgICAgICBpZiAoIXRoaXMucG9wcGVySW5zdGFuY2Uub3B0aW9ucy5yZW1vdmVPbkRlc3Ryb3kpIHsKICAgICAgICAgIHZhciBwb3BvdmVyTm9kZSA9IHRoaXMuJHJlZnMucG9wb3ZlcjsKICAgICAgICAgIHBvcG92ZXJOb2RlLnBhcmVudE5vZGUgJiYgcG9wb3Zlck5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwb3BvdmVyTm9kZSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLiRfbW91bnRlZCA9IGZhbHNlOwogICAgICB0aGlzLnBvcHBlckluc3RhbmNlID0gbnVsbDsKICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTsKICAgICAgdGhpcy4kZW1pdCgnZGlzcG9zZScpOwogICAgfSwKICAgICRfaW5pdDogZnVuY3Rpb24gJF9pbml0KCkgewogICAgICBpZiAodGhpcy50cmlnZ2VyLmluZGV4T2YoJ21hbnVhbCcpID09PSAtMSkgewogICAgICAgIHRoaXMuJF9hZGRFdmVudExpc3RlbmVycygpOwogICAgICB9CiAgICB9LAogICAgJF9zaG93OiBmdW5jdGlvbiAkX3Nob3coKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIHJlZmVyZW5jZSA9IHRoaXMuJHJlZnMudHJpZ2dlcjsKICAgICAgdmFyIHBvcG92ZXJOb2RlID0gdGhpcy4kcmVmcy5wb3BvdmVyOwogICAgICBjbGVhclRpbWVvdXQodGhpcy4kX2Rpc3Bvc2VUaW1lcik7IC8vIEFscmVhZHkgb3BlbgoKICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIFBvcHBlciBpcyBhbHJlYWR5IGluaXRpYWxpemVkCgoKICAgICAgaWYgKHRoaXMucG9wcGVySW5zdGFuY2UpIHsKICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7CiAgICAgICAgdGhpcy5wb3BwZXJJbnN0YW5jZS5lbmFibGVFdmVudExpc3RlbmVycygpOwogICAgICAgIHRoaXMucG9wcGVySW5zdGFuY2Uuc2NoZWR1bGVVcGRhdGUoKTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLiRfbW91bnRlZCkgewogICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLiRfZmluZENvbnRhaW5lcih0aGlzLmNvbnRhaW5lciwgcmVmZXJlbmNlKTsKCiAgICAgICAgaWYgKCFjb250YWluZXIpIHsKICAgICAgICAgIGNvbnNvbGUud2FybignTm8gY29udGFpbmVyIGZvciBwb3BvdmVyJywgdGhpcyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocG9wb3Zlck5vZGUpOwogICAgICAgIHRoaXMuJF9tb3VudGVkID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLnBvcHBlckluc3RhbmNlKSB7CiAgICAgICAgdmFyIHBvcHBlck9wdGlvbnMgPSBfb2JqZWN0U3ByZWFkMih7fSwgdGhpcy5wb3BwZXJPcHRpb25zLCB7CiAgICAgICAgICBwbGFjZW1lbnQ6IHRoaXMucGxhY2VtZW50CiAgICAgICAgfSk7CgogICAgICAgIHBvcHBlck9wdGlvbnMubW9kaWZpZXJzID0gX29iamVjdFNwcmVhZDIoe30sIHBvcHBlck9wdGlvbnMubW9kaWZpZXJzLCB7CiAgICAgICAgICBhcnJvdzogX29iamVjdFNwcmVhZDIoe30sIHBvcHBlck9wdGlvbnMubW9kaWZpZXJzICYmIHBvcHBlck9wdGlvbnMubW9kaWZpZXJzLmFycm93LCB7CiAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuJHJlZnMuYXJyb3cKICAgICAgICAgIH0pCiAgICAgICAgfSk7CgogICAgICAgIGlmICh0aGlzLm9mZnNldCkgewogICAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMuJF9nZXRPZmZzZXQoKTsKICAgICAgICAgIHBvcHBlck9wdGlvbnMubW9kaWZpZXJzLm9mZnNldCA9IF9vYmplY3RTcHJlYWQyKHt9LCBwb3BwZXJPcHRpb25zLm1vZGlmaWVycyAmJiBwb3BwZXJPcHRpb25zLm1vZGlmaWVycy5vZmZzZXQsIHsKICAgICAgICAgICAgb2Zmc2V0OiBvZmZzZXQKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuYm91bmRhcmllc0VsZW1lbnQpIHsKICAgICAgICAgIHBvcHBlck9wdGlvbnMubW9kaWZpZXJzLnByZXZlbnRPdmVyZmxvdyA9IF9vYmplY3RTcHJlYWQyKHt9LCBwb3BwZXJPcHRpb25zLm1vZGlmaWVycyAmJiBwb3BwZXJPcHRpb25zLm1vZGlmaWVycy5wcmV2ZW50T3ZlcmZsb3csIHsKICAgICAgICAgICAgYm91bmRhcmllc0VsZW1lbnQ6IHRoaXMuYm91bmRhcmllc0VsZW1lbnQKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wb3BwZXJJbnN0YW5jZSA9IG5ldyBQb3BwZXIocmVmZXJlbmNlLCBwb3BvdmVyTm9kZSwgcG9wcGVyT3B0aW9ucyk7IC8vIEZpeCBwb3NpdGlvbgoKICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF90aGlzMy5oaWRkZW4pIHsKICAgICAgICAgICAgX3RoaXMzLmhpZGRlbiA9IGZhbHNlOwoKICAgICAgICAgICAgX3RoaXMzLiRfaGlkZSgpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghX3RoaXMzLiRfaXNEaXNwb3NlZCAmJiBfdGhpczMucG9wcGVySW5zdGFuY2UpIHsKICAgICAgICAgICAgX3RoaXMzLnBvcHBlckluc3RhbmNlLnNjaGVkdWxlVXBkYXRlKCk7IC8vIFNob3cgdGhlIHRvb2x0aXAKCgogICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmIChfdGhpczMuaGlkZGVuKSB7CiAgICAgICAgICAgICAgICBfdGhpczMuaGlkZGVuID0gZmFsc2U7CgogICAgICAgICAgICAgICAgX3RoaXMzLiRfaGlkZSgpOwoKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICghX3RoaXMzLiRfaXNEaXNwb3NlZCkgewogICAgICAgICAgICAgICAgX3RoaXMzLmlzT3BlbiA9IHRydWU7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzMy5kaXNwb3NlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMy5kaXNwb3NlKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciBvcGVuR3JvdXAgPSB0aGlzLm9wZW5Hcm91cDsKCiAgICAgIGlmIChvcGVuR3JvdXApIHsKICAgICAgICB2YXIgcG9wb3ZlcjsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcGVuUG9wb3ZlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHBvcG92ZXIgPSBvcGVuUG9wb3ZlcnNbaV07CgogICAgICAgICAgaWYgKHBvcG92ZXIub3Blbkdyb3VwICE9PSBvcGVuR3JvdXApIHsKICAgICAgICAgICAgcG9wb3Zlci5oaWRlKCk7CiAgICAgICAgICAgIHBvcG92ZXIuJGVtaXQoJ2Nsb3NlLWdyb3VwJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBvcGVuUG9wb3ZlcnMucHVzaCh0aGlzKTsKICAgICAgdGhpcy4kZW1pdCgnYXBwbHktc2hvdycpOwogICAgfSwKICAgICRfaGlkZTogZnVuY3Rpb24gJF9oaWRlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsgLy8gQWxyZWFkeSBoaWRkZW4KCgogICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgaW5kZXggPSBvcGVuUG9wb3ZlcnMuaW5kZXhPZih0aGlzKTsKCiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICBvcGVuUG9wb3ZlcnMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQoKICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTsKCiAgICAgIGlmICh0aGlzLnBvcHBlckluc3RhbmNlKSB7CiAgICAgICAgdGhpcy5wb3BwZXJJbnN0YW5jZS5kaXNhYmxlRXZlbnRMaXN0ZW5lcnMoKTsKICAgICAgfQoKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuJF9kaXNwb3NlVGltZXIpOwogICAgICB2YXIgZGlzcG9zZVRpbWUgPSBkaXJlY3RpdmUub3B0aW9ucy5wb3BvdmVyLmRpc3Bvc2VUaW1lb3V0IHx8IGRpcmVjdGl2ZS5vcHRpb25zLmRpc3Bvc2VUaW1lb3V0OwoKICAgICAgaWYgKGRpc3Bvc2VUaW1lICE9PSBudWxsKSB7CiAgICAgICAgdGhpcy4kX2Rpc3Bvc2VUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHBvcG92ZXJOb2RlID0gX3RoaXM0LiRyZWZzLnBvcG92ZXI7CgogICAgICAgICAgaWYgKHBvcG92ZXJOb2RlKSB7CiAgICAgICAgICAgIC8vIERvbid0IHJlbW92ZSBwb3BwZXIgaW5zdGFuY2UsIGp1c3QgdGhlIEhUTUwgZWxlbWVudAogICAgICAgICAgICBwb3BvdmVyTm9kZS5wYXJlbnROb2RlICYmIHBvcG92ZXJOb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocG9wb3Zlck5vZGUpOwogICAgICAgICAgICBfdGhpczQuJF9tb3VudGVkID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSwgZGlzcG9zZVRpbWUpOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCdhcHBseS1oaWRlJyk7CiAgICB9LAogICAgJF9maW5kQ29udGFpbmVyOiBmdW5jdGlvbiAkX2ZpbmRDb250YWluZXIoY29udGFpbmVyLCByZWZlcmVuY2UpIHsKICAgICAgLy8gaWYgY29udGFpbmVyIGlzIGEgcXVlcnksIGdldCB0aGUgcmVsYXRpdmUgZWxlbWVudAogICAgICBpZiAodHlwZW9mIGNvbnRhaW5lciA9PT0gJ3N0cmluZycpIHsKICAgICAgICBjb250YWluZXIgPSB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpOwogICAgICB9IGVsc2UgaWYgKGNvbnRhaW5lciA9PT0gZmFsc2UpIHsKICAgICAgICAvLyBpZiBjb250YWluZXIgaXMgYGZhbHNlYCwgc2V0IGl0IHRvIHJlZmVyZW5jZSBwYXJlbnQKICAgICAgICBjb250YWluZXIgPSByZWZlcmVuY2UucGFyZW50Tm9kZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0sCiAgICAkX2dldE9mZnNldDogZnVuY3Rpb24gJF9nZXRPZmZzZXQoKSB7CiAgICAgIHZhciB0eXBlb2ZPZmZzZXQgPSBfdHlwZW9mKHRoaXMub2Zmc2V0KTsKCiAgICAgIHZhciBvZmZzZXQgPSB0aGlzLm9mZnNldDsgLy8gT25lIHZhbHVlIC0+IHN3aXRjaAoKICAgICAgaWYgKHR5cGVvZk9mZnNldCA9PT0gJ251bWJlcicgfHwgdHlwZW9mT2Zmc2V0ID09PSAnc3RyaW5nJyAmJiBvZmZzZXQuaW5kZXhPZignLCcpID09PSAtMSkgewogICAgICAgIG9mZnNldCA9ICIwLCAiLmNvbmNhdChvZmZzZXQpOwogICAgICB9CgogICAgICByZXR1cm4gb2Zmc2V0OwogICAgfSwKICAgICRfYWRkRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uICRfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIHJlZmVyZW5jZSA9IHRoaXMuJHJlZnMudHJpZ2dlcjsKICAgICAgdmFyIGRpcmVjdEV2ZW50cyA9IFtdOwogICAgICB2YXIgb3Bwb3NpdGVFdmVudHMgPSBbXTsKICAgICAgdmFyIGV2ZW50cyA9IHR5cGVvZiB0aGlzLnRyaWdnZXIgPT09ICdzdHJpbmcnID8gdGhpcy50cmlnZ2VyLnNwbGl0KCcgJykuZmlsdGVyKGZ1bmN0aW9uICh0cmlnZ2VyKSB7CiAgICAgICAgcmV0dXJuIFsnY2xpY2snLCAnaG92ZXInLCAnZm9jdXMnXS5pbmRleE9mKHRyaWdnZXIpICE9PSAtMTsKICAgICAgfSkgOiBbXTsKICAgICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgc3dpdGNoIChldmVudCkgewogICAgICAgICAgY2FzZSAnaG92ZXInOgogICAgICAgICAgICBkaXJlY3RFdmVudHMucHVzaCgnbW91c2VlbnRlcicpOwogICAgICAgICAgICBvcHBvc2l0ZUV2ZW50cy5wdXNoKCdtb3VzZWxlYXZlJyk7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ2ZvY3VzJzoKICAgICAgICAgICAgZGlyZWN0RXZlbnRzLnB1c2goJ2ZvY3VzJyk7CiAgICAgICAgICAgIG9wcG9zaXRlRXZlbnRzLnB1c2goJ2JsdXInKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAnY2xpY2snOgogICAgICAgICAgICBkaXJlY3RFdmVudHMucHVzaCgnY2xpY2snKTsKICAgICAgICAgICAgb3Bwb3NpdGVFdmVudHMucHVzaCgnY2xpY2snKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9KTsgLy8gc2NoZWR1bGUgc2hvdyB0b29sdGlwCgogICAgICBkaXJlY3RFdmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgZnVuYyA9IGZ1bmN0aW9uIGZ1bmMoZXZlbnQpIHsKICAgICAgICAgIGlmIChfdGhpczUuaXNPcGVuKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBldmVudC51c2VkQnlUb29sdGlwID0gdHJ1ZTsKICAgICAgICAgICFfdGhpczUuJF9wcmV2ZW50T3BlbiAmJiBfdGhpczUuc2hvdyh7CiAgICAgICAgICAgIGV2ZW50OiBldmVudAogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpczUuaGlkZGVuID0gZmFsc2U7CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXM1LiRfZXZlbnRzLnB1c2goewogICAgICAgICAgZXZlbnQ6IGV2ZW50LAogICAgICAgICAgZnVuYzogZnVuYwogICAgICAgIH0pOwoKICAgICAgICByZWZlcmVuY2UuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZnVuYyk7CiAgICAgIH0pOyAvLyBzY2hlZHVsZSBoaWRlIHRvb2x0aXAKCiAgICAgIG9wcG9zaXRlRXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGZ1bmMgPSBmdW5jdGlvbiBmdW5jKGV2ZW50KSB7CiAgICAgICAgICBpZiAoZXZlbnQudXNlZEJ5VG9vbHRpcCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXM1LmhpZGUoewogICAgICAgICAgICBldmVudDogZXZlbnQKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzNS5oaWRkZW4gPSB0cnVlOwogICAgICAgIH07CgogICAgICAgIF90aGlzNS4kX2V2ZW50cy5wdXNoKHsKICAgICAgICAgIGV2ZW50OiBldmVudCwKICAgICAgICAgIGZ1bmM6IGZ1bmMKICAgICAgICB9KTsKCiAgICAgICAgcmVmZXJlbmNlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGZ1bmMpOwogICAgICB9KTsKICAgIH0sCiAgICAkX3NjaGVkdWxlU2hvdzogZnVuY3Rpb24gJF9zY2hlZHVsZVNob3coKSB7CiAgICAgIHZhciBza2lwRGVsYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgICBjbGVhclRpbWVvdXQodGhpcy4kX3NjaGVkdWxlVGltZXIpOwoKICAgICAgaWYgKHNraXBEZWxheSkgewogICAgICAgIHRoaXMuJF9zaG93KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gZGVmYXVsdHMgdG8gMAogICAgICAgIHZhciBjb21wdXRlZERlbGF5ID0gcGFyc2VJbnQodGhpcy5kZWxheSAmJiB0aGlzLmRlbGF5LnNob3cgfHwgdGhpcy5kZWxheSB8fCAwKTsKICAgICAgICB0aGlzLiRfc2NoZWR1bGVUaW1lciA9IHNldFRpbWVvdXQodGhpcy4kX3Nob3cuYmluZCh0aGlzKSwgY29tcHV0ZWREZWxheSk7CiAgICAgIH0KICAgIH0sCiAgICAkX3NjaGVkdWxlSGlkZTogZnVuY3Rpb24gJF9zY2hlZHVsZUhpZGUoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdmFyIGV2ZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBudWxsOwogICAgICB2YXIgc2tpcERlbGF5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuJF9zY2hlZHVsZVRpbWVyKTsKCiAgICAgIGlmIChza2lwRGVsYXkpIHsKICAgICAgICB0aGlzLiRfaGlkZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGRlZmF1bHRzIHRvIDAKICAgICAgICB2YXIgY29tcHV0ZWREZWxheSA9IHBhcnNlSW50KHRoaXMuZGVsYXkgJiYgdGhpcy5kZWxheS5oaWRlIHx8IHRoaXMuZGVsYXkgfHwgMCk7CiAgICAgICAgdGhpcy4kX3NjaGVkdWxlVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICghX3RoaXM2LmlzT3BlbikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IC8vIGlmIHdlIGFyZSBoaWRpbmcgYmVjYXVzZSBvZiBhIG1vdXNlbGVhdmUsIHdlIG11c3QgY2hlY2sgdGhhdCB0aGUgbmV3CiAgICAgICAgICAvLyByZWZlcmVuY2UgaXNuJ3QgdGhlIHRvb2x0aXAsIGJlY2F1c2UgaW4gdGhpcyBjYXNlIHdlIGRvbid0IHdhbnQgdG8gaGlkZSBpdAoKCiAgICAgICAgICBpZiAoZXZlbnQgJiYgZXZlbnQudHlwZSA9PT0gJ21vdXNlbGVhdmUnKSB7CiAgICAgICAgICAgIHZhciBpc1NldCA9IF90aGlzNi4kX3NldFRvb2x0aXBOb2RlRXZlbnQoZXZlbnQpOyAvLyBpZiB3ZSBzZXQgdGhlIG5ldyBldmVudCwgZG9uJ3QgaGlkZSB0aGUgdG9vbHRpcCB5ZXQKICAgICAgICAgICAgLy8gdGhlIG5ldyBldmVudCB3aWxsIHRha2UgY2FyZSB0byBoaWRlIGl0IGlmIG5lY2Vzc2FyeQoKCiAgICAgICAgICAgIGlmIChpc1NldCkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzNi4kX2hpZGUoKTsKICAgICAgICB9LCBjb21wdXRlZERlbGF5KTsKICAgICAgfQogICAgfSwKICAgICRfc2V0VG9vbHRpcE5vZGVFdmVudDogZnVuY3Rpb24gJF9zZXRUb29sdGlwTm9kZUV2ZW50KGV2ZW50KSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdmFyIHJlZmVyZW5jZSA9IHRoaXMuJHJlZnMudHJpZ2dlcjsKICAgICAgdmFyIHBvcG92ZXJOb2RlID0gdGhpcy4kcmVmcy5wb3BvdmVyOwogICAgICB2YXIgcmVsYXRlZHJlZmVyZW5jZSA9IGV2ZW50LnJlbGF0ZWRyZWZlcmVuY2UgfHwgZXZlbnQudG9FbGVtZW50IHx8IGV2ZW50LnJlbGF0ZWRUYXJnZXQ7CgogICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjayhldmVudDIpIHsKICAgICAgICB2YXIgcmVsYXRlZHJlZmVyZW5jZTIgPSBldmVudDIucmVsYXRlZHJlZmVyZW5jZSB8fCBldmVudDIudG9FbGVtZW50IHx8IGV2ZW50Mi5yZWxhdGVkVGFyZ2V0OyAvLyBSZW1vdmUgZXZlbnQgbGlzdGVuZXIgYWZ0ZXIgY2FsbAoKICAgICAgICBwb3BvdmVyTm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LnR5cGUsIGNhbGxiYWNrKTsgLy8gSWYgdGhlIG5ldyByZWZlcmVuY2UgaXMgbm90IHRoZSByZWZlcmVuY2UgZWxlbWVudAoKICAgICAgICBpZiAoIXJlZmVyZW5jZS5jb250YWlucyhyZWxhdGVkcmVmZXJlbmNlMikpIHsKICAgICAgICAgIC8vIFNjaGVkdWxlIHRvIGhpZGUgdG9vbHRpcAogICAgICAgICAgX3RoaXM3LmhpZGUoewogICAgICAgICAgICBldmVudDogZXZlbnQyCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAocG9wb3Zlck5vZGUuY29udGFpbnMocmVsYXRlZHJlZmVyZW5jZSkpIHsKICAgICAgICAvLyBsaXN0ZW4gdG8gbW91c2VsZWF2ZSBvbiB0aGUgdG9vbHRpcCBlbGVtZW50IHRvIGJlIGFibGUgdG8gaGlkZSB0aGUgdG9vbHRpcAogICAgICAgIHBvcG92ZXJOb2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQudHlwZSwgY2FsbGJhY2spOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgJF9yZW1vdmVFdmVudExpc3RlbmVyczogZnVuY3Rpb24gJF9yZW1vdmVFdmVudExpc3RlbmVycygpIHsKICAgICAgdmFyIHJlZmVyZW5jZSA9IHRoaXMuJHJlZnMudHJpZ2dlcjsKICAgICAgdGhpcy4kX2V2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmNCkgewogICAgICAgIHZhciBmdW5jID0gX3JlZjQuZnVuYywKICAgICAgICAgICAgZXZlbnQgPSBfcmVmNC5ldmVudDsKICAgICAgICByZWZlcmVuY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgZnVuYyk7CiAgICAgIH0pOwogICAgICB0aGlzLiRfZXZlbnRzID0gW107CiAgICB9LAogICAgJF91cGRhdGVQb3BwZXI6IGZ1bmN0aW9uICRfdXBkYXRlUG9wcGVyKGNiKSB7CiAgICAgIGlmICh0aGlzLnBvcHBlckluc3RhbmNlKSB7CiAgICAgICAgY2IoKTsKICAgICAgICBpZiAodGhpcy5pc09wZW4pIHRoaXMucG9wcGVySW5zdGFuY2Uuc2NoZWR1bGVVcGRhdGUoKTsKICAgICAgfQogICAgfSwKICAgICRfcmVzdGFydFBvcHBlcjogZnVuY3Rpb24gJF9yZXN0YXJ0UG9wcGVyKCkgewogICAgICBpZiAodGhpcy5wb3BwZXJJbnN0YW5jZSkgewogICAgICAgIHZhciBpc09wZW4gPSB0aGlzLmlzT3BlbjsKICAgICAgICB0aGlzLmRpc3Bvc2UoKTsKICAgICAgICB0aGlzLiRfaXNEaXNwb3NlZCA9IGZhbHNlOwogICAgICAgIHRoaXMuJF9pbml0KCk7CgogICAgICAgIGlmIChpc09wZW4pIHsKICAgICAgICAgIHRoaXMuc2hvdyh7CiAgICAgICAgICAgIHNraXBEZWxheTogdHJ1ZSwKICAgICAgICAgICAgZm9yY2U6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgICRfaGFuZGxlR2xvYmFsQ2xvc2U6IGZ1bmN0aW9uICRfaGFuZGxlR2xvYmFsQ2xvc2UoZXZlbnQpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB2YXIgdG91Y2ggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgICBpZiAodGhpcy4kX2JlaW5nU2hvd2VkKSByZXR1cm47CiAgICAgIHRoaXMuaGlkZSh7CiAgICAgICAgZXZlbnQ6IGV2ZW50CiAgICAgIH0pOwoKICAgICAgaWYgKGV2ZW50LmNsb3NlUG9wb3ZlcikgewogICAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlLWRpcmVjdGl2ZScpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJGVtaXQoJ2F1dG8taGlkZScpOwogICAgICB9CgogICAgICBpZiAodG91Y2gpIHsKICAgICAgICB0aGlzLiRfcHJldmVudE9wZW4gPSB0cnVlOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM4LiRfcHJldmVudE9wZW4gPSBmYWxzZTsKICAgICAgICB9LCAzMDApOwogICAgICB9CiAgICB9LAogICAgJF9oYW5kbGVSZXNpemU6IGZ1bmN0aW9uICRfaGFuZGxlUmVzaXplKCkgewogICAgICBpZiAodGhpcy5pc09wZW4gJiYgdGhpcy5wb3BwZXJJbnN0YW5jZSkgewogICAgICAgIHRoaXMucG9wcGVySW5zdGFuY2Uuc2NoZWR1bGVVcGRhdGUoKTsKICAgICAgICB0aGlzLiRlbWl0KCdyZXNpemUnKTsKICAgICAgfQogICAgfQogIH0KfTsKCmlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7CiAgaWYgKGlzSU9TKSB7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGhhbmRsZUdsb2JhbFRvdWNoZW5kLCBzdXBwb3J0c1Bhc3NpdmUgPyB7CiAgICAgIHBhc3NpdmU6IHRydWUsCiAgICAgIGNhcHR1cmU6IHRydWUKICAgIH0gOiB0cnVlKTsKICB9IGVsc2UgewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlR2xvYmFsQ2xpY2ssIHRydWUpOwogIH0KfQoKZnVuY3Rpb24gaGFuZGxlR2xvYmFsQ2xpY2soZXZlbnQpIHsKICBoYW5kbGVHbG9iYWxDbG9zZShldmVudCk7Cn0KCmZ1bmN0aW9uIGhhbmRsZUdsb2JhbFRvdWNoZW5kKGV2ZW50KSB7CiAgaGFuZGxlR2xvYmFsQ2xvc2UoZXZlbnQsIHRydWUpOwp9CgpmdW5jdGlvbiBoYW5kbGVHbG9iYWxDbG9zZShldmVudCkgewogIHZhciB0b3VjaCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CgogIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGkpIHsKICAgIHZhciBwb3BvdmVyID0gb3BlblBvcG92ZXJzW2ldOwoKICAgIGlmIChwb3BvdmVyLiRyZWZzLnBvcG92ZXIpIHsKICAgICAgdmFyIGNvbnRhaW5zID0gcG9wb3Zlci4kcmVmcy5wb3BvdmVyLmNvbnRhaW5zKGV2ZW50LnRhcmdldCk7CiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGV2ZW50LmNsb3NlQWxsUG9wb3ZlciB8fCBldmVudC5jbG9zZVBvcG92ZXIgJiYgY29udGFpbnMgfHwgcG9wb3Zlci5hdXRvSGlkZSAmJiAhY29udGFpbnMpIHsKICAgICAgICAgIHBvcG92ZXIuJF9oYW5kbGVHbG9iYWxDbG9zZShldmVudCwgdG91Y2gpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfTsgLy8gRGVsYXkgc28gdGhhdCBjbG9zZSBkaXJlY3RpdmUgaGFzIHRpbWUgdG8gc2V0IHZhbHVlcwoKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcGVuUG9wb3ZlcnMubGVuZ3RoOyBpKyspIHsKICAgIF9sb29wKGkpOwogIH0KfQoKZnVuY3Rpb24gbm9ybWFsaXplQ29tcG9uZW50KHRlbXBsYXRlLCBzdHlsZSwgc2NyaXB0LCBzY29wZUlkLCBpc0Z1bmN0aW9uYWxUZW1wbGF0ZSwgbW9kdWxlSWRlbnRpZmllcgovKiBzZXJ2ZXIgb25seSAqLwosIHNoYWRvd01vZGUsIGNyZWF0ZUluamVjdG9yLCBjcmVhdGVJbmplY3RvclNTUiwgY3JlYXRlSW5qZWN0b3JTaGFkb3cpIHsKICBpZiAodHlwZW9mIHNoYWRvd01vZGUgIT09ICdib29sZWFuJykgewogICAgY3JlYXRlSW5qZWN0b3JTU1IgPSBjcmVhdGVJbmplY3RvcjsKICAgIGNyZWF0ZUluamVjdG9yID0gc2hhZG93TW9kZTsKICAgIHNoYWRvd01vZGUgPSBmYWxzZTsKICB9IC8vIFZ1ZS5leHRlbmQgY29uc3RydWN0b3IgZXhwb3J0IGludGVyb3AuCgoKICB2YXIgb3B0aW9ucyA9IHR5cGVvZiBzY3JpcHQgPT09ICdmdW5jdGlvbicgPyBzY3JpcHQub3B0aW9ucyA6IHNjcmlwdDsgLy8gcmVuZGVyIGZ1bmN0aW9ucwoKICBpZiAodGVtcGxhdGUgJiYgdGVtcGxhdGUucmVuZGVyKSB7CiAgICBvcHRpb25zLnJlbmRlciA9IHRlbXBsYXRlLnJlbmRlcjsKICAgIG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zID0gdGVtcGxhdGUuc3RhdGljUmVuZGVyRm5zOwogICAgb3B0aW9ucy5fY29tcGlsZWQgPSB0cnVlOyAvLyBmdW5jdGlvbmFsIHRlbXBsYXRlCgogICAgaWYgKGlzRnVuY3Rpb25hbFRlbXBsYXRlKSB7CiAgICAgIG9wdGlvbnMuZnVuY3Rpb25hbCA9IHRydWU7CiAgICB9CiAgfSAvLyBzY29wZWRJZAoKCiAgaWYgKHNjb3BlSWQpIHsKICAgIG9wdGlvbnMuX3Njb3BlSWQgPSBzY29wZUlkOwogIH0KCiAgdmFyIGhvb2s7CgogIGlmIChtb2R1bGVJZGVudGlmaWVyKSB7CiAgICAvLyBzZXJ2ZXIgYnVpbGQKICAgIGhvb2sgPSBmdW5jdGlvbiBob29rKGNvbnRleHQpIHsKICAgICAgLy8gMi4zIGluamVjdGlvbgogICAgICBjb250ZXh0ID0gY29udGV4dCB8fCAvLyBjYWNoZWQgY2FsbAogICAgICB0aGlzLiR2bm9kZSAmJiB0aGlzLiR2bm9kZS5zc3JDb250ZXh0IHx8IC8vIHN0YXRlZnVsCiAgICAgIHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LiR2bm9kZSAmJiB0aGlzLnBhcmVudC4kdm5vZGUuc3NyQ29udGV4dDsgLy8gZnVuY3Rpb25hbAogICAgICAvLyAyLjIgd2l0aCBydW5Jbk5ld0NvbnRleHQ6IHRydWUKCiAgICAgIGlmICghY29udGV4dCAmJiB0eXBlb2YgX19WVUVfU1NSX0NPTlRFWFRfXyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBjb250ZXh0ID0gX19WVUVfU1NSX0NPTlRFWFRfXzsKICAgICAgfSAvLyBpbmplY3QgY29tcG9uZW50IHN0eWxlcwoKCiAgICAgIGlmIChzdHlsZSkgewogICAgICAgIHN0eWxlLmNhbGwodGhpcywgY3JlYXRlSW5qZWN0b3JTU1IoY29udGV4dCkpOwogICAgICB9IC8vIHJlZ2lzdGVyIGNvbXBvbmVudCBtb2R1bGUgaWRlbnRpZmllciBmb3IgYXN5bmMgY2h1bmsgaW5mZXJlbmNlCgoKICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dC5fcmVnaXN0ZXJlZENvbXBvbmVudHMpIHsKICAgICAgICBjb250ZXh0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cy5hZGQobW9kdWxlSWRlbnRpZmllcik7CiAgICAgIH0KICAgIH07IC8vIHVzZWQgYnkgc3NyIGluIGNhc2UgY29tcG9uZW50IGlzIGNhY2hlZCBhbmQgYmVmb3JlQ3JlYXRlCiAgICAvLyBuZXZlciBnZXRzIGNhbGxlZAoKCiAgICBvcHRpb25zLl9zc3JSZWdpc3RlciA9IGhvb2s7CiAgfSBlbHNlIGlmIChzdHlsZSkgewogICAgaG9vayA9IHNoYWRvd01vZGUgPyBmdW5jdGlvbiAoY29udGV4dCkgewogICAgICBzdHlsZS5jYWxsKHRoaXMsIGNyZWF0ZUluamVjdG9yU2hhZG93KGNvbnRleHQsIHRoaXMuJHJvb3QuJG9wdGlvbnMuc2hhZG93Um9vdCkpOwogICAgfSA6IGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgICAgIHN0eWxlLmNhbGwodGhpcywgY3JlYXRlSW5qZWN0b3IoY29udGV4dCkpOwogICAgfTsKICB9CgogIGlmIChob29rKSB7CiAgICBpZiAob3B0aW9ucy5mdW5jdGlvbmFsKSB7CiAgICAgIC8vIHJlZ2lzdGVyIGZvciBmdW5jdGlvbmFsIGNvbXBvbmVudCBpbiB2dWUgZmlsZQogICAgICB2YXIgb3JpZ2luYWxSZW5kZXIgPSBvcHRpb25zLnJlbmRlcjsKCiAgICAgIG9wdGlvbnMucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyV2l0aFN0eWxlSW5qZWN0aW9uKGgsIGNvbnRleHQpIHsKICAgICAgICBob29rLmNhbGwoY29udGV4dCk7CiAgICAgICAgcmV0dXJuIG9yaWdpbmFsUmVuZGVyKGgsIGNvbnRleHQpOwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgLy8gaW5qZWN0IGNvbXBvbmVudCByZWdpc3RyYXRpb24gYXMgYmVmb3JlQ3JlYXRlIGhvb2sKICAgICAgdmFyIGV4aXN0aW5nID0gb3B0aW9ucy5iZWZvcmVDcmVhdGU7CiAgICAgIG9wdGlvbnMuYmVmb3JlQ3JlYXRlID0gZXhpc3RpbmcgPyBbXS5jb25jYXQoZXhpc3RpbmcsIGhvb2spIDogW2hvb2tdOwogICAgfQogIH0KCiAgcmV0dXJuIHNjcmlwdDsKfQovKiBzY3JpcHQgKi8KCgp2YXIgX192dWVfc2NyaXB0X18gPSBzY3JpcHQ7Ci8qIHRlbXBsYXRlICovCgp2YXIgX192dWVfcmVuZGVyX18gPSBmdW5jdGlvbiBfX3Z1ZV9yZW5kZXJfXygpIHsKICB2YXIgX3ZtID0gdGhpczsKCiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50OwoKICB2YXIgX2MgPSBfdm0uX3NlbGYuX2MgfHwgX2g7CgogIHJldHVybiBfYygiZGl2IiwgewogICAgc3RhdGljQ2xhc3M6ICJ2LXBvcG92ZXIiLAogICAgImNsYXNzIjogX3ZtLmNzc0NsYXNzCiAgfSwgW19jKCJkaXYiLCB7CiAgICByZWY6ICJ0cmlnZ2VyIiwKICAgIHN0YXRpY0NsYXNzOiAidHJpZ2dlciIsCiAgICBzdGF0aWNTdHlsZTogewogICAgICBkaXNwbGF5OiAiaW5saW5lLWJsb2NrIgogICAgfSwKICAgIGF0dHJzOiB7CiAgICAgICJhcmlhLWRlc2NyaWJlZGJ5IjogX3ZtLnBvcG92ZXJJZCwKICAgICAgdGFiaW5kZXg6IF92bS50cmlnZ2VyLmluZGV4T2YoImZvY3VzIikgIT09IC0xID8gMCA6IHVuZGVmaW5lZAogICAgfQogIH0sIFtfdm0uX3QoImRlZmF1bHQiKV0sIDIpLCBfdm0uX3YoIiAiKSwgX2MoImRpdiIsIHsKICAgIHJlZjogInBvcG92ZXIiLAogICAgImNsYXNzIjogW192bS5wb3BvdmVyQmFzZUNsYXNzLCBfdm0ucG9wb3ZlckNsYXNzLCBfdm0uY3NzQ2xhc3NdLAogICAgc3R5bGU6IHsKICAgICAgdmlzaWJpbGl0eTogX3ZtLmlzT3BlbiA/ICJ2aXNpYmxlIiA6ICJoaWRkZW4iCiAgICB9LAogICAgYXR0cnM6IHsKICAgICAgaWQ6IF92bS5wb3BvdmVySWQsCiAgICAgICJhcmlhLWhpZGRlbiI6IF92bS5pc09wZW4gPyAiZmFsc2UiIDogInRydWUiLAogICAgICB0YWJpbmRleDogX3ZtLmF1dG9IaWRlID8gMCA6IHVuZGVmaW5lZAogICAgfSwKICAgIG9uOiB7CiAgICAgIGtleXVwOiBmdW5jdGlvbiBrZXl1cCgkZXZlbnQpIHsKICAgICAgICBpZiAoISRldmVudC50eXBlLmluZGV4T2YoImtleSIpICYmIF92bS5faygkZXZlbnQua2V5Q29kZSwgImVzYyIsIDI3LCAkZXZlbnQua2V5LCBbIkVzYyIsICJFc2NhcGUiXSkpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgX3ZtLmF1dG9IaWRlICYmIF92bS5oaWRlKCk7CiAgICAgIH0KICAgIH0KICB9LCBbX2MoImRpdiIsIHsKICAgICJjbGFzcyI6IF92bS5wb3BvdmVyV3JhcHBlckNsYXNzCiAgfSwgW19jKCJkaXYiLCB7CiAgICByZWY6ICJpbm5lciIsCiAgICAiY2xhc3MiOiBfdm0ucG9wb3ZlcklubmVyQ2xhc3MsCiAgICBzdGF0aWNTdHlsZTogewogICAgICBwb3NpdGlvbjogInJlbGF0aXZlIgogICAgfQogIH0sIFtfYygiZGl2IiwgW192bS5fdCgicG9wb3ZlciIpXSwgMiksIF92bS5fdigiICIpLCBfdm0uaGFuZGxlUmVzaXplID8gX2MoIlJlc2l6ZU9ic2VydmVyIiwgewogICAgb246IHsKICAgICAgbm90aWZ5OiBfdm0uJF9oYW5kbGVSZXNpemUKICAgIH0KICB9KSA6IF92bS5fZSgpXSwgMSksIF92bS5fdigiICIpLCBfYygiZGl2IiwgewogICAgcmVmOiAiYXJyb3ciLAogICAgImNsYXNzIjogX3ZtLnBvcG92ZXJBcnJvd0NsYXNzCiAgfSldKV0pXSk7Cn07Cgp2YXIgX192dWVfc3RhdGljUmVuZGVyRm5zX18gPSBbXTsKX192dWVfcmVuZGVyX18uX3dpdGhTdHJpcHBlZCA9IHRydWU7Ci8qIHN0eWxlICovCgp2YXIgX192dWVfaW5qZWN0X3N0eWxlc19fID0gdW5kZWZpbmVkOwovKiBzY29wZWQgKi8KCnZhciBfX3Z1ZV9zY29wZV9pZF9fID0gdW5kZWZpbmVkOwovKiBtb2R1bGUgaWRlbnRpZmllciAqLwoKdmFyIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18gPSB1bmRlZmluZWQ7Ci8qIGZ1bmN0aW9uYWwgdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18gPSBmYWxzZTsKLyogc3R5bGUgaW5qZWN0ICovCgovKiBzdHlsZSBpbmplY3QgU1NSICovCgovKiBzdHlsZSBpbmplY3Qgc2hhZG93IGRvbSAqLwoKdmFyIF9fdnVlX2NvbXBvbmVudF9fID0gbm9ybWFsaXplQ29tcG9uZW50KHsKICByZW5kZXI6IF9fdnVlX3JlbmRlcl9fLAogIHN0YXRpY1JlbmRlckZuczogX192dWVfc3RhdGljUmVuZGVyRm5zX18KfSwgX192dWVfaW5qZWN0X3N0eWxlc19fLCBfX3Z1ZV9zY3JpcHRfXywgX192dWVfc2NvcGVfaWRfXywgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fLCBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fLCBmYWxzZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7Cgp2YXIgZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiAoKSB7CiAgdHJ5IHsKICAgIHZhciBmdW5jID0gX2dldE5hdGl2ZShPYmplY3QsICdkZWZpbmVQcm9wZXJ0eScpOwoKICAgIGZ1bmMoe30sICcnLCB7fSk7CiAgICByZXR1cm4gZnVuYzsKICB9IGNhdGNoIChlKSB7fQp9KCk7Cgp2YXIgX2RlZmluZVByb3BlcnR5JDEgPSBkZWZpbmVQcm9wZXJ0eTsKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBhc3NpZ25WYWx1ZWAgYW5kIGBhc3NpZ25NZXJnZVZhbHVlYCB3aXRob3V0CiAqIHZhbHVlIGNoZWNrcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIG1vZGlmeS4KICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBhc3NpZ24uCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGFzc2lnbi4KICovCgpmdW5jdGlvbiBiYXNlQXNzaWduVmFsdWUob2JqZWN0LCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSA9PSAnX19wcm90b19fJyAmJiBfZGVmaW5lUHJvcGVydHkkMSkgewogICAgX2RlZmluZVByb3BlcnR5JDEob2JqZWN0LCBrZXksIHsKICAgICAgJ2NvbmZpZ3VyYWJsZSc6IHRydWUsCiAgICAgICdlbnVtZXJhYmxlJzogdHJ1ZSwKICAgICAgJ3ZhbHVlJzogdmFsdWUsCiAgICAgICd3cml0YWJsZSc6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmplY3Rba2V5XSA9IHZhbHVlOwogIH0KfQoKdmFyIF9iYXNlQXNzaWduVmFsdWUgPSBiYXNlQXNzaWduVmFsdWU7Ci8qKgogKiBUaGlzIGZ1bmN0aW9uIGlzIGxpa2UgYGFzc2lnblZhbHVlYCBleGNlcHQgdGhhdCBpdCBkb2Vzbid0IGFzc2lnbgogKiBgdW5kZWZpbmVkYCB2YWx1ZXMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuCiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gYXNzaWduLgogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBhc3NpZ24uCiAqLwoKZnVuY3Rpb24gYXNzaWduTWVyZ2VWYWx1ZShvYmplY3QsIGtleSwgdmFsdWUpIHsKICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiAhZXFfMShvYmplY3Rba2V5XSwgdmFsdWUpIHx8IHZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkgewogICAgX2Jhc2VBc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgdmFsdWUpOwogIH0KfQoKdmFyIF9hc3NpZ25NZXJnZVZhbHVlID0gYXNzaWduTWVyZ2VWYWx1ZTsKLyoqCiAqIENyZWF0ZXMgYSBiYXNlIGZ1bmN0aW9uIGZvciBtZXRob2RzIGxpa2UgYF8uZm9ySW5gIGFuZCBgXy5mb3JPd25gLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC4KICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYmFzZSBmdW5jdGlvbi4KICovCgpmdW5jdGlvbiBjcmVhdGVCYXNlRm9yKGZyb21SaWdodCkgewogIHJldHVybiBmdW5jdGlvbiAob2JqZWN0LCBpdGVyYXRlZSwga2V5c0Z1bmMpIHsKICAgIHZhciBpbmRleCA9IC0xLAogICAgICAgIGl0ZXJhYmxlID0gT2JqZWN0KG9iamVjdCksCiAgICAgICAgcHJvcHMgPSBrZXlzRnVuYyhvYmplY3QpLAogICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDsKCiAgICB3aGlsZSAobGVuZ3RoLS0pIHsKICAgICAgdmFyIGtleSA9IHByb3BzW2Zyb21SaWdodCA/IGxlbmd0aCA6ICsraW5kZXhdOwoKICAgICAgaWYgKGl0ZXJhdGVlKGl0ZXJhYmxlW2tleV0sIGtleSwgaXRlcmFibGUpID09PSBmYWxzZSkgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG9iamVjdDsKICB9Owp9Cgp2YXIgX2NyZWF0ZUJhc2VGb3IgPSBjcmVhdGVCYXNlRm9yOwovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGJhc2VGb3JPd25gIHdoaWNoIGl0ZXJhdGVzIG92ZXIgYG9iamVjdGAKICogcHJvcGVydGllcyByZXR1cm5lZCBieSBga2V5c0Z1bmNgIGFuZCBpbnZva2VzIGBpdGVyYXRlZWAgZm9yIGVhY2ggcHJvcGVydHkuCiAqIEl0ZXJhdGVlIGZ1bmN0aW9ucyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnkgZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi4KICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5c0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGdldCB0aGUga2V5cyBvZiBgb2JqZWN0YC4KICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC4KICovCgp2YXIgYmFzZUZvciA9IF9jcmVhdGVCYXNlRm9yKCk7Cgp2YXIgX2Jhc2VGb3IgPSBiYXNlRm9yOwoKdmFyIF9jbG9uZUJ1ZmZlciA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGV4cG9ydHNgLiAqLwogIHZhciBmcmVlRXhwb3J0cyA9IGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0czsKICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYG1vZHVsZWAuICovCgogIHZhciBmcmVlTW9kdWxlID0gZnJlZUV4cG9ydHMgJiYgJ29iamVjdCcgPT0gJ29iamVjdCcgJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlOwogIC8qKiBEZXRlY3QgdGhlIHBvcHVsYXIgQ29tbW9uSlMgZXh0ZW5zaW9uIGBtb2R1bGUuZXhwb3J0c2AuICovCgogIHZhciBtb2R1bGVFeHBvcnRzID0gZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLmV4cG9ydHMgPT09IGZyZWVFeHBvcnRzOwogIC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqLwoKICB2YXIgQnVmZmVyID0gbW9kdWxlRXhwb3J0cyA/IF9yb290LkJ1ZmZlciA6IHVuZGVmaW5lZCwKICAgICAgYWxsb2NVbnNhZmUgPSBCdWZmZXIgPyBCdWZmZXIuYWxsb2NVbnNhZmUgOiB1bmRlZmluZWQ7CiAgLyoqCiAgICogQ3JlYXRlcyBhIGNsb25lIG9mICBgYnVmZmVyYC4KICAgKgogICAqIEBwcml2YXRlCiAgICogQHBhcmFtIHtCdWZmZXJ9IGJ1ZmZlciBUaGUgYnVmZmVyIHRvIGNsb25lLgogICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzRGVlcF0gU3BlY2lmeSBhIGRlZXAgY2xvbmUuCiAgICogQHJldHVybnMge0J1ZmZlcn0gUmV0dXJucyB0aGUgY2xvbmVkIGJ1ZmZlci4KICAgKi8KCiAgZnVuY3Rpb24gY2xvbmVCdWZmZXIoYnVmZmVyLCBpc0RlZXApIHsKICAgIGlmIChpc0RlZXApIHsKICAgICAgcmV0dXJuIGJ1ZmZlci5zbGljZSgpOwogICAgfQoKICAgIHZhciBsZW5ndGggPSBidWZmZXIubGVuZ3RoLAogICAgICAgIHJlc3VsdCA9IGFsbG9jVW5zYWZlID8gYWxsb2NVbnNhZmUobGVuZ3RoKSA6IG5ldyBidWZmZXIuY29uc3RydWN0b3IobGVuZ3RoKTsKICAgIGJ1ZmZlci5jb3B5KHJlc3VsdCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgbW9kdWxlLmV4cG9ydHMgPSBjbG9uZUJ1ZmZlcjsKfSk7Ci8qKgogKiBDcmVhdGVzIGEgY2xvbmUgb2YgYGFycmF5QnVmZmVyYC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYXJyYXlCdWZmZXIgVGhlIGFycmF5IGJ1ZmZlciB0byBjbG9uZS4KICogQHJldHVybnMge0FycmF5QnVmZmVyfSBSZXR1cm5zIHRoZSBjbG9uZWQgYXJyYXkgYnVmZmVyLgogKi8KCgpmdW5jdGlvbiBjbG9uZUFycmF5QnVmZmVyKGFycmF5QnVmZmVyKSB7CiAgdmFyIHJlc3VsdCA9IG5ldyBhcnJheUJ1ZmZlci5jb25zdHJ1Y3RvcihhcnJheUJ1ZmZlci5ieXRlTGVuZ3RoKTsKICBuZXcgX1VpbnQ4QXJyYXkocmVzdWx0KS5zZXQobmV3IF9VaW50OEFycmF5KGFycmF5QnVmZmVyKSk7CiAgcmV0dXJuIHJlc3VsdDsKfQoKdmFyIF9jbG9uZUFycmF5QnVmZmVyID0gY2xvbmVBcnJheUJ1ZmZlcjsKLyoqCiAqIENyZWF0ZXMgYSBjbG9uZSBvZiBgdHlwZWRBcnJheWAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSB0eXBlZEFycmF5IFRoZSB0eXBlZCBhcnJheSB0byBjbG9uZS4KICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwXSBTcGVjaWZ5IGEgZGVlcCBjbG9uZS4KICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2xvbmVkIHR5cGVkIGFycmF5LgogKi8KCmZ1bmN0aW9uIGNsb25lVHlwZWRBcnJheSh0eXBlZEFycmF5LCBpc0RlZXApIHsKICB2YXIgYnVmZmVyID0gaXNEZWVwID8gX2Nsb25lQXJyYXlCdWZmZXIodHlwZWRBcnJheS5idWZmZXIpIDogdHlwZWRBcnJheS5idWZmZXI7CiAgcmV0dXJuIG5ldyB0eXBlZEFycmF5LmNvbnN0cnVjdG9yKGJ1ZmZlciwgdHlwZWRBcnJheS5ieXRlT2Zmc2V0LCB0eXBlZEFycmF5Lmxlbmd0aCk7Cn0KCnZhciBfY2xvbmVUeXBlZEFycmF5ID0gY2xvbmVUeXBlZEFycmF5OwovKioKICogQ29waWVzIHRoZSB2YWx1ZXMgb2YgYHNvdXJjZWAgdG8gYGFycmF5YC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtBcnJheX0gc291cmNlIFRoZSBhcnJheSB0byBjb3B5IHZhbHVlcyBmcm9tLgogKiBAcGFyYW0ge0FycmF5fSBbYXJyYXk9W11dIFRoZSBhcnJheSB0byBjb3B5IHZhbHVlcyB0by4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuCiAqLwoKZnVuY3Rpb24gY29weUFycmF5KHNvdXJjZSwgYXJyYXkpIHsKICB2YXIgaW5kZXggPSAtMSwKICAgICAgbGVuZ3RoID0gc291cmNlLmxlbmd0aDsKICBhcnJheSB8fCAoYXJyYXkgPSBBcnJheShsZW5ndGgpKTsKCiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgIGFycmF5W2luZGV4XSA9IHNvdXJjZVtpbmRleF07CiAgfQoKICByZXR1cm4gYXJyYXk7Cn0KCnZhciBfY29weUFycmF5ID0gY29weUFycmF5OwovKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi8KCnZhciBvYmplY3RDcmVhdGUgPSBPYmplY3QuY3JlYXRlOwovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY3JlYXRlYCB3aXRob3V0IHN1cHBvcnQgZm9yIGFzc2lnbmluZwogKiBwcm9wZXJ0aWVzIHRvIHRoZSBjcmVhdGVkIG9iamVjdC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IHByb3RvIFRoZSBvYmplY3QgdG8gaW5oZXJpdCBmcm9tLgogKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LgogKi8KCnZhciBiYXNlQ3JlYXRlID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIG9iamVjdCgpIHt9CgogIHJldHVybiBmdW5jdGlvbiAocHJvdG8pIHsKICAgIGlmICghaXNPYmplY3RfMShwcm90bykpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfQoKICAgIGlmIChvYmplY3RDcmVhdGUpIHsKICAgICAgcmV0dXJuIG9iamVjdENyZWF0ZShwcm90byk7CiAgICB9CgogICAgb2JqZWN0LnByb3RvdHlwZSA9IHByb3RvOwogICAgdmFyIHJlc3VsdCA9IG5ldyBvYmplY3QoKTsKICAgIG9iamVjdC5wcm90b3R5cGUgPSB1bmRlZmluZWQ7CiAgICByZXR1cm4gcmVzdWx0OwogIH07Cn0oKTsKCnZhciBfYmFzZUNyZWF0ZSA9IGJhc2VDcmVhdGU7Ci8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqLwoKdmFyIGdldFByb3RvdHlwZSA9IF9vdmVyQXJnKE9iamVjdC5nZXRQcm90b3R5cGVPZiwgT2JqZWN0KTsKCnZhciBfZ2V0UHJvdG90eXBlID0gZ2V0UHJvdG90eXBlOwovKioKICogSW5pdGlhbGl6ZXMgYW4gb2JqZWN0IGNsb25lLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2xvbmUuCiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGluaXRpYWxpemVkIGNsb25lLgogKi8KCmZ1bmN0aW9uIGluaXRDbG9uZU9iamVjdChvYmplY3QpIHsKICByZXR1cm4gdHlwZW9mIG9iamVjdC5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmICFfaXNQcm90b3R5cGUob2JqZWN0KSA/IF9iYXNlQ3JlYXRlKF9nZXRQcm90b3R5cGUob2JqZWN0KSkgOiB7fTsKfQoKdmFyIF9pbml0Q2xvbmVPYmplY3QgPSBpbml0Q2xvbmVPYmplY3Q7Ci8qKgogKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmlzQXJyYXlMaWtlYCBleGNlcHQgdGhhdCBpdCBhbHNvIGNoZWNrcyBpZiBgdmFsdWVgCiAqIGlzIGFuIG9iamVjdC4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgNC4wLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LWxpa2Ugb2JqZWN0LAogKiAgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzQXJyYXlMaWtlT2JqZWN0KFsxLCAyLCAzXSk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc0FycmF5TGlrZU9iamVjdChkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzQXJyYXlMaWtlT2JqZWN0KCdhYmMnKTsKICogLy8gPT4gZmFsc2UKICoKICogXy5pc0FycmF5TGlrZU9iamVjdChfLm5vb3ApOwogKiAvLyA9PiBmYWxzZQogKi8KCmZ1bmN0aW9uIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSB7CiAgcmV0dXJuIGlzT2JqZWN0TGlrZV8xKHZhbHVlKSAmJiBpc0FycmF5TGlrZV8xKHZhbHVlKTsKfQoKdmFyIGlzQXJyYXlMaWtlT2JqZWN0XzEgPSBpc0FycmF5TGlrZU9iamVjdDsKLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqLwoKdmFyIG9iamVjdFRhZyQzID0gJ1tvYmplY3QgT2JqZWN0XSc7Ci8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KCnZhciBmdW5jUHJvdG8kMiA9IEZ1bmN0aW9uLnByb3RvdHlwZSwKICAgIG9iamVjdFByb3RvJGMgPSBPYmplY3QucHJvdG90eXBlOwovKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovCgp2YXIgZnVuY1RvU3RyaW5nJDIgPSBmdW5jUHJvdG8kMi50b1N0cmluZzsKLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovCgp2YXIgaGFzT3duUHJvcGVydHkkOSA9IG9iamVjdFByb3RvJGMuaGFzT3duUHJvcGVydHk7Ci8qKiBVc2VkIHRvIGluZmVyIHRoZSBgT2JqZWN0YCBjb25zdHJ1Y3Rvci4gKi8KCnZhciBvYmplY3RDdG9yU3RyaW5nID0gZnVuY1RvU3RyaW5nJDIuY2FsbChPYmplY3QpOwovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIHRoYXQgaXMsIGFuIG9iamVjdCBjcmVhdGVkIGJ5IHRoZQogKiBgT2JqZWN0YCBjb25zdHJ1Y3RvciBvciBvbmUgd2l0aCBhIGBbW1Byb3RvdHlwZV1dYCBvZiBgbnVsbGAuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDAuOC4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHBsYWluIG9iamVjdCwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBmdW5jdGlvbiBGb28oKSB7CiAqICAgdGhpcy5hID0gMTsKICogfQogKgogKiBfLmlzUGxhaW5PYmplY3QobmV3IEZvbyk7CiAqIC8vID0+IGZhbHNlCiAqCiAqIF8uaXNQbGFpbk9iamVjdChbMSwgMiwgM10pOwogKiAvLyA9PiBmYWxzZQogKgogKiBfLmlzUGxhaW5PYmplY3QoeyAneCc6IDAsICd5JzogMCB9KTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzUGxhaW5PYmplY3QoT2JqZWN0LmNyZWF0ZShudWxsKSk7CiAqIC8vID0+IHRydWUKICovCgpmdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKSB7CiAgaWYgKCFpc09iamVjdExpa2VfMSh2YWx1ZSkgfHwgX2Jhc2VHZXRUYWcodmFsdWUpICE9IG9iamVjdFRhZyQzKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICB2YXIgcHJvdG8gPSBfZ2V0UHJvdG90eXBlKHZhbHVlKTsKCiAgaWYgKHByb3RvID09PSBudWxsKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHZhciBDdG9yID0gaGFzT3duUHJvcGVydHkkOS5jYWxsKHByb3RvLCAnY29uc3RydWN0b3InKSAmJiBwcm90by5jb25zdHJ1Y3RvcjsKICByZXR1cm4gdHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yIGluc3RhbmNlb2YgQ3RvciAmJiBmdW5jVG9TdHJpbmckMi5jYWxsKEN0b3IpID09IG9iamVjdEN0b3JTdHJpbmc7Cn0KCnZhciBpc1BsYWluT2JqZWN0XzEgPSBpc1BsYWluT2JqZWN0OwovKioKICogR2V0cyB0aGUgdmFsdWUgYXQgYGtleWAsIHVubGVzcyBga2V5YCBpcyAiX19wcm90b19fIiBvciAiY29uc3RydWN0b3IiLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuCiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LgogKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUuCiAqLwoKZnVuY3Rpb24gc2FmZUdldChvYmplY3QsIGtleSkgewogIGlmIChrZXkgPT09ICdjb25zdHJ1Y3RvcicgJiYgdHlwZW9mIG9iamVjdFtrZXldID09PSAnZnVuY3Rpb24nKSB7CiAgICByZXR1cm47CiAgfQoKICBpZiAoa2V5ID09ICdfX3Byb3RvX18nKSB7CiAgICByZXR1cm47CiAgfQoKICByZXR1cm4gb2JqZWN0W2tleV07Cn0KCnZhciBfc2FmZUdldCA9IHNhZmVHZXQ7Ci8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KCnZhciBvYmplY3RQcm90byRkID0gT2JqZWN0LnByb3RvdHlwZTsKLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovCgp2YXIgaGFzT3duUHJvcGVydHkkYSA9IG9iamVjdFByb3RvJGQuaGFzT3duUHJvcGVydHk7Ci8qKgogKiBBc3NpZ25zIGB2YWx1ZWAgdG8gYGtleWAgb2YgYG9iamVjdGAgaWYgdGhlIGV4aXN0aW5nIHZhbHVlIGlzIG5vdCBlcXVpdmFsZW50CiAqIHVzaW5nIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pCiAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIG1vZGlmeS4KICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBhc3NpZ24uCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGFzc2lnbi4KICovCgpmdW5jdGlvbiBhc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgdmFsdWUpIHsKICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XTsKCiAgaWYgKCEoaGFzT3duUHJvcGVydHkkYS5jYWxsKG9iamVjdCwga2V5KSAmJiBlcV8xKG9ialZhbHVlLCB2YWx1ZSkpIHx8IHZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkgewogICAgX2Jhc2VBc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgdmFsdWUpOwogIH0KfQoKdmFyIF9hc3NpZ25WYWx1ZSA9IGFzc2lnblZhbHVlOwovKioKICogQ29waWVzIHByb3BlcnRpZXMgb2YgYHNvdXJjZWAgdG8gYG9iamVjdGAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbS4KICogQHBhcmFtIHtBcnJheX0gcHJvcHMgVGhlIHByb3BlcnR5IGlkZW50aWZpZXJzIHRvIGNvcHkuCiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0PXt9XSBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyB0by4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29waWVkIHZhbHVlcy4KICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC4KICovCgpmdW5jdGlvbiBjb3B5T2JqZWN0KHNvdXJjZSwgcHJvcHMsIG9iamVjdCwgY3VzdG9taXplcikgewogIHZhciBpc05ldyA9ICFvYmplY3Q7CiAgb2JqZWN0IHx8IChvYmplY3QgPSB7fSk7CiAgdmFyIGluZGV4ID0gLTEsCiAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDsKCiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07CiAgICB2YXIgbmV3VmFsdWUgPSBjdXN0b21pemVyID8gY3VzdG9taXplcihvYmplY3Rba2V5XSwgc291cmNlW2tleV0sIGtleSwgb2JqZWN0LCBzb3VyY2UpIDogdW5kZWZpbmVkOwoKICAgIGlmIChuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIG5ld1ZhbHVlID0gc291cmNlW2tleV07CiAgICB9CgogICAgaWYgKGlzTmV3KSB7CiAgICAgIF9iYXNlQXNzaWduVmFsdWUob2JqZWN0LCBrZXksIG5ld1ZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIF9hc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgbmV3VmFsdWUpOwogICAgfQogIH0KCiAgcmV0dXJuIG9iamVjdDsKfQoKdmFyIF9jb3B5T2JqZWN0ID0gY29weU9iamVjdDsKLyoqCiAqIFRoaXMgZnVuY3Rpb24gaXMgbGlrZQogKiBbYE9iamVjdC5rZXlzYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LmtleXMpCiAqIGV4Y2VwdCB0aGF0IGl0IGluY2x1ZGVzIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy4KICovCgpmdW5jdGlvbiBuYXRpdmVLZXlzSW4ob2JqZWN0KSB7CiAgdmFyIHJlc3VsdCA9IFtdOwoKICBpZiAob2JqZWN0ICE9IG51bGwpIHsKICAgIGZvciAodmFyIGtleSBpbiBPYmplY3Qob2JqZWN0KSkgewogICAgICByZXN1bHQucHVzaChrZXkpOwogICAgfQogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfQoKdmFyIF9uYXRpdmVLZXlzSW4gPSBuYXRpdmVLZXlzSW47Ci8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KCnZhciBvYmplY3RQcm90byRlID0gT2JqZWN0LnByb3RvdHlwZTsKLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovCgp2YXIgaGFzT3duUHJvcGVydHkkYiA9IG9iamVjdFByb3RvJGUuaGFzT3duUHJvcGVydHk7Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5rZXlzSW5gIHdoaWNoIGRvZXNuJ3QgdHJlYXQgc3BhcnNlIGFycmF5cyBhcyBkZW5zZS4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLgogKi8KCmZ1bmN0aW9uIGJhc2VLZXlzSW4ob2JqZWN0KSB7CiAgaWYgKCFpc09iamVjdF8xKG9iamVjdCkpIHsKICAgIHJldHVybiBfbmF0aXZlS2V5c0luKG9iamVjdCk7CiAgfQoKICB2YXIgaXNQcm90byA9IF9pc1Byb3RvdHlwZShvYmplY3QpLAogICAgICByZXN1bHQgPSBbXTsKCiAgZm9yICh2YXIga2V5IGluIG9iamVjdCkgewogICAgaWYgKCEoa2V5ID09ICdjb25zdHJ1Y3RvcicgJiYgKGlzUHJvdG8gfHwgIWhhc093blByb3BlcnR5JGIuY2FsbChvYmplY3QsIGtleSkpKSkgewogICAgICByZXN1bHQucHVzaChrZXkpOwogICAgfQogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfQoKdmFyIF9iYXNlS2V5c0luID0gYmFzZUtleXNJbjsKLyoqCiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuCiAqCiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSAzLjAuMAogKiBAY2F0ZWdvcnkgT2JqZWN0CiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy4KICogQGV4YW1wbGUKICoKICogZnVuY3Rpb24gRm9vKCkgewogKiAgIHRoaXMuYSA9IDE7CiAqICAgdGhpcy5iID0gMjsKICogfQogKgogKiBGb28ucHJvdG90eXBlLmMgPSAzOwogKgogKiBfLmtleXNJbihuZXcgRm9vKTsKICogLy8gPT4gWydhJywgJ2InLCAnYyddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpCiAqLwoKZnVuY3Rpb24ga2V5c0luKG9iamVjdCkgewogIHJldHVybiBpc0FycmF5TGlrZV8xKG9iamVjdCkgPyBfYXJyYXlMaWtlS2V5cyhvYmplY3QsIHRydWUpIDogX2Jhc2VLZXlzSW4ob2JqZWN0KTsKfQoKdmFyIGtleXNJbl8xID0ga2V5c0luOwovKioKICogQ29udmVydHMgYHZhbHVlYCB0byBhIHBsYWluIG9iamVjdCBmbGF0dGVuaW5nIGluaGVyaXRlZCBlbnVtZXJhYmxlIHN0cmluZwogKiBrZXllZCBwcm9wZXJ0aWVzIG9mIGB2YWx1ZWAgdG8gb3duIHByb3BlcnRpZXMgb2YgdGhlIHBsYWluIG9iamVjdC4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgMy4wLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC4KICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY29udmVydGVkIHBsYWluIG9iamVjdC4KICogQGV4YW1wbGUKICoKICogZnVuY3Rpb24gRm9vKCkgewogKiAgIHRoaXMuYiA9IDI7CiAqIH0KICoKICogRm9vLnByb3RvdHlwZS5jID0gMzsKICoKICogXy5hc3NpZ24oeyAnYSc6IDEgfSwgbmV3IEZvbyk7CiAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIgfQogKgogKiBfLmFzc2lnbih7ICdhJzogMSB9LCBfLnRvUGxhaW5PYmplY3QobmV3IEZvbykpOwogKiAvLyA9PiB7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDMgfQogKi8KCmZ1bmN0aW9uIHRvUGxhaW5PYmplY3QodmFsdWUpIHsKICByZXR1cm4gX2NvcHlPYmplY3QodmFsdWUsIGtleXNJbl8xKHZhbHVlKSk7Cn0KCnZhciB0b1BsYWluT2JqZWN0XzEgPSB0b1BsYWluT2JqZWN0OwovKioKICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlTWVyZ2VgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXMKICogZGVlcCBtZXJnZXMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXIKICogcmVmZXJlbmNlcyB0byBiZSBtZXJnZWQuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC4KICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC4KICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBtZXJnZS4KICogQHBhcmFtIHtudW1iZXJ9IHNyY0luZGV4IFRoZSBpbmRleCBvZiBgc291cmNlYC4KICogQHBhcmFtIHtGdW5jdGlvbn0gbWVyZ2VGdW5jIFRoZSBmdW5jdGlvbiB0byBtZXJnZSB2YWx1ZXMuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGFzc2lnbmVkIHZhbHVlcy4KICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBzb3VyY2UgdmFsdWVzIGFuZCB0aGVpciBtZXJnZWQKICogIGNvdW50ZXJwYXJ0cy4KICovCgpmdW5jdGlvbiBiYXNlTWVyZ2VEZWVwKG9iamVjdCwgc291cmNlLCBrZXksIHNyY0luZGV4LCBtZXJnZUZ1bmMsIGN1c3RvbWl6ZXIsIHN0YWNrKSB7CiAgdmFyIG9ialZhbHVlID0gX3NhZmVHZXQob2JqZWN0LCBrZXkpLAogICAgICBzcmNWYWx1ZSA9IF9zYWZlR2V0KHNvdXJjZSwga2V5KSwKICAgICAgc3RhY2tlZCA9IHN0YWNrLmdldChzcmNWYWx1ZSk7CgogIGlmIChzdGFja2VkKSB7CiAgICBfYXNzaWduTWVyZ2VWYWx1ZShvYmplY3QsIGtleSwgc3RhY2tlZCk7CgogICAgcmV0dXJuOwogIH0KCiAgdmFyIG5ld1ZhbHVlID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIob2JqVmFsdWUsIHNyY1ZhbHVlLCBrZXkgKyAnJywgb2JqZWN0LCBzb3VyY2UsIHN0YWNrKSA6IHVuZGVmaW5lZDsKICB2YXIgaXNDb21tb24gPSBuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkOwoKICBpZiAoaXNDb21tb24pIHsKICAgIHZhciBpc0FyciA9IGlzQXJyYXlfMShzcmNWYWx1ZSksCiAgICAgICAgaXNCdWZmID0gIWlzQXJyICYmIGlzQnVmZmVyXzEoc3JjVmFsdWUpLAogICAgICAgIGlzVHlwZWQgPSAhaXNBcnIgJiYgIWlzQnVmZiAmJiBpc1R5cGVkQXJyYXlfMShzcmNWYWx1ZSk7CiAgICBuZXdWYWx1ZSA9IHNyY1ZhbHVlOwoKICAgIGlmIChpc0FyciB8fCBpc0J1ZmYgfHwgaXNUeXBlZCkgewogICAgICBpZiAoaXNBcnJheV8xKG9ialZhbHVlKSkgewogICAgICAgIG5ld1ZhbHVlID0gb2JqVmFsdWU7CiAgICAgIH0gZWxzZSBpZiAoaXNBcnJheUxpa2VPYmplY3RfMShvYmpWYWx1ZSkpIHsKICAgICAgICBuZXdWYWx1ZSA9IF9jb3B5QXJyYXkob2JqVmFsdWUpOwogICAgICB9IGVsc2UgaWYgKGlzQnVmZikgewogICAgICAgIGlzQ29tbW9uID0gZmFsc2U7CiAgICAgICAgbmV3VmFsdWUgPSBfY2xvbmVCdWZmZXIoc3JjVmFsdWUsIHRydWUpOwogICAgICB9IGVsc2UgaWYgKGlzVHlwZWQpIHsKICAgICAgICBpc0NvbW1vbiA9IGZhbHNlOwogICAgICAgIG5ld1ZhbHVlID0gX2Nsb25lVHlwZWRBcnJheShzcmNWYWx1ZSwgdHJ1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV3VmFsdWUgPSBbXTsKICAgICAgfQogICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0XzEoc3JjVmFsdWUpIHx8IGlzQXJndW1lbnRzXzEoc3JjVmFsdWUpKSB7CiAgICAgIG5ld1ZhbHVlID0gb2JqVmFsdWU7CgogICAgICBpZiAoaXNBcmd1bWVudHNfMShvYmpWYWx1ZSkpIHsKICAgICAgICBuZXdWYWx1ZSA9IHRvUGxhaW5PYmplY3RfMShvYmpWYWx1ZSk7CiAgICAgIH0gZWxzZSBpZiAoIWlzT2JqZWN0XzEob2JqVmFsdWUpIHx8IGlzRnVuY3Rpb25fMShvYmpWYWx1ZSkpIHsKICAgICAgICBuZXdWYWx1ZSA9IF9pbml0Q2xvbmVPYmplY3Qoc3JjVmFsdWUpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpc0NvbW1vbiA9IGZhbHNlOwogICAgfQogIH0KCiAgaWYgKGlzQ29tbW9uKSB7CiAgICAvLyBSZWN1cnNpdmVseSBtZXJnZSBvYmplY3RzIGFuZCBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS4KICAgIHN0YWNrLnNldChzcmNWYWx1ZSwgbmV3VmFsdWUpOwogICAgbWVyZ2VGdW5jKG5ld1ZhbHVlLCBzcmNWYWx1ZSwgc3JjSW5kZXgsIGN1c3RvbWl6ZXIsIHN0YWNrKTsKICAgIHN0YWNrWydkZWxldGUnXShzcmNWYWx1ZSk7CiAgfQoKICBfYXNzaWduTWVyZ2VWYWx1ZShvYmplY3QsIGtleSwgbmV3VmFsdWUpOwp9Cgp2YXIgX2Jhc2VNZXJnZURlZXAgPSBiYXNlTWVyZ2VEZWVwOwovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWVyZ2VgIHdpdGhvdXQgc3VwcG9ydCBmb3IgbXVsdGlwbGUgc291cmNlcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LgogKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LgogKiBAcGFyYW0ge251bWJlcn0gc3JjSW5kZXggVGhlIGluZGV4IG9mIGBzb3VyY2VgLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBtZXJnZWQgdmFsdWVzLgogKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIHNvdXJjZSB2YWx1ZXMgYW5kIHRoZWlyIG1lcmdlZAogKiAgY291bnRlcnBhcnRzLgogKi8KCmZ1bmN0aW9uIGJhc2VNZXJnZShvYmplY3QsIHNvdXJjZSwgc3JjSW5kZXgsIGN1c3RvbWl6ZXIsIHN0YWNrKSB7CiAgaWYgKG9iamVjdCA9PT0gc291cmNlKSB7CiAgICByZXR1cm47CiAgfQoKICBfYmFzZUZvcihzb3VyY2UsIGZ1bmN0aW9uIChzcmNWYWx1ZSwga2V5KSB7CiAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgX1N0YWNrKCkpOwoKICAgIGlmIChpc09iamVjdF8xKHNyY1ZhbHVlKSkgewogICAgICBfYmFzZU1lcmdlRGVlcChvYmplY3QsIHNvdXJjZSwga2V5LCBzcmNJbmRleCwgYmFzZU1lcmdlLCBjdXN0b21pemVyLCBzdGFjayk7CiAgICB9IGVsc2UgewogICAgICB2YXIgbmV3VmFsdWUgPSBjdXN0b21pemVyID8gY3VzdG9taXplcihfc2FmZUdldChvYmplY3QsIGtleSksIHNyY1ZhbHVlLCBrZXkgKyAnJywgb2JqZWN0LCBzb3VyY2UsIHN0YWNrKSA6IHVuZGVmaW5lZDsKCiAgICAgIGlmIChuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbmV3VmFsdWUgPSBzcmNWYWx1ZTsKICAgICAgfQoKICAgICAgX2Fzc2lnbk1lcmdlVmFsdWUob2JqZWN0LCBrZXksIG5ld1ZhbHVlKTsKICAgIH0KICB9LCBrZXlzSW5fMSk7Cn0KCnZhciBfYmFzZU1lcmdlID0gYmFzZU1lcmdlOwovKioKICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgaXQgcmVjZWl2ZXMuCiAqCiAqIEBzdGF0aWMKICogQHNpbmNlIDAuMS4wCiAqIEBtZW1iZXJPZiBfCiAqIEBjYXRlZ29yeSBVdGlsCiAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlLgogKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLgogKiBAZXhhbXBsZQogKgogKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTsKICoKICogY29uc29sZS5sb2coXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3QpOwogKiAvLyA9PiB0cnVlCiAqLwoKZnVuY3Rpb24gaWRlbnRpdHkodmFsdWUpIHsKICByZXR1cm4gdmFsdWU7Cn0KCnZhciBpZGVudGl0eV8xID0gaWRlbnRpdHk7Ci8qKgogKiBBIGZhc3RlciBhbHRlcm5hdGl2ZSB0byBgRnVuY3Rpb24jYXBwbHlgLCB0aGlzIGZ1bmN0aW9uIGludm9rZXMgYGZ1bmNgCiAqIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIGB0aGlzQXJnYCBhbmQgdGhlIGFyZ3VtZW50cyBvZiBgYXJnc2AuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS4KICogQHBhcmFtIHsqfSB0aGlzQXJnIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuCiAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgYGZ1bmNgIHdpdGguCiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXN1bHQgb2YgYGZ1bmNgLgogKi8KCmZ1bmN0aW9uIGFwcGx5KGZ1bmMsIHRoaXNBcmcsIGFyZ3MpIHsKICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7CiAgICBjYXNlIDA6CiAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZyk7CgogICAgY2FzZSAxOgogICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0pOwoKICAgIGNhc2UgMjoKICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdLCBhcmdzWzFdKTsKCiAgICBjYXNlIDM6CiAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7CiAgfQoKICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTsKfQoKdmFyIF9hcHBseSA9IGFwcGx5OwovKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovCgp2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXg7Ci8qKgogKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VSZXN0YCB3aGljaCB0cmFuc2Zvcm1zIHRoZSByZXN0IGFycmF5LgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhcHBseSBhIHJlc3QgcGFyYW1ldGVyIHRvLgogKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PWZ1bmMubGVuZ3RoLTFdIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgcmVzdCBwYXJhbWV0ZXIuCiAqIEBwYXJhbSB7RnVuY3Rpb259IHRyYW5zZm9ybSBUaGUgcmVzdCBhcnJheSB0cmFuc2Zvcm0uCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLgogKi8KCmZ1bmN0aW9uIG92ZXJSZXN0KGZ1bmMsIHN0YXJ0LCB0cmFuc2Zvcm0pIHsKICBzdGFydCA9IG5hdGl2ZU1heChzdGFydCA9PT0gdW5kZWZpbmVkID8gZnVuYy5sZW5ndGggLSAxIDogc3RhcnQsIDApOwogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cywKICAgICAgICBpbmRleCA9IC0xLAogICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heChhcmdzLmxlbmd0aCAtIHN0YXJ0LCAwKSwKICAgICAgICBhcnJheSA9IEFycmF5KGxlbmd0aCk7CgogICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgICAgYXJyYXlbaW5kZXhdID0gYXJnc1tzdGFydCArIGluZGV4XTsKICAgIH0KCiAgICBpbmRleCA9IC0xOwogICAgdmFyIG90aGVyQXJncyA9IEFycmF5KHN0YXJ0ICsgMSk7CgogICAgd2hpbGUgKCsraW5kZXggPCBzdGFydCkgewogICAgICBvdGhlckFyZ3NbaW5kZXhdID0gYXJnc1tpbmRleF07CiAgICB9CgogICAgb3RoZXJBcmdzW3N0YXJ0XSA9IHRyYW5zZm9ybShhcnJheSk7CiAgICByZXR1cm4gX2FwcGx5KGZ1bmMsIHRoaXMsIG90aGVyQXJncyk7CiAgfTsKfQoKdmFyIF9vdmVyUmVzdCA9IG92ZXJSZXN0OwovKioKICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBgdmFsdWVgLgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSAyLjQuMAogKiBAY2F0ZWdvcnkgVXRpbAogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byByZXR1cm4gZnJvbSB0aGUgbmV3IGZ1bmN0aW9uLgogKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBjb25zdGFudCBmdW5jdGlvbi4KICogQGV4YW1wbGUKICoKICogdmFyIG9iamVjdHMgPSBfLnRpbWVzKDIsIF8uY29uc3RhbnQoeyAnYSc6IDEgfSkpOwogKgogKiBjb25zb2xlLmxvZyhvYmplY3RzKTsKICogLy8gPT4gW3sgJ2EnOiAxIH0sIHsgJ2EnOiAxIH1dCiAqCiAqIGNvbnNvbGUubG9nKG9iamVjdHNbMF0gPT09IG9iamVjdHNbMV0pOwogKiAvLyA9PiB0cnVlCiAqLwoKZnVuY3Rpb24gY29uc3RhbnQodmFsdWUpIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHZhbHVlOwogIH07Cn0KCnZhciBjb25zdGFudF8xID0gY29uc3RhbnQ7Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgc2V0VG9TdHJpbmdgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaG90IGxvb3Agc2hvcnRpbmcuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIG1vZGlmeS4KICogQHBhcmFtIHtGdW5jdGlvbn0gc3RyaW5nIFRoZSBgdG9TdHJpbmdgIHJlc3VsdC4KICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIGBmdW5jYC4KICovCgp2YXIgYmFzZVNldFRvU3RyaW5nID0gIV9kZWZpbmVQcm9wZXJ0eSQxID8gaWRlbnRpdHlfMSA6IGZ1bmN0aW9uIChmdW5jLCBzdHJpbmcpIHsKICByZXR1cm4gX2RlZmluZVByb3BlcnR5JDEoZnVuYywgJ3RvU3RyaW5nJywgewogICAgJ2NvbmZpZ3VyYWJsZSc6IHRydWUsCiAgICAnZW51bWVyYWJsZSc6IGZhbHNlLAogICAgJ3ZhbHVlJzogY29uc3RhbnRfMShzdHJpbmcpLAogICAgJ3dyaXRhYmxlJzogdHJ1ZQogIH0pOwp9Owp2YXIgX2Jhc2VTZXRUb1N0cmluZyA9IGJhc2VTZXRUb1N0cmluZzsKLyoqIFVzZWQgdG8gZGV0ZWN0IGhvdCBmdW5jdGlvbnMgYnkgbnVtYmVyIG9mIGNhbGxzIHdpdGhpbiBhIHNwYW4gb2YgbWlsbGlzZWNvbmRzLiAqLwoKdmFyIEhPVF9DT1VOVCA9IDgwMCwKICAgIEhPVF9TUEFOID0gMTY7Ci8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi8KCnZhciBuYXRpdmVOb3cgPSBEYXRlLm5vdzsKLyoqCiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0J2xsIHNob3J0IG91dCBhbmQgaW52b2tlIGBpZGVudGl0eWAgaW5zdGVhZAogKiBvZiBgZnVuY2Agd2hlbiBpdCdzIGNhbGxlZCBgSE9UX0NPVU5UYCBvciBtb3JlIHRpbWVzIGluIGBIT1RfU1BBTmAKICogbWlsbGlzZWNvbmRzLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC4KICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc2hvcnRhYmxlIGZ1bmN0aW9uLgogKi8KCmZ1bmN0aW9uIHNob3J0T3V0KGZ1bmMpIHsKICB2YXIgY291bnQgPSAwLAogICAgICBsYXN0Q2FsbGVkID0gMDsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIHN0YW1wID0gbmF0aXZlTm93KCksCiAgICAgICAgcmVtYWluaW5nID0gSE9UX1NQQU4gLSAoc3RhbXAgLSBsYXN0Q2FsbGVkKTsKICAgIGxhc3RDYWxsZWQgPSBzdGFtcDsKCiAgICBpZiAocmVtYWluaW5nID4gMCkgewogICAgICBpZiAoKytjb3VudCA+PSBIT1RfQ09VTlQpIHsKICAgICAgICByZXR1cm4gYXJndW1lbnRzWzBdOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBjb3VudCA9IDA7CiAgICB9CgogICAgcmV0dXJuIGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpOwogIH07Cn0KCnZhciBfc2hvcnRPdXQgPSBzaG9ydE91dDsKLyoqCiAqIFNldHMgdGhlIGB0b1N0cmluZ2AgbWV0aG9kIG9mIGBmdW5jYCB0byByZXR1cm4gYHN0cmluZ2AuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIG1vZGlmeS4KICogQHBhcmFtIHtGdW5jdGlvbn0gc3RyaW5nIFRoZSBgdG9TdHJpbmdgIHJlc3VsdC4KICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIGBmdW5jYC4KICovCgp2YXIgc2V0VG9TdHJpbmcgPSBfc2hvcnRPdXQoX2Jhc2VTZXRUb1N0cmluZyk7Cgp2YXIgX3NldFRvU3RyaW5nID0gc2V0VG9TdHJpbmc7Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5yZXN0YCB3aGljaCBkb2Vzbid0IHZhbGlkYXRlIG9yIGNvZXJjZSBhcmd1bWVudHMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IGEgcmVzdCBwYXJhbWV0ZXIgdG8uCiAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9ZnVuYy5sZW5ndGgtMV0gVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSByZXN0IHBhcmFtZXRlci4KICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uCiAqLwoKZnVuY3Rpb24gYmFzZVJlc3QoZnVuYywgc3RhcnQpIHsKICByZXR1cm4gX3NldFRvU3RyaW5nKF9vdmVyUmVzdChmdW5jLCBzdGFydCwgaWRlbnRpdHlfMSksIGZ1bmMgKyAnJyk7Cn0KCnZhciBfYmFzZVJlc3QgPSBiYXNlUmVzdDsKLyoqCiAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gYXJndW1lbnRzIGFyZSBmcm9tIGFuIGl0ZXJhdGVlIGNhbGwuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHBvdGVudGlhbCBpdGVyYXRlZSB2YWx1ZSBhcmd1bWVudC4KICogQHBhcmFtIHsqfSBpbmRleCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIGluZGV4IG9yIGtleSBhcmd1bWVudC4KICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIHBvdGVudGlhbCBpdGVyYXRlZSBvYmplY3QgYXJndW1lbnQuCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJndW1lbnRzIGFyZSBmcm9tIGFuIGl0ZXJhdGVlIGNhbGwsCiAqICBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gaXNJdGVyYXRlZUNhbGwodmFsdWUsIGluZGV4LCBvYmplY3QpIHsKICBpZiAoIWlzT2JqZWN0XzEob2JqZWN0KSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgdmFyIHR5cGUgPSBfdHlwZW9mMihpbmRleCk7CgogIGlmICh0eXBlID09ICdudW1iZXInID8gaXNBcnJheUxpa2VfMShvYmplY3QpICYmIF9pc0luZGV4KGluZGV4LCBvYmplY3QubGVuZ3RoKSA6IHR5cGUgPT0gJ3N0cmluZycgJiYgaW5kZXggaW4gb2JqZWN0KSB7CiAgICByZXR1cm4gZXFfMShvYmplY3RbaW5kZXhdLCB2YWx1ZSk7CiAgfQoKICByZXR1cm4gZmFsc2U7Cn0KCnZhciBfaXNJdGVyYXRlZUNhbGwgPSBpc0l0ZXJhdGVlQ2FsbDsKLyoqCiAqIENyZWF0ZXMgYSBmdW5jdGlvbiBsaWtlIGBfLmFzc2lnbmAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7RnVuY3Rpb259IGFzc2lnbmVyIFRoZSBmdW5jdGlvbiB0byBhc3NpZ24gdmFsdWVzLgogKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhc3NpZ25lciBmdW5jdGlvbi4KICovCgpmdW5jdGlvbiBjcmVhdGVBc3NpZ25lcihhc3NpZ25lcikgewogIHJldHVybiBfYmFzZVJlc3QoZnVuY3Rpb24gKG9iamVjdCwgc291cmNlcykgewogICAgdmFyIGluZGV4ID0gLTEsCiAgICAgICAgbGVuZ3RoID0gc291cmNlcy5sZW5ndGgsCiAgICAgICAgY3VzdG9taXplciA9IGxlbmd0aCA+IDEgPyBzb3VyY2VzW2xlbmd0aCAtIDFdIDogdW5kZWZpbmVkLAogICAgICAgIGd1YXJkID0gbGVuZ3RoID4gMiA/IHNvdXJjZXNbMl0gOiB1bmRlZmluZWQ7CiAgICBjdXN0b21pemVyID0gYXNzaWduZXIubGVuZ3RoID4gMyAmJiB0eXBlb2YgY3VzdG9taXplciA9PSAnZnVuY3Rpb24nID8gKGxlbmd0aC0tLCBjdXN0b21pemVyKSA6IHVuZGVmaW5lZDsKCiAgICBpZiAoZ3VhcmQgJiYgX2lzSXRlcmF0ZWVDYWxsKHNvdXJjZXNbMF0sIHNvdXJjZXNbMV0sIGd1YXJkKSkgewogICAgICBjdXN0b21pemVyID0gbGVuZ3RoIDwgMyA/IHVuZGVmaW5lZCA6IGN1c3RvbWl6ZXI7CiAgICAgIGxlbmd0aCA9IDE7CiAgICB9CgogICAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7CgogICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbaW5kZXhdOwoKICAgICAgaWYgKHNvdXJjZSkgewogICAgICAgIGFzc2lnbmVyKG9iamVjdCwgc291cmNlLCBpbmRleCwgY3VzdG9taXplcik7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gb2JqZWN0OwogIH0pOwp9Cgp2YXIgX2NyZWF0ZUFzc2lnbmVyID0gY3JlYXRlQXNzaWduZXI7Ci8qKgogKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmFzc2lnbmAgZXhjZXB0IHRoYXQgaXQgcmVjdXJzaXZlbHkgbWVyZ2VzIG93biBhbmQKICogaW5oZXJpdGVkIGVudW1lcmFibGUgc3RyaW5nIGtleWVkIHByb3BlcnRpZXMgb2Ygc291cmNlIG9iamVjdHMgaW50byB0aGUKICogZGVzdGluYXRpb24gb2JqZWN0LiBTb3VyY2UgcHJvcGVydGllcyB0aGF0IHJlc29sdmUgdG8gYHVuZGVmaW5lZGAgYXJlCiAqIHNraXBwZWQgaWYgYSBkZXN0aW5hdGlvbiB2YWx1ZSBleGlzdHMuIEFycmF5IGFuZCBwbGFpbiBvYmplY3QgcHJvcGVydGllcwogKiBhcmUgbWVyZ2VkIHJlY3Vyc2l2ZWx5LiBPdGhlciBvYmplY3RzIGFuZCB2YWx1ZSB0eXBlcyBhcmUgb3ZlcnJpZGRlbiBieQogKiBhc3NpZ25tZW50LiBTb3VyY2Ugb2JqZWN0cyBhcmUgYXBwbGllZCBmcm9tIGxlZnQgdG8gcmlnaHQuIFN1YnNlcXVlbnQKICogc291cmNlcyBvdmVyd3JpdGUgcHJvcGVydHkgYXNzaWdubWVudHMgb2YgcHJldmlvdXMgc291cmNlcy4KICoKICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYG9iamVjdGAuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDAuNS4wCiAqIEBjYXRlZ29yeSBPYmplY3QKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LgogKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZXNdIFRoZSBzb3VyY2Ugb2JqZWN0cy4KICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC4KICogQGV4YW1wbGUKICoKICogdmFyIG9iamVjdCA9IHsKICogICAnYSc6IFt7ICdiJzogMiB9LCB7ICdkJzogNCB9XQogKiB9OwogKgogKiB2YXIgb3RoZXIgPSB7CiAqICAgJ2EnOiBbeyAnYyc6IDMgfSwgeyAnZSc6IDUgfV0KICogfTsKICoKICogXy5tZXJnZShvYmplY3QsIG90aGVyKTsKICogLy8gPT4geyAnYSc6IFt7ICdiJzogMiwgJ2MnOiAzIH0sIHsgJ2QnOiA0LCAnZSc6IDUgfV0gfQogKi8KCnZhciBtZXJnZSA9IF9jcmVhdGVBc3NpZ25lcihmdW5jdGlvbiAob2JqZWN0LCBzb3VyY2UsIHNyY0luZGV4KSB7CiAgX2Jhc2VNZXJnZShvYmplY3QsIHNvdXJjZSwgc3JjSW5kZXgpOwp9KTsKCnZhciBtZXJnZV8xID0gbWVyZ2U7CgpmdW5jdGlvbiBzdHlsZUluamVjdChjc3MsIHJlZikgewogIGlmIChyZWYgPT09IHZvaWQgMCkgcmVmID0ge307CiAgdmFyIGluc2VydEF0ID0gcmVmLmluc2VydEF0OwoKICBpZiAoIWNzcyB8fCB0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7CiAgICByZXR1cm47CiAgfQoKICB2YXIgaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTsKICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnOwoKICBpZiAoaW5zZXJ0QXQgPT09ICd0b3AnKSB7CiAgICBpZiAoaGVhZC5maXJzdENoaWxkKSB7CiAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBoZWFkLmZpcnN0Q2hpbGQpOwogICAgfSBlbHNlIHsKICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CiAgICB9CiAgfSBlbHNlIHsKICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogIH0KCiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHsKICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzczsKICB9IGVsc2UgewogICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7CiAgfQp9Cgp2YXIgY3NzID0gIi5yZXNpemUtb2JzZXJ2ZXJbZGF0YS12LWIzMjllZTRjXXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7ei1pbmRleDotMTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JvcmRlcjpub25lO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7cG9pbnRlci1ldmVudHM6bm9uZTtkaXNwbGF5OmJsb2NrO292ZXJmbG93OmhpZGRlbjtvcGFjaXR5OjB9LnJlc2l6ZS1vYnNlcnZlcltkYXRhLXYtYjMyOWVlNGNdIG9iamVjdHtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO292ZXJmbG93OmhpZGRlbjtwb2ludGVyLWV2ZW50czpub25lO3otaW5kZXg6LTF9IjsKc3R5bGVJbmplY3QoY3NzKTsKCmZ1bmN0aW9uIGluc3RhbGwoVnVlKSB7CiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogIGlmIChpbnN0YWxsLmluc3RhbGxlZCkgcmV0dXJuOwogIGluc3RhbGwuaW5zdGFsbGVkID0gdHJ1ZTsKICB2YXIgZmluYWxPcHRpb25zID0ge307CiAgbWVyZ2VfMShmaW5hbE9wdGlvbnMsIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTsKICBwbHVnaW4ub3B0aW9ucyA9IGZpbmFsT3B0aW9uczsKICBkaXJlY3RpdmUub3B0aW9ucyA9IGZpbmFsT3B0aW9uczsKICBWdWUuZGlyZWN0aXZlKCd0b29sdGlwJywgZGlyZWN0aXZlKTsKICBWdWUuZGlyZWN0aXZlKCdjbG9zZS1wb3BvdmVyJywgdmNsb3NlcG9wb3Zlcik7CiAgVnVlLmNvbXBvbmVudCgndi1wb3BvdmVyJywgX192dWVfY29tcG9uZW50X18pOwp9Cgp2YXIgVlRvb2x0aXAgPSBkaXJlY3RpdmU7CnZhciBWQ2xvc2VQb3BvdmVyID0gdmNsb3NlcG9wb3ZlcjsKdmFyIFZQb3BvdmVyID0gX192dWVfY29tcG9uZW50X187CnZhciBwbHVnaW4gPSB7CiAgaW5zdGFsbDogaW5zdGFsbCwKCiAgZ2V0IGVuYWJsZWQoKSB7CiAgICByZXR1cm4gc3RhdGUuZW5hYmxlZDsKICB9LAoKICBzZXQgZW5hYmxlZCh2YWx1ZSkgewogICAgc3RhdGUuZW5hYmxlZCA9IHZhbHVlOwogIH0KCn07IC8vIEF1dG8taW5zdGFsbAoKdmFyIEdsb2JhbFZ1ZSA9IG51bGw7CgppZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsKICBHbG9iYWxWdWUgPSB3aW5kb3cuVnVlOwp9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7CiAgR2xvYmFsVnVlID0gZ2xvYmFsLlZ1ZTsKfQoKaWYgKEdsb2JhbFZ1ZSkgewogIEdsb2JhbFZ1ZS51c2UocGx1Z2luKTsKfQoKZXhwb3J0IGRlZmF1bHQgcGx1Z2luOwpleHBvcnQgeyBWQ2xvc2VQb3BvdmVyLCBWUG9wb3ZlciwgVlRvb2x0aXAsIGNyZWF0ZVRvb2x0aXAsIGRlc3Ryb3lUb29sdGlwLCBpbnN0YWxsIH07"},{"version":3,"sources":["/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/vuestic-ui/node_modules/v-tooltip/dist/v-tooltip.esm.js"],"names":["Popper","ResizeObserver","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_defineProperty","value","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","SVGAnimatedString","window","convertToArray","split","addClasses","el","classes","newClasses","classList","className","baseVal","newClass","indexOf","SVGElement","setAttribute","join","removeClasses","index","splice","supportsPassive","opts","get","addEventListener","e","listCacheClear","__data__","size","_listCacheClear","eq","other","eq_1","assocIndexOf","array","_assocIndexOf","arrayProto","Array","listCacheDelete","data","lastIndex","pop","call","_listCacheDelete","listCacheGet","undefined","_listCacheGet","listCacheHas","_listCacheHas","listCacheSet","_listCacheSet","ListCache","entries","clear","entry","set","has","_ListCache","stackClear","_stackClear","stackDelete","result","_stackDelete","stackGet","_stackGet","stackHas","_stackHas","commonjsGlobal","globalThis","global","self","createCommonjsModule","fn","module","exports","freeGlobal","_freeGlobal","freeSelf","root","Function","_root","Symbol$1","_Symbol","objectProto","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","getRawTag","isOwn","tag","unmasked","_getRawTag","objectProto$1","nativeObjectToString$1","objectToString","_objectToString","nullTag","undefinedTag","symToStringTag$1","baseGetTag","_baseGetTag","isObject","type","isObject_1","asyncTag","funcTag","genTag","proxyTag","isFunction","isFunction_1","coreJsData","_coreJsData","maskSrcKey","uid","exec","IE_PROTO","isMasked","func","_isMasked","funcProto","funcToString","toSource","_toSource","reRegExpChar","reIsHostCtor","funcProto$1","objectProto$2","funcToString$1","hasOwnProperty$1","reIsNative","RegExp","replace","baseIsNative","pattern","test","_baseIsNative","getValue","_getValue","getNative","_getNative","Map","_Map","nativeCreate","_nativeCreate","hashClear","_hashClear","hashDelete","_hashDelete","HASH_UNDEFINED","objectProto$3","hasOwnProperty$2","hashGet","_hashGet","objectProto$4","hasOwnProperty$3","hashHas","_hashHas","HASH_UNDEFINED$1","hashSet","_hashSet","Hash","_Hash","mapCacheClear","_mapCacheClear","isKeyable","_isKeyable","getMapData","map","_getMapData","mapCacheDelete","_mapCacheDelete","mapCacheGet","_mapCacheGet","mapCacheHas","_mapCacheHas","mapCacheSet","_mapCacheSet","MapCache","_MapCache","LARGE_ARRAY_SIZE","stackSet","pairs","_stackSet","Stack","_Stack","HASH_UNDEFINED$2","setCacheAdd","_setCacheAdd","setCacheHas","_setCacheHas","SetCache","values","add","_SetCache","arraySome","predicate","_arraySome","cacheHas","cache","_cacheHas","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","equalArrays","bitmask","customizer","equalFunc","stack","isPartial","arrLength","othLength","stacked","seen","arrValue","othValue","compared","othIndex","_equalArrays","Uint8Array","_Uint8Array","mapToArray","_mapToArray","setToArray","_setToArray","COMPARE_PARTIAL_FLAG$1","COMPARE_UNORDERED_FLAG$1","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","symbolTag","arrayBufferTag","dataViewTag","symbolProto","symbolValueOf","valueOf","equalByTag","byteLength","byteOffset","buffer","name","message","convert","_equalByTag","arrayPush","offset","_arrayPush","isArray","isArray_1","baseGetAllKeys","keysFunc","symbolsFunc","_baseGetAllKeys","arrayFilter","resIndex","_arrayFilter","stubArray","stubArray_1","objectProto$5","propertyIsEnumerable","nativeGetSymbols","getSymbols","symbol","_getSymbols","baseTimes","n","iteratee","_baseTimes","isObjectLike","isObjectLike_1","argsTag","baseIsArguments","_baseIsArguments","objectProto$6","hasOwnProperty$4","propertyIsEnumerable$1","isArguments","isArguments_1","stubFalse","stubFalse_1","isBuffer_1","freeExports","nodeType","freeModule","moduleExports","Buffer","nativeIsBuffer","isBuffer","MAX_SAFE_INTEGER","reIsUint","isIndex","_isIndex","MAX_SAFE_INTEGER$1","isLength","isLength_1","argsTag$1","arrayTag","boolTag$1","dateTag$1","errorTag$1","funcTag$1","mapTag$1","numberTag$1","objectTag","regexpTag$1","setTag$1","stringTag$1","weakMapTag","arrayBufferTag$1","dataViewTag$1","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","baseIsTypedArray","_baseIsTypedArray","baseUnary","_baseUnary","_nodeUtil","freeProcess","process","nodeUtil","types","require","binding","nodeIsTypedArray","isTypedArray","isTypedArray_1","objectProto$7","hasOwnProperty$5","arrayLikeKeys","inherited","isArr","isArg","isBuff","isType","skipIndexes","String","_arrayLikeKeys","objectProto$8","isPrototype","Ctor","proto","_isPrototype","overArg","transform","arg","_overArg","nativeKeys","_nativeKeys","objectProto$9","hasOwnProperty$6","baseKeys","_baseKeys","isArrayLike","isArrayLike_1","keys_1","getAllKeys","_getAllKeys","COMPARE_PARTIAL_FLAG$2","objectProto$a","hasOwnProperty$7","equalObjects","objProps","objLength","othProps","skipCtor","objValue","objCtor","othCtor","_equalObjects","DataView","_DataView","Promise$1","_Promise","Set","_Set","WeakMap","_WeakMap","mapTag$2","objectTag$1","promiseTag","setTag$2","weakMapTag$1","dataViewTag$2","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","resolve","ctorString","_getTag","COMPARE_PARTIAL_FLAG$3","argsTag$2","arrayTag$1","objectTag$2","objectProto$b","hasOwnProperty$8","baseIsEqualDeep","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","_baseIsEqualDeep","baseIsEqual","_baseIsEqual","isEqual","isEqual_1","DEFAULT_OPTIONS","container","delay","html","placement","title","template","trigger","openTooltips","Tooltip","_reference","_options","_this","evt","reference","options","relatedreference","toElement","relatedTarget","callback","evt2","relatedreference2","_tooltipNode","removeEventListener","contains","_scheduleHide","jquery","show","bind","hide","_isOpen","_init","_show","_hide","dispose","_dispose","toggle","setClasses","_classes","setContent","content","_setContent","setOptions","classesUpdated","directive","defaultClass","getOptions","needPopperUpdate","needRestart","isOpen","popperInstance","update","events","_isDisposed","_enableDocumentTouch","_setEventListeners","$_originalTitle","getAttribute","removeAttribute","_create","tooltipGenerator","document","createElement","innerHTML","trim","tooltipNode","childNodes","id","concat","Math","random","substr","autoHide","_this2","asyncContent","_applyContent","then","_this3","Promise","reject","allowHtml","rootNode","titleNode","querySelector","innerSelector","firstChild","removeChild","appendChild","loadingClass","loadingContent","asyncResult","innerText","clearTimeout","_disposeTimer","assign","updateClasses","_ensureShown","_this4","style","display","enableEventListeners","_findContainer","_append","popperOptions","modifiers","arrow","element","arrowSelector","boundariesElement","preventOverflow","requestAnimationFrame","_noLongerOpen","_this5","disableEventListeners","disposeTime","disposeTimeout","setTimeout","_removeTooltipNode","parentNode","_this6","_events","_ref","event","destroy","removeOnDestroy","_this7","directEvents","oppositeEvents","hideOnTargetClick","usedByTooltip","_scheduleShow","_onDocumentTouch","_this8","computedDelay","_scheduleTimer","_this9","ownerDocument","body","isSet","_setTooltipNodeEvent","passive","capture","state","enabled","positions","defaultOptions","defaultPlacement","defaultTargetClass","defaultHtml","defaultTemplate","defaultArrowSelector","defaultInnerSelector","defaultDelay","defaultTrigger","defaultOffset","defaultContainer","defaultBoundariesElement","defaultPopperOptions","defaultLoadingClass","defaultLoadingContent","defaultHideOnTargetClick","popover","defaultBaseClass","defaultWrapperClass","defaultInnerClass","defaultArrowClass","defaultOpenClass","defaultAutoHide","defaultHandleResize","typeofOffset","getPlacement","pos","getContent","createTooltip","tooltip","_tooltip","_vueEl","targetClasses","_tooltipTargetClasses","destroyTooltip","_tooltipOldShow","oldValue","unbind","addListeners","onClick","onTouchStart","removeListeners","onTouchEnd","onTouchCancel","currentTarget","closePopover","$_vclosepopover_touch","closeAllPopover","$_closePopoverModifiers","all","changedTouches","touch","$_vclosepopover_touchPoint","firstTouch","abs","screenY","screenX","vclosepopover","_ref2","getDefault","isIOS","navigator","userAgent","MSStream","openPopovers","Element","script","components","open","Boolean","disabled","_default","Number","popoverClass","popoverBaseClass","popoverInnerClass","popoverWrapperClass","popoverArrowClass","handleResize","openGroup","openClass","computed","cssClass","popoverId","watch","val","oldVal","popoverNode","$refs","$_findContainer","console","warn","scheduleUpdate","$_removeEventListeners","$_addEventListeners","$_updatePopper","handler","deep","created","$_isDisposed","$_mounted","$_events","$_preventOpen","mounted","$_init","deactivated","beforeDestroy","methods","_ref2$skipDelay","skipDelay","_ref2$force","force","$_scheduleShow","$emit","$_beingShowed","_ref3","_ref3$skipDelay","$_scheduleHide","$_show","$_disposeTimer","$_getOffset","hidden","$_hide","$_scheduleTimer","parseInt","$_setTooltipNodeEvent","event2","_ref4","cb","$_restartPopper","$_handleGlobalClose","$_handleResize","handleGlobalTouchend","handleGlobalClick","handleGlobalClose","_loop","normalizeComponent","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","render","staticRenderFns","_compiled","functional","_scopeId","hook","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","$root","$options","shadowRoot","originalRender","renderWithStyleInjection","h","existing","beforeCreate","__vue_script__","__vue_render__","_vm","_h","$createElement","_c","_self","staticClass","ref","staticStyle","attrs","tabindex","_t","_v","visibility","on","keyup","$event","_k","keyCode","position","notify","_e","__vue_staticRenderFns__","_withStripped","__vue_inject_styles__","__vue_scope_id__","__vue_module_identifier__","__vue_is_functional_template__","__vue_component__","_defineProperty$1","baseAssignValue","_baseAssignValue","assignMergeValue","_assignMergeValue","createBaseFor","fromRight","iterable","_createBaseFor","baseFor","_baseFor","_cloneBuffer","allocUnsafe","cloneBuffer","isDeep","slice","copy","cloneArrayBuffer","arrayBuffer","_cloneArrayBuffer","cloneTypedArray","typedArray","_cloneTypedArray","copyArray","_copyArray","objectCreate","create","baseCreate","_baseCreate","getPrototype","getPrototypeOf","_getPrototype","initCloneObject","_initCloneObject","isArrayLikeObject","isArrayLikeObject_1","objectTag$3","funcProto$2","objectProto$c","funcToString$2","hasOwnProperty$9","objectCtorString","isPlainObject","isPlainObject_1","safeGet","_safeGet","objectProto$d","hasOwnProperty$a","assignValue","_assignValue","copyObject","isNew","newValue","_copyObject","nativeKeysIn","_nativeKeysIn","objectProto$e","hasOwnProperty$b","baseKeysIn","isProto","_baseKeysIn","keysIn","keysIn_1","toPlainObject","toPlainObject_1","baseMergeDeep","srcIndex","mergeFunc","srcValue","isCommon","isTyped","_baseMergeDeep","baseMerge","_baseMerge","identity","identity_1","thisArg","args","_apply","nativeMax","max","overRest","start","otherArgs","_overRest","constant","constant_1","baseSetToString","string","_baseSetToString","HOT_COUNT","HOT_SPAN","nativeNow","Date","now","shortOut","count","lastCalled","stamp","remaining","_shortOut","setToString","_setToString","baseRest","_baseRest","isIterateeCall","_isIterateeCall","createAssigner","assigner","sources","guard","_createAssigner","merge","merge_1","styleInject","css","insertAt","head","getElementsByTagName","insertBefore","styleSheet","cssText","createTextNode","install","Vue","installed","finalOptions","plugin","component","VTooltip","VClosePopover","VPopover","GlobalVue","use"],"mappings":"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","sourcesContent":["import Popper from 'popper.js';\nimport { ResizeObserver } from 'vue-resize';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar SVGAnimatedString = function SVGAnimatedString() {};\n\nif (typeof window !== 'undefined') {\n  SVGAnimatedString = window.SVGAnimatedString;\n}\n\nfunction convertToArray(value) {\n  if (typeof value === 'string') {\n    value = value.split(' ');\n  }\n\n  return value;\n}\n/**\n * Add classes to an element.\n * This method checks to ensure that the classes don't already exist before adding them.\n * It uses el.className rather than classList in order to be IE friendly.\n * @param {object} el - The element to add the classes to.\n * @param {classes} string - List of space separated classes to be added to the element.\n */\n\nfunction addClasses(el, classes) {\n  var newClasses = convertToArray(classes);\n  var classList;\n\n  if (el.className instanceof SVGAnimatedString) {\n    classList = convertToArray(el.className.baseVal);\n  } else {\n    classList = convertToArray(el.className);\n  }\n\n  newClasses.forEach(function (newClass) {\n    if (classList.indexOf(newClass) === -1) {\n      classList.push(newClass);\n    }\n  });\n\n  if (el instanceof SVGElement) {\n    el.setAttribute('class', classList.join(' '));\n  } else {\n    el.className = classList.join(' ');\n  }\n}\n/**\n * Remove classes from an element.\n * It uses el.className rather than classList in order to be IE friendly.\n * @export\n * @param {any} el The element to remove the classes from.\n * @param {any} classes List of space separated classes to be removed from the element.\n */\n\nfunction removeClasses(el, classes) {\n  var newClasses = convertToArray(classes);\n  var classList;\n\n  if (el.className instanceof SVGAnimatedString) {\n    classList = convertToArray(el.className.baseVal);\n  } else {\n    classList = convertToArray(el.className);\n  }\n\n  newClasses.forEach(function (newClass) {\n    var index = classList.indexOf(newClass);\n\n    if (index !== -1) {\n      classList.splice(index, 1);\n    }\n  });\n\n  if (el instanceof SVGElement) {\n    el.setAttribute('class', classList.join(' '));\n  } else {\n    el.className = classList.join(' ');\n  }\n}\nvar supportsPassive = false;\n\nif (typeof window !== 'undefined') {\n  supportsPassive = false;\n\n  try {\n    var opts = Object.defineProperty({}, 'passive', {\n      get: function get() {\n        supportsPassive = true;\n      }\n    });\n    window.addEventListener('test', null, opts);\n  } catch (e) {}\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nvar _listCacheClear = listCacheClear;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nvar eq_1 = eq;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq_1(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nvar _assocIndexOf = assocIndexOf;\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nvar _listCacheDelete = listCacheDelete;\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nvar _listCacheGet = listCacheGet;\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return _assocIndexOf(this.__data__, key) > -1;\n}\n\nvar _listCacheHas = listCacheHas;\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nvar _listCacheSet = listCacheSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = _listCacheClear;\nListCache.prototype['delete'] = _listCacheDelete;\nListCache.prototype.get = _listCacheGet;\nListCache.prototype.has = _listCacheHas;\nListCache.prototype.set = _listCacheSet;\n\nvar _ListCache = ListCache;\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new _ListCache;\n  this.size = 0;\n}\n\nvar _stackClear = stackClear;\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nvar _stackDelete = stackDelete;\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nvar _stackGet = stackGet;\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nvar _stackHas = stackHas;\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n\nvar _freeGlobal = freeGlobal;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = _freeGlobal || freeSelf || Function('return this')();\n\nvar _root = root;\n\n/** Built-in value references. */\nvar Symbol$1 = _root.Symbol;\n\nvar _Symbol = Symbol$1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nvar _getRawTag = getRawTag;\n\n/** Used for built-in method references. */\nvar objectProto$1 = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString$1 = objectProto$1.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString$1.call(value);\n}\n\nvar _objectToString = objectToString;\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag$1 = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag$1 && symToStringTag$1 in Object(value))\n    ? _getRawTag(value)\n    : _objectToString(value);\n}\n\nvar _baseGetTag = baseGetTag;\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nvar isObject_1 = isObject;\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject_1(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = _baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nvar isFunction_1 = isFunction;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = _root['__core-js_shared__'];\n\nvar _coreJsData = coreJsData;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(_coreJsData && _coreJsData.keys && _coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nvar _isMasked = isMasked;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nvar _toSource = toSource;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto$1 = Function.prototype,\n    objectProto$2 = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString$1 = funcProto$1.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$1 = objectProto$2.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject_1(value) || _isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction_1(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(_toSource(value));\n}\n\nvar _baseIsNative = baseIsNative;\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nvar _getValue = getValue;\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = _getValue(object, key);\n  return _baseIsNative(value) ? value : undefined;\n}\n\nvar _getNative = getNative;\n\n/* Built-in method references that are verified to be native. */\nvar Map = _getNative(_root, 'Map');\n\nvar _Map = Map;\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = _getNative(Object, 'create');\n\nvar _nativeCreate = nativeCreate;\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = _nativeCreate ? _nativeCreate(null) : {};\n  this.size = 0;\n}\n\nvar _hashClear = hashClear;\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nvar _hashDelete = hashDelete;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto$3 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$2 = objectProto$3.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (_nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty$2.call(data, key) ? data[key] : undefined;\n}\n\nvar _hashGet = hashGet;\n\n/** Used for built-in method references. */\nvar objectProto$4 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$3 = objectProto$4.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return _nativeCreate ? (data[key] !== undefined) : hasOwnProperty$3.call(data, key);\n}\n\nvar _hashHas = hashHas;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED$1 = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (_nativeCreate && value === undefined) ? HASH_UNDEFINED$1 : value;\n  return this;\n}\n\nvar _hashSet = hashSet;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = _hashClear;\nHash.prototype['delete'] = _hashDelete;\nHash.prototype.get = _hashGet;\nHash.prototype.has = _hashHas;\nHash.prototype.set = _hashSet;\n\nvar _Hash = Hash;\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new _Hash,\n    'map': new (_Map || _ListCache),\n    'string': new _Hash\n  };\n}\n\nvar _mapCacheClear = mapCacheClear;\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nvar _isKeyable = isKeyable;\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return _isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nvar _getMapData = getMapData;\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = _getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nvar _mapCacheDelete = mapCacheDelete;\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return _getMapData(this, key).get(key);\n}\n\nvar _mapCacheGet = mapCacheGet;\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return _getMapData(this, key).has(key);\n}\n\nvar _mapCacheHas = mapCacheHas;\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = _getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nvar _mapCacheSet = mapCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = _mapCacheClear;\nMapCache.prototype['delete'] = _mapCacheDelete;\nMapCache.prototype.get = _mapCacheGet;\nMapCache.prototype.has = _mapCacheHas;\nMapCache.prototype.set = _mapCacheSet;\n\nvar _MapCache = MapCache;\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof _ListCache) {\n    var pairs = data.__data__;\n    if (!_Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new _MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nvar _stackSet = stackSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new _ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = _stackClear;\nStack.prototype['delete'] = _stackDelete;\nStack.prototype.get = _stackGet;\nStack.prototype.has = _stackHas;\nStack.prototype.set = _stackSet;\n\nvar _Stack = Stack;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED$2 = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED$2);\n  return this;\n}\n\nvar _setCacheAdd = setCacheAdd;\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nvar _setCacheHas = setCacheHas;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new _MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = _setCacheAdd;\nSetCache.prototype.has = _setCacheHas;\n\nvar _SetCache = SetCache;\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nvar _arraySome = arraySome;\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nvar _cacheHas = cacheHas;\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new _SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!_arraySome(other, function(othValue, othIndex) {\n            if (!_cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nvar _equalArrays = equalArrays;\n\n/** Built-in value references. */\nvar Uint8Array = _root.Uint8Array;\n\nvar _Uint8Array = Uint8Array;\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nvar _mapToArray = mapToArray;\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nvar _setToArray = setToArray;\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG$1 = 1,\n    COMPARE_UNORDERED_FLAG$1 = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = _Symbol ? _Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new _Uint8Array(object), new _Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq_1(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = _mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG$1;\n      convert || (convert = _setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG$1;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = _equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nvar _equalByTag = equalByTag;\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nvar _arrayPush = arrayPush;\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nvar isArray_1 = isArray;\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray_1(object) ? result : _arrayPush(result, symbolsFunc(object));\n}\n\nvar _baseGetAllKeys = baseGetAllKeys;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nvar _arrayFilter = arrayFilter;\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nvar stubArray_1 = stubArray;\n\n/** Used for built-in method references. */\nvar objectProto$5 = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto$5.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray_1 : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return _arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nvar _getSymbols = getSymbols;\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nvar _baseTimes = baseTimes;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nvar isObjectLike_1 = isObjectLike;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike_1(value) && _baseGetTag(value) == argsTag;\n}\n\nvar _baseIsArguments = baseIsArguments;\n\n/** Used for built-in method references. */\nvar objectProto$6 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$4 = objectProto$6.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable$1 = objectProto$6.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = _baseIsArguments(function() { return arguments; }()) ? _baseIsArguments : function(value) {\n  return isObjectLike_1(value) && hasOwnProperty$4.call(value, 'callee') &&\n    !propertyIsEnumerable$1.call(value, 'callee');\n};\n\nvar isArguments_1 = isArguments;\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nvar stubFalse_1 = stubFalse;\n\nvar isBuffer_1 = createCommonjsModule(function (module, exports) {\n/** Detect free variable `exports`. */\nvar freeExports =  exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? _root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse_1;\n\nmodule.exports = isBuffer;\n});\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nvar _isIndex = isIndex;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER$1 = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER$1;\n}\n\nvar isLength_1 = isLength;\n\n/** `Object#toString` result references. */\nvar argsTag$1 = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag$1 = '[object Boolean]',\n    dateTag$1 = '[object Date]',\n    errorTag$1 = '[object Error]',\n    funcTag$1 = '[object Function]',\n    mapTag$1 = '[object Map]',\n    numberTag$1 = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag$1 = '[object RegExp]',\n    setTag$1 = '[object Set]',\n    stringTag$1 = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag$1 = '[object ArrayBuffer]',\n    dataViewTag$1 = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag$1] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag$1] = typedArrayTags[boolTag$1] =\ntypedArrayTags[dataViewTag$1] = typedArrayTags[dateTag$1] =\ntypedArrayTags[errorTag$1] = typedArrayTags[funcTag$1] =\ntypedArrayTags[mapTag$1] = typedArrayTags[numberTag$1] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag$1] =\ntypedArrayTags[setTag$1] = typedArrayTags[stringTag$1] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike_1(value) &&\n    isLength_1(value.length) && !!typedArrayTags[_baseGetTag(value)];\n}\n\nvar _baseIsTypedArray = baseIsTypedArray;\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nvar _baseUnary = baseUnary;\n\nvar _nodeUtil = createCommonjsModule(function (module, exports) {\n/** Detect free variable `exports`. */\nvar freeExports =  exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && _freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n});\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = _nodeUtil && _nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? _baseUnary(nodeIsTypedArray) : _baseIsTypedArray;\n\nvar isTypedArray_1 = isTypedArray;\n\n/** Used for built-in method references. */\nvar objectProto$7 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$5 = objectProto$7.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray_1(value),\n      isArg = !isArr && isArguments_1(value),\n      isBuff = !isArr && !isArg && isBuffer_1(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray_1(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? _baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty$5.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           _isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nvar _arrayLikeKeys = arrayLikeKeys;\n\n/** Used for built-in method references. */\nvar objectProto$8 = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto$8;\n\n  return value === proto;\n}\n\nvar _isPrototype = isPrototype;\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nvar _overArg = overArg;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = _overArg(Object.keys, Object);\n\nvar _nativeKeys = nativeKeys;\n\n/** Used for built-in method references. */\nvar objectProto$9 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$6 = objectProto$9.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!_isPrototype(object)) {\n    return _nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty$6.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nvar _baseKeys = baseKeys;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength_1(value.length) && !isFunction_1(value);\n}\n\nvar isArrayLike_1 = isArrayLike;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike_1(object) ? _arrayLikeKeys(object) : _baseKeys(object);\n}\n\nvar keys_1 = keys;\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return _baseGetAllKeys(object, keys_1, _getSymbols);\n}\n\nvar _getAllKeys = getAllKeys;\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG$2 = 1;\n\n/** Used for built-in method references. */\nvar objectProto$a = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$7 = objectProto$a.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG$2,\n      objProps = _getAllKeys(object),\n      objLength = objProps.length,\n      othProps = _getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty$7.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nvar _equalObjects = equalObjects;\n\n/* Built-in method references that are verified to be native. */\nvar DataView = _getNative(_root, 'DataView');\n\nvar _DataView = DataView;\n\n/* Built-in method references that are verified to be native. */\nvar Promise$1 = _getNative(_root, 'Promise');\n\nvar _Promise = Promise$1;\n\n/* Built-in method references that are verified to be native. */\nvar Set = _getNative(_root, 'Set');\n\nvar _Set = Set;\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = _getNative(_root, 'WeakMap');\n\nvar _WeakMap = WeakMap;\n\n/** `Object#toString` result references. */\nvar mapTag$2 = '[object Map]',\n    objectTag$1 = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag$2 = '[object Set]',\n    weakMapTag$1 = '[object WeakMap]';\n\nvar dataViewTag$2 = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = _toSource(_DataView),\n    mapCtorString = _toSource(_Map),\n    promiseCtorString = _toSource(_Promise),\n    setCtorString = _toSource(_Set),\n    weakMapCtorString = _toSource(_WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = _baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((_DataView && getTag(new _DataView(new ArrayBuffer(1))) != dataViewTag$2) ||\n    (_Map && getTag(new _Map) != mapTag$2) ||\n    (_Promise && getTag(_Promise.resolve()) != promiseTag) ||\n    (_Set && getTag(new _Set) != setTag$2) ||\n    (_WeakMap && getTag(new _WeakMap) != weakMapTag$1)) {\n  getTag = function(value) {\n    var result = _baseGetTag(value),\n        Ctor = result == objectTag$1 ? value.constructor : undefined,\n        ctorString = Ctor ? _toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag$2;\n        case mapCtorString: return mapTag$2;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag$2;\n        case weakMapCtorString: return weakMapTag$1;\n      }\n    }\n    return result;\n  };\n}\n\nvar _getTag = getTag;\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG$3 = 1;\n\n/** `Object#toString` result references. */\nvar argsTag$2 = '[object Arguments]',\n    arrayTag$1 = '[object Array]',\n    objectTag$2 = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto$b = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$8 = objectProto$b.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray_1(object),\n      othIsArr = isArray_1(other),\n      objTag = objIsArr ? arrayTag$1 : _getTag(object),\n      othTag = othIsArr ? arrayTag$1 : _getTag(other);\n\n  objTag = objTag == argsTag$2 ? objectTag$2 : objTag;\n  othTag = othTag == argsTag$2 ? objectTag$2 : othTag;\n\n  var objIsObj = objTag == objectTag$2,\n      othIsObj = othTag == objectTag$2,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer_1(object)) {\n    if (!isBuffer_1(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new _Stack);\n    return (objIsArr || isTypedArray_1(object))\n      ? _equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : _equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG$3)) {\n    var objIsWrapped = objIsObj && hasOwnProperty$8.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty$8.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new _Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new _Stack);\n  return _equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nvar _baseIsEqualDeep = baseIsEqualDeep;\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike_1(value) && !isObjectLike_1(other))) {\n    return value !== value && other !== other;\n  }\n  return _baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nvar _baseIsEqual = baseIsEqual;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return _baseIsEqual(value, other);\n}\n\nvar isEqual_1 = isEqual;\n\nvar DEFAULT_OPTIONS = {\n  container: false,\n  delay: 0,\n  html: false,\n  placement: 'top',\n  title: '',\n  template: '<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\n  trigger: 'hover focus',\n  offset: 0\n};\nvar openTooltips = [];\n\nvar Tooltip =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Create a new Tooltip.js instance\n   * @class Tooltip\n   * @param {HTMLElement} reference - The DOM node used as reference of the tooltip (it can be a jQuery element).\n   * @param {Object} options\n   * @param {String} options.placement=bottom\n   *      Placement of the popper accepted values: `top(-start, -end), right(-start, -end), bottom(-start, -end),\n   *      left(-start, -end)`\n   * @param {HTMLElement|String|false} options.container=false - Append the tooltip to a specific element.\n   * @param {Number|Object} options.delay=0\n   *      Delay showing and hiding the tooltip (ms) - does not apply to manual trigger type.\n   *      If a number is supplied, delay is applied to both hide/show.\n   *      Object structure is: `{ show: 500, hide: 100 }`\n   * @param {Boolean} options.html=false - Insert HTML into the tooltip. If false, the content will inserted with `innerText`.\n   * @param {String|PlacementFunction} options.placement='top' - One of the allowed placements, or a function returning one of them.\n   * @param {String} [options.template='<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>']\n   *      Base HTML to used when creating the tooltip.\n   *      The tooltip's `title` will be injected into the `.tooltip-inner` or `.tooltip__inner`.\n   *      `.tooltip-arrow` or `.tooltip__arrow` will become the tooltip's arrow.\n   *      The outermost wrapper element should have the `.tooltip` class.\n   * @param {String|HTMLElement|TitleFunction} options.title='' - Default title value if `title` attribute isn't present.\n   * @param {String} [options.trigger='hover focus']\n   *      How tooltip is triggered - click, hover, focus, manual.\n   *      You may pass multiple triggers; separate them with a space. `manual` cannot be combined with any other trigger.\n   * @param {HTMLElement} options.boundariesElement\n   *      The element used as boundaries for the tooltip. For more information refer to Popper.js'\n   *      [boundariesElement docs](https://popper.js.org/popper-documentation.html)\n   * @param {Number|String} options.offset=0 - Offset of the tooltip relative to its reference. For more information refer to Popper.js'\n   *      [offset docs](https://popper.js.org/popper-documentation.html)\n   * @param {Object} options.popperOptions={} - Popper options, will be passed directly to popper instance. For more information refer to Popper.js'\n   *      [options docs](https://popper.js.org/popper-documentation.html)\n   * @return {Object} instance - The generated tooltip instance\n   */\n  function Tooltip(_reference, _options) {\n    var _this = this;\n\n    _classCallCheck(this, Tooltip);\n\n    _defineProperty(this, \"_events\", []);\n\n    _defineProperty(this, \"_setTooltipNodeEvent\", function (evt, reference, delay, options) {\n      var relatedreference = evt.relatedreference || evt.toElement || evt.relatedTarget;\n\n      var callback = function callback(evt2) {\n        var relatedreference2 = evt2.relatedreference || evt2.toElement || evt2.relatedTarget; // Remove event listener after call\n\n        _this._tooltipNode.removeEventListener(evt.type, callback); // If the new reference is not the reference element\n\n\n        if (!reference.contains(relatedreference2)) {\n          // Schedule to hide tooltip\n          _this._scheduleHide(reference, options.delay, options, evt2);\n        }\n      };\n\n      if (_this._tooltipNode.contains(relatedreference)) {\n        // listen to mouseleave on the tooltip element to be able to hide the tooltip\n        _this._tooltipNode.addEventListener(evt.type, callback);\n\n        return true;\n      }\n\n      return false;\n    });\n\n    // apply user options over default ones\n    _options = _objectSpread2({}, DEFAULT_OPTIONS, {}, _options);\n    _reference.jquery && (_reference = _reference[0]);\n    this.show = this.show.bind(this);\n    this.hide = this.hide.bind(this); // cache reference and options\n\n    this.reference = _reference;\n    this.options = _options; // set initial state\n\n    this._isOpen = false;\n\n    this._init();\n  } //\n  // Public methods\n  //\n\n  /**\n   * Reveals an element's tooltip. This is considered a \"manual\" triggering of the tooltip.\n   * Tooltips with zero-length titles are never displayed.\n   * @method Tooltip#show\n   * @memberof Tooltip\n   */\n\n\n  _createClass(Tooltip, [{\n    key: \"show\",\n    value: function show() {\n      this._show(this.reference, this.options);\n    }\n    /**\n     * Hides an element’s tooltip. This is considered a “manual” triggering of the tooltip.\n     * @method Tooltip#hide\n     * @memberof Tooltip\n     */\n\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this._hide();\n    }\n    /**\n     * Hides and destroys an element’s tooltip.\n     * @method Tooltip#dispose\n     * @memberof Tooltip\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this._dispose();\n    }\n    /**\n     * Toggles an element’s tooltip. This is considered a “manual” triggering of the tooltip.\n     * @method Tooltip#toggle\n     * @memberof Tooltip\n     */\n\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      if (this._isOpen) {\n        return this.hide();\n      } else {\n        return this.show();\n      }\n    }\n  }, {\n    key: \"setClasses\",\n    value: function setClasses(classes) {\n      this._classes = classes;\n    }\n  }, {\n    key: \"setContent\",\n    value: function setContent(content) {\n      this.options.title = content;\n\n      if (this._tooltipNode) {\n        this._setContent(content, this.options);\n      }\n    }\n  }, {\n    key: \"setOptions\",\n    value: function setOptions(options) {\n      var classesUpdated = false;\n      var classes = options && options.classes || directive.options.defaultClass;\n\n      if (!isEqual_1(this._classes, classes)) {\n        this.setClasses(classes);\n        classesUpdated = true;\n      }\n\n      options = getOptions(options);\n      var needPopperUpdate = false;\n      var needRestart = false;\n\n      if (this.options.offset !== options.offset || this.options.placement !== options.placement) {\n        needPopperUpdate = true;\n      }\n\n      if (this.options.template !== options.template || this.options.trigger !== options.trigger || this.options.container !== options.container || classesUpdated) {\n        needRestart = true;\n      }\n\n      for (var key in options) {\n        this.options[key] = options[key];\n      }\n\n      if (this._tooltipNode) {\n        if (needRestart) {\n          var isOpen = this._isOpen;\n          this.dispose();\n\n          this._init();\n\n          if (isOpen) {\n            this.show();\n          }\n        } else if (needPopperUpdate) {\n          this.popperInstance.update();\n        }\n      }\n    } //\n    // Private methods\n    //\n\n  }, {\n    key: \"_init\",\n    value: function _init() {\n      // get events list\n      var events = typeof this.options.trigger === 'string' ? this.options.trigger.split(' ') : [];\n      this._isDisposed = false;\n      this._enableDocumentTouch = events.indexOf('manual') === -1;\n      events = events.filter(function (trigger) {\n        return ['click', 'hover', 'focus'].indexOf(trigger) !== -1;\n      }); // set event listeners\n\n      this._setEventListeners(this.reference, events, this.options); // title attribute\n\n\n      this.$_originalTitle = this.reference.getAttribute('title');\n      this.reference.removeAttribute('title');\n      this.reference.setAttribute('data-original-title', this.$_originalTitle);\n    }\n    /**\n     * Creates a new tooltip node\n     * @memberof Tooltip\n     * @private\n     * @param {HTMLElement} reference\n     * @param {String} template\n     * @param {String|HTMLElement|TitleFunction} title\n     * @param {Boolean} allowHtml\n     * @return {HTMLelement} tooltipNode\n     */\n\n  }, {\n    key: \"_create\",\n    value: function _create(reference, template) {\n      // create tooltip element\n      var tooltipGenerator = window.document.createElement('div');\n      tooltipGenerator.innerHTML = template.trim();\n      var tooltipNode = tooltipGenerator.childNodes[0]; // add unique ID to our tooltip (needed for accessibility reasons)\n\n      tooltipNode.id = \"tooltip_\".concat(Math.random().toString(36).substr(2, 10)); // Initially hide the tooltip\n      // The attribute will be switched in a next frame so\n      // CSS transitions can play\n\n      tooltipNode.setAttribute('aria-hidden', 'true');\n\n      if (this.options.autoHide && this.options.trigger.indexOf('hover') !== -1) {\n        tooltipNode.addEventListener('mouseenter', this.hide);\n        tooltipNode.addEventListener('click', this.hide);\n      } // return the generated tooltip node\n\n\n      return tooltipNode;\n    }\n  }, {\n    key: \"_setContent\",\n    value: function _setContent(content, options) {\n      var _this2 = this;\n\n      this.asyncContent = false;\n\n      this._applyContent(content, options).then(function () {\n        _this2.popperInstance.update();\n      });\n    }\n  }, {\n    key: \"_applyContent\",\n    value: function _applyContent(title, options) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        var allowHtml = options.html;\n        var rootNode = _this3._tooltipNode;\n        if (!rootNode) return;\n        var titleNode = rootNode.querySelector(_this3.options.innerSelector);\n\n        if (title.nodeType === 1) {\n          // if title is a node, append it only if allowHtml is true\n          if (allowHtml) {\n            while (titleNode.firstChild) {\n              titleNode.removeChild(titleNode.firstChild);\n            }\n\n            titleNode.appendChild(title);\n          }\n        } else if (typeof title === 'function') {\n          // if title is a function, call it and set innerText or innerHtml depending by `allowHtml` value\n          var result = title();\n\n          if (result && typeof result.then === 'function') {\n            _this3.asyncContent = true;\n            options.loadingClass && addClasses(rootNode, options.loadingClass);\n\n            if (options.loadingContent) {\n              _this3._applyContent(options.loadingContent, options);\n            }\n\n            result.then(function (asyncResult) {\n              options.loadingClass && removeClasses(rootNode, options.loadingClass);\n              return _this3._applyContent(asyncResult, options);\n            }).then(resolve).catch(reject);\n          } else {\n            _this3._applyContent(result, options).then(resolve).catch(reject);\n          }\n\n          return;\n        } else {\n          // if it's just a simple text, set innerText or innerHtml depending by `allowHtml` value\n          allowHtml ? titleNode.innerHTML = title : titleNode.innerText = title;\n        }\n\n        resolve();\n      });\n    }\n  }, {\n    key: \"_show\",\n    value: function _show(reference, options) {\n      if (options && typeof options.container === 'string') {\n        var container = document.querySelector(options.container);\n        if (!container) return;\n      }\n\n      clearTimeout(this._disposeTimer);\n      options = Object.assign({}, options);\n      delete options.offset;\n      var updateClasses = true;\n\n      if (this._tooltipNode) {\n        addClasses(this._tooltipNode, this._classes);\n        updateClasses = false;\n      }\n\n      var result = this._ensureShown(reference, options);\n\n      if (updateClasses && this._tooltipNode) {\n        addClasses(this._tooltipNode, this._classes);\n      }\n\n      addClasses(reference, ['v-tooltip-open']);\n      return result;\n    }\n  }, {\n    key: \"_ensureShown\",\n    value: function _ensureShown(reference, options) {\n      var _this4 = this;\n\n      // don't show if it's already visible\n      if (this._isOpen) {\n        return this;\n      }\n\n      this._isOpen = true;\n      openTooltips.push(this); // if the tooltipNode already exists, just show it\n\n      if (this._tooltipNode) {\n        this._tooltipNode.style.display = '';\n\n        this._tooltipNode.setAttribute('aria-hidden', 'false');\n\n        this.popperInstance.enableEventListeners();\n        this.popperInstance.update();\n\n        if (this.asyncContent) {\n          this._setContent(options.title, options);\n        }\n\n        return this;\n      } // get title\n\n\n      var title = reference.getAttribute('title') || options.title; // don't show tooltip if no title is defined\n\n      if (!title) {\n        return this;\n      } // create tooltip node\n\n\n      var tooltipNode = this._create(reference, options.template);\n\n      this._tooltipNode = tooltipNode; // Add `aria-describedby` to our reference element for accessibility reasons\n\n      reference.setAttribute('aria-describedby', tooltipNode.id); // append tooltip to container\n\n      var container = this._findContainer(options.container, reference);\n\n      this._append(tooltipNode, container);\n\n      var popperOptions = _objectSpread2({}, options.popperOptions, {\n        placement: options.placement\n      });\n\n      popperOptions.modifiers = _objectSpread2({}, popperOptions.modifiers, {\n        arrow: {\n          element: this.options.arrowSelector\n        }\n      });\n\n      if (options.boundariesElement) {\n        popperOptions.modifiers.preventOverflow = {\n          boundariesElement: options.boundariesElement\n        };\n      }\n\n      this.popperInstance = new Popper(reference, tooltipNode, popperOptions);\n\n      this._setContent(title, options); // Fix position\n\n\n      requestAnimationFrame(function () {\n        if (!_this4._isDisposed && _this4.popperInstance) {\n          _this4.popperInstance.update(); // Show the tooltip\n\n\n          requestAnimationFrame(function () {\n            if (!_this4._isDisposed) {\n              _this4._isOpen && tooltipNode.setAttribute('aria-hidden', 'false');\n            } else {\n              _this4.dispose();\n            }\n          });\n        } else {\n          _this4.dispose();\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"_noLongerOpen\",\n    value: function _noLongerOpen() {\n      var index = openTooltips.indexOf(this);\n\n      if (index !== -1) {\n        openTooltips.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"_hide\",\n    value: function _hide()\n    /* reference, options */\n    {\n      var _this5 = this;\n\n      // don't hide if it's already hidden\n      if (!this._isOpen) {\n        return this;\n      }\n\n      this._isOpen = false;\n\n      this._noLongerOpen(); // hide tooltipNode\n\n\n      this._tooltipNode.style.display = 'none';\n\n      this._tooltipNode.setAttribute('aria-hidden', 'true');\n\n      this.popperInstance.disableEventListeners();\n      clearTimeout(this._disposeTimer);\n      var disposeTime = directive.options.disposeTimeout;\n\n      if (disposeTime !== null) {\n        this._disposeTimer = setTimeout(function () {\n          if (_this5._tooltipNode) {\n            _this5._tooltipNode.removeEventListener('mouseenter', _this5.hide);\n\n            _this5._tooltipNode.removeEventListener('click', _this5.hide); // Don't remove popper instance, just the HTML element\n\n\n            _this5._removeTooltipNode();\n          }\n        }, disposeTime);\n      }\n\n      removeClasses(this.reference, ['v-tooltip-open']);\n      return this;\n    }\n  }, {\n    key: \"_removeTooltipNode\",\n    value: function _removeTooltipNode() {\n      if (!this._tooltipNode) return;\n      var parentNode = this._tooltipNode.parentNode;\n\n      if (parentNode) {\n        parentNode.removeChild(this._tooltipNode);\n        this.reference.removeAttribute('aria-describedby');\n      }\n\n      this._tooltipNode = null;\n    }\n  }, {\n    key: \"_dispose\",\n    value: function _dispose() {\n      var _this6 = this;\n\n      this._isDisposed = true;\n      this.reference.removeAttribute('data-original-title');\n\n      if (this.$_originalTitle) {\n        this.reference.setAttribute('title', this.$_originalTitle);\n      } // remove event listeners first to prevent any unexpected behaviour\n\n\n      this._events.forEach(function (_ref) {\n        var func = _ref.func,\n            event = _ref.event;\n\n        _this6.reference.removeEventListener(event, func);\n      });\n\n      this._events = [];\n\n      if (this._tooltipNode) {\n        this._hide();\n\n        this._tooltipNode.removeEventListener('mouseenter', this.hide);\n\n        this._tooltipNode.removeEventListener('click', this.hide); // destroy instance\n\n\n        this.popperInstance.destroy(); // destroy tooltipNode if removeOnDestroy is not set, as popperInstance.destroy() already removes the element\n\n        if (!this.popperInstance.options.removeOnDestroy) {\n          this._removeTooltipNode();\n        }\n      } else {\n        this._noLongerOpen();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_findContainer\",\n    value: function _findContainer(container, reference) {\n      // if container is a query, get the relative element\n      if (typeof container === 'string') {\n        container = window.document.querySelector(container);\n      } else if (container === false) {\n        // if container is `false`, set it to reference parent\n        container = reference.parentNode;\n      }\n\n      return container;\n    }\n    /**\n     * Append tooltip to container\n     * @memberof Tooltip\n     * @private\n     * @param {HTMLElement} tooltip\n     * @param {HTMLElement|String|false} container\n     */\n\n  }, {\n    key: \"_append\",\n    value: function _append(tooltipNode, container) {\n      container.appendChild(tooltipNode);\n    }\n  }, {\n    key: \"_setEventListeners\",\n    value: function _setEventListeners(reference, events, options) {\n      var _this7 = this;\n\n      var directEvents = [];\n      var oppositeEvents = [];\n      events.forEach(function (event) {\n        switch (event) {\n          case 'hover':\n            directEvents.push('mouseenter');\n            oppositeEvents.push('mouseleave');\n            if (_this7.options.hideOnTargetClick) oppositeEvents.push('click');\n            break;\n\n          case 'focus':\n            directEvents.push('focus');\n            oppositeEvents.push('blur');\n            if (_this7.options.hideOnTargetClick) oppositeEvents.push('click');\n            break;\n\n          case 'click':\n            directEvents.push('click');\n            oppositeEvents.push('click');\n            break;\n        }\n      }); // schedule show tooltip\n\n      directEvents.forEach(function (event) {\n        var func = function func(evt) {\n          if (_this7._isOpen === true) {\n            return;\n          }\n\n          evt.usedByTooltip = true;\n\n          _this7._scheduleShow(reference, options.delay, options, evt);\n        };\n\n        _this7._events.push({\n          event: event,\n          func: func\n        });\n\n        reference.addEventListener(event, func);\n      }); // schedule hide tooltip\n\n      oppositeEvents.forEach(function (event) {\n        var func = function func(evt) {\n          if (evt.usedByTooltip === true) {\n            return;\n          }\n\n          _this7._scheduleHide(reference, options.delay, options, evt);\n        };\n\n        _this7._events.push({\n          event: event,\n          func: func\n        });\n\n        reference.addEventListener(event, func);\n      });\n    }\n  }, {\n    key: \"_onDocumentTouch\",\n    value: function _onDocumentTouch(event) {\n      if (this._enableDocumentTouch) {\n        this._scheduleHide(this.reference, this.options.delay, this.options, event);\n      }\n    }\n  }, {\n    key: \"_scheduleShow\",\n    value: function _scheduleShow(reference, delay, options\n    /*, evt */\n    ) {\n      var _this8 = this;\n\n      // defaults to 0\n      var computedDelay = delay && delay.show || delay || 0;\n      clearTimeout(this._scheduleTimer);\n      this._scheduleTimer = window.setTimeout(function () {\n        return _this8._show(reference, options);\n      }, computedDelay);\n    }\n  }, {\n    key: \"_scheduleHide\",\n    value: function _scheduleHide(reference, delay, options, evt) {\n      var _this9 = this;\n\n      // defaults to 0\n      var computedDelay = delay && delay.hide || delay || 0;\n      clearTimeout(this._scheduleTimer);\n      this._scheduleTimer = window.setTimeout(function () {\n        if (_this9._isOpen === false) {\n          return;\n        }\n\n        if (!_this9._tooltipNode.ownerDocument.body.contains(_this9._tooltipNode)) {\n          return;\n        } // if we are hiding because of a mouseleave, we must check that the new\n        // reference isn't the tooltip, because in this case we don't want to hide it\n\n\n        if (evt.type === 'mouseleave') {\n          var isSet = _this9._setTooltipNodeEvent(evt, reference, delay, options); // if we set the new event, don't hide the tooltip yet\n          // the new event will take care to hide it if necessary\n\n\n          if (isSet) {\n            return;\n          }\n        }\n\n        _this9._hide(reference, options);\n      }, computedDelay);\n    }\n  }]);\n\n  return Tooltip;\n}(); // Hide tooltips on touch devices\n\nif (typeof document !== 'undefined') {\n  document.addEventListener('touchstart', function (event) {\n    for (var i = 0; i < openTooltips.length; i++) {\n      openTooltips[i]._onDocumentTouch(event);\n    }\n  }, supportsPassive ? {\n    passive: true,\n    capture: true\n  } : true);\n}\n/**\n * Placement function, its context is the Tooltip instance.\n * @memberof Tooltip\n * @callback PlacementFunction\n * @param {HTMLElement} tooltip - tooltip DOM node.\n * @param {HTMLElement} reference - reference DOM node.\n * @return {String} placement - One of the allowed placement options.\n */\n\n/**\n * Title function, its context is the Tooltip instance.\n * @memberof Tooltip\n * @callback TitleFunction\n * @return {String} placement - The desired title.\n */\n\nvar state = {\n  enabled: true\n};\nvar positions = ['top', 'top-start', 'top-end', 'right', 'right-start', 'right-end', 'bottom', 'bottom-start', 'bottom-end', 'left', 'left-start', 'left-end'];\nvar defaultOptions = {\n  // Default tooltip placement relative to target element\n  defaultPlacement: 'top',\n  // Default CSS classes applied to the tooltip element\n  defaultClass: 'vue-tooltip-theme',\n  // Default CSS classes applied to the target element of the tooltip\n  defaultTargetClass: 'has-tooltip',\n  // Is the content HTML by default?\n  defaultHtml: true,\n  // Default HTML template of the tooltip element\n  // It must include `tooltip-arrow` & `tooltip-inner` CSS classes (can be configured, see below)\n  // Change if the classes conflict with other libraries (for example bootstrap)\n  defaultTemplate: '<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\n  // Selector used to get the arrow element in the tooltip template\n  defaultArrowSelector: '.tooltip-arrow, .tooltip__arrow',\n  // Selector used to get the inner content element in the tooltip template\n  defaultInnerSelector: '.tooltip-inner, .tooltip__inner',\n  // Delay (ms)\n  defaultDelay: 0,\n  // Default events that trigger the tooltip\n  defaultTrigger: 'hover focus',\n  // Default position offset (px)\n  defaultOffset: 0,\n  // Default container where the tooltip will be appended\n  defaultContainer: 'body',\n  defaultBoundariesElement: undefined,\n  defaultPopperOptions: {},\n  // Class added when content is loading\n  defaultLoadingClass: 'tooltip-loading',\n  // Displayed when tooltip content is loading\n  defaultLoadingContent: '...',\n  // Hide on mouseover tooltip\n  autoHide: true,\n  // Close tooltip on click on tooltip target?\n  defaultHideOnTargetClick: true,\n  // Auto destroy tooltip DOM nodes (ms)\n  disposeTimeout: 5000,\n  // Options for popover\n  popover: {\n    defaultPlacement: 'bottom',\n    // Use the `popoverClass` prop for theming\n    defaultClass: 'vue-popover-theme',\n    // Base class (change if conflicts with other libraries)\n    defaultBaseClass: 'tooltip popover',\n    // Wrapper class (contains arrow and inner)\n    defaultWrapperClass: 'wrapper',\n    // Inner content class\n    defaultInnerClass: 'tooltip-inner popover-inner',\n    // Arrow class\n    defaultArrowClass: 'tooltip-arrow popover-arrow',\n    // Class added when popover is open\n    defaultOpenClass: 'open',\n    defaultDelay: 0,\n    defaultTrigger: 'click',\n    defaultOffset: 0,\n    defaultContainer: 'body',\n    defaultBoundariesElement: undefined,\n    defaultPopperOptions: {},\n    // Hides if clicked outside of popover\n    defaultAutoHide: true,\n    // Update popper on content resize\n    defaultHandleResize: true\n  }\n};\nfunction getOptions(options) {\n  var result = {\n    placement: typeof options.placement !== 'undefined' ? options.placement : directive.options.defaultPlacement,\n    delay: typeof options.delay !== 'undefined' ? options.delay : directive.options.defaultDelay,\n    html: typeof options.html !== 'undefined' ? options.html : directive.options.defaultHtml,\n    template: typeof options.template !== 'undefined' ? options.template : directive.options.defaultTemplate,\n    arrowSelector: typeof options.arrowSelector !== 'undefined' ? options.arrowSelector : directive.options.defaultArrowSelector,\n    innerSelector: typeof options.innerSelector !== 'undefined' ? options.innerSelector : directive.options.defaultInnerSelector,\n    trigger: typeof options.trigger !== 'undefined' ? options.trigger : directive.options.defaultTrigger,\n    offset: typeof options.offset !== 'undefined' ? options.offset : directive.options.defaultOffset,\n    container: typeof options.container !== 'undefined' ? options.container : directive.options.defaultContainer,\n    boundariesElement: typeof options.boundariesElement !== 'undefined' ? options.boundariesElement : directive.options.defaultBoundariesElement,\n    autoHide: typeof options.autoHide !== 'undefined' ? options.autoHide : directive.options.autoHide,\n    hideOnTargetClick: typeof options.hideOnTargetClick !== 'undefined' ? options.hideOnTargetClick : directive.options.defaultHideOnTargetClick,\n    loadingClass: typeof options.loadingClass !== 'undefined' ? options.loadingClass : directive.options.defaultLoadingClass,\n    loadingContent: typeof options.loadingContent !== 'undefined' ? options.loadingContent : directive.options.defaultLoadingContent,\n    popperOptions: _objectSpread2({}, typeof options.popperOptions !== 'undefined' ? options.popperOptions : directive.options.defaultPopperOptions)\n  };\n\n  if (result.offset) {\n    var typeofOffset = _typeof(result.offset);\n\n    var offset = result.offset; // One value -> switch\n\n    if (typeofOffset === 'number' || typeofOffset === 'string' && offset.indexOf(',') === -1) {\n      offset = \"0, \".concat(offset);\n    }\n\n    if (!result.popperOptions.modifiers) {\n      result.popperOptions.modifiers = {};\n    }\n\n    result.popperOptions.modifiers.offset = {\n      offset: offset\n    };\n  }\n\n  if (result.trigger && result.trigger.indexOf('click') !== -1) {\n    result.hideOnTargetClick = false;\n  }\n\n  return result;\n}\nfunction getPlacement(value, modifiers) {\n  var placement = value.placement;\n\n  for (var i = 0; i < positions.length; i++) {\n    var pos = positions[i];\n\n    if (modifiers[pos]) {\n      placement = pos;\n    }\n  }\n\n  return placement;\n}\nfunction getContent(value) {\n  var type = _typeof(value);\n\n  if (type === 'string') {\n    return value;\n  } else if (value && type === 'object') {\n    return value.content;\n  } else {\n    return false;\n  }\n}\nfunction createTooltip(el, value) {\n  var modifiers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var content = getContent(value);\n  var classes = typeof value.classes !== 'undefined' ? value.classes : directive.options.defaultClass;\n\n  var opts = _objectSpread2({\n    title: content\n  }, getOptions(_objectSpread2({}, value, {\n    placement: getPlacement(value, modifiers)\n  })));\n\n  var tooltip = el._tooltip = new Tooltip(el, opts);\n  tooltip.setClasses(classes);\n  tooltip._vueEl = el; // Class on target\n\n  var targetClasses = typeof value.targetClasses !== 'undefined' ? value.targetClasses : directive.options.defaultTargetClass;\n  el._tooltipTargetClasses = targetClasses;\n  addClasses(el, targetClasses);\n  return tooltip;\n}\nfunction destroyTooltip(el) {\n  if (el._tooltip) {\n    el._tooltip.dispose();\n\n    delete el._tooltip;\n    delete el._tooltipOldShow;\n  }\n\n  if (el._tooltipTargetClasses) {\n    removeClasses(el, el._tooltipTargetClasses);\n    delete el._tooltipTargetClasses;\n  }\n}\nfunction bind(el, _ref) {\n  var value = _ref.value,\n      oldValue = _ref.oldValue,\n      modifiers = _ref.modifiers;\n  var content = getContent(value);\n\n  if (!content || !state.enabled) {\n    destroyTooltip(el);\n  } else {\n    var tooltip;\n\n    if (el._tooltip) {\n      tooltip = el._tooltip; // Content\n\n      tooltip.setContent(content); // Options\n\n      tooltip.setOptions(_objectSpread2({}, value, {\n        placement: getPlacement(value, modifiers)\n      }));\n    } else {\n      tooltip = createTooltip(el, value, modifiers);\n    } // Manual show\n\n\n    if (typeof value.show !== 'undefined' && value.show !== el._tooltipOldShow) {\n      el._tooltipOldShow = value.show;\n      value.show ? tooltip.show() : tooltip.hide();\n    }\n  }\n}\nvar directive = {\n  options: defaultOptions,\n  bind: bind,\n  update: bind,\n  unbind: function unbind(el) {\n    destroyTooltip(el);\n  }\n};\n\nfunction addListeners(el) {\n  el.addEventListener('click', onClick);\n  el.addEventListener('touchstart', onTouchStart, supportsPassive ? {\n    passive: true\n  } : false);\n}\n\nfunction removeListeners(el) {\n  el.removeEventListener('click', onClick);\n  el.removeEventListener('touchstart', onTouchStart);\n  el.removeEventListener('touchend', onTouchEnd);\n  el.removeEventListener('touchcancel', onTouchCancel);\n}\n\nfunction onClick(event) {\n  var el = event.currentTarget;\n  event.closePopover = !el.$_vclosepopover_touch;\n  event.closeAllPopover = el.$_closePopoverModifiers && !!el.$_closePopoverModifiers.all;\n}\n\nfunction onTouchStart(event) {\n  if (event.changedTouches.length === 1) {\n    var el = event.currentTarget;\n    el.$_vclosepopover_touch = true;\n    var touch = event.changedTouches[0];\n    el.$_vclosepopover_touchPoint = touch;\n    el.addEventListener('touchend', onTouchEnd);\n    el.addEventListener('touchcancel', onTouchCancel);\n  }\n}\n\nfunction onTouchEnd(event) {\n  var el = event.currentTarget;\n  el.$_vclosepopover_touch = false;\n\n  if (event.changedTouches.length === 1) {\n    var touch = event.changedTouches[0];\n    var firstTouch = el.$_vclosepopover_touchPoint;\n    event.closePopover = Math.abs(touch.screenY - firstTouch.screenY) < 20 && Math.abs(touch.screenX - firstTouch.screenX) < 20;\n    event.closeAllPopover = el.$_closePopoverModifiers && !!el.$_closePopoverModifiers.all;\n  }\n}\n\nfunction onTouchCancel(event) {\n  var el = event.currentTarget;\n  el.$_vclosepopover_touch = false;\n}\n\nvar vclosepopover = {\n  bind: function bind(el, _ref) {\n    var value = _ref.value,\n        modifiers = _ref.modifiers;\n    el.$_closePopoverModifiers = modifiers;\n\n    if (typeof value === 'undefined' || value) {\n      addListeners(el);\n    }\n  },\n  update: function update(el, _ref2) {\n    var value = _ref2.value,\n        oldValue = _ref2.oldValue,\n        modifiers = _ref2.modifiers;\n    el.$_closePopoverModifiers = modifiers;\n\n    if (value !== oldValue) {\n      if (typeof value === 'undefined' || value) {\n        addListeners(el);\n      } else {\n        removeListeners(el);\n      }\n    }\n  },\n  unbind: function unbind(el) {\n    removeListeners(el);\n  }\n};\n\nfunction getDefault(key) {\n  var value = directive.options.popover[key];\n\n  if (typeof value === 'undefined') {\n    return directive.options[key];\n  }\n\n  return value;\n}\n\nvar isIOS = false;\n\nif (typeof window !== 'undefined' && typeof navigator !== 'undefined') {\n  isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n}\n\nvar openPopovers = [];\n\nvar Element = function Element() {};\n\nif (typeof window !== 'undefined') {\n  Element = window.Element;\n}\n\nvar script = {\n  name: 'VPopover',\n  components: {\n    ResizeObserver: ResizeObserver\n  },\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    placement: {\n      type: String,\n      default: function _default() {\n        return getDefault('defaultPlacement');\n      }\n    },\n    delay: {\n      type: [String, Number, Object],\n      default: function _default() {\n        return getDefault('defaultDelay');\n      }\n    },\n    offset: {\n      type: [String, Number],\n      default: function _default() {\n        return getDefault('defaultOffset');\n      }\n    },\n    trigger: {\n      type: String,\n      default: function _default() {\n        return getDefault('defaultTrigger');\n      }\n    },\n    container: {\n      type: [String, Object, Element, Boolean],\n      default: function _default() {\n        return getDefault('defaultContainer');\n      }\n    },\n    boundariesElement: {\n      type: [String, Element],\n      default: function _default() {\n        return getDefault('defaultBoundariesElement');\n      }\n    },\n    popperOptions: {\n      type: Object,\n      default: function _default() {\n        return getDefault('defaultPopperOptions');\n      }\n    },\n    popoverClass: {\n      type: [String, Array],\n      default: function _default() {\n        return getDefault('defaultClass');\n      }\n    },\n    popoverBaseClass: {\n      type: [String, Array],\n      default: function _default() {\n        return directive.options.popover.defaultBaseClass;\n      }\n    },\n    popoverInnerClass: {\n      type: [String, Array],\n      default: function _default() {\n        return directive.options.popover.defaultInnerClass;\n      }\n    },\n    popoverWrapperClass: {\n      type: [String, Array],\n      default: function _default() {\n        return directive.options.popover.defaultWrapperClass;\n      }\n    },\n    popoverArrowClass: {\n      type: [String, Array],\n      default: function _default() {\n        return directive.options.popover.defaultArrowClass;\n      }\n    },\n    autoHide: {\n      type: Boolean,\n      default: function _default() {\n        return directive.options.popover.defaultAutoHide;\n      }\n    },\n    handleResize: {\n      type: Boolean,\n      default: function _default() {\n        return directive.options.popover.defaultHandleResize;\n      }\n    },\n    openGroup: {\n      type: String,\n      default: null\n    },\n    openClass: {\n      type: [String, Array],\n      default: function _default() {\n        return directive.options.popover.defaultOpenClass;\n      }\n    }\n  },\n  data: function data() {\n    return {\n      isOpen: false,\n      id: Math.random().toString(36).substr(2, 10)\n    };\n  },\n  computed: {\n    cssClass: function cssClass() {\n      return _defineProperty({}, this.openClass, this.isOpen);\n    },\n    popoverId: function popoverId() {\n      return \"popover_\".concat(this.id);\n    }\n  },\n  watch: {\n    open: function open(val) {\n      if (val) {\n        this.show();\n      } else {\n        this.hide();\n      }\n    },\n    disabled: function disabled(val, oldVal) {\n      if (val !== oldVal) {\n        if (val) {\n          this.hide();\n        } else if (this.open) {\n          this.show();\n        }\n      }\n    },\n    container: function container(val) {\n      if (this.isOpen && this.popperInstance) {\n        var popoverNode = this.$refs.popover;\n        var reference = this.$refs.trigger;\n        var container = this.$_findContainer(this.container, reference);\n\n        if (!container) {\n          console.warn('No container for popover', this);\n          return;\n        }\n\n        container.appendChild(popoverNode);\n        this.popperInstance.scheduleUpdate();\n      }\n    },\n    trigger: function trigger(val) {\n      this.$_removeEventListeners();\n      this.$_addEventListeners();\n    },\n    placement: function placement(val) {\n      var _this = this;\n\n      this.$_updatePopper(function () {\n        _this.popperInstance.options.placement = val;\n      });\n    },\n    offset: '$_restartPopper',\n    boundariesElement: '$_restartPopper',\n    popperOptions: {\n      handler: '$_restartPopper',\n      deep: true\n    }\n  },\n  created: function created() {\n    this.$_isDisposed = false;\n    this.$_mounted = false;\n    this.$_events = [];\n    this.$_preventOpen = false;\n  },\n  mounted: function mounted() {\n    var popoverNode = this.$refs.popover;\n    popoverNode.parentNode && popoverNode.parentNode.removeChild(popoverNode);\n    this.$_init();\n\n    if (this.open) {\n      this.show();\n    }\n  },\n  deactivated: function deactivated() {\n    this.hide();\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.dispose();\n  },\n  methods: {\n    show: function show() {\n      var _this2 = this;\n\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          event = _ref2.event,\n          _ref2$skipDelay = _ref2.skipDelay,\n          _ref2$force = _ref2.force,\n          force = _ref2$force === void 0 ? false : _ref2$force;\n\n      if (force || !this.disabled) {\n        this.$_scheduleShow(event);\n        this.$emit('show');\n      }\n\n      this.$emit('update:open', true);\n      this.$_beingShowed = true;\n      requestAnimationFrame(function () {\n        _this2.$_beingShowed = false;\n      });\n    },\n    hide: function hide() {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          event = _ref3.event,\n          _ref3$skipDelay = _ref3.skipDelay;\n\n      this.$_scheduleHide(event);\n      this.$emit('hide');\n      this.$emit('update:open', false);\n    },\n    dispose: function dispose() {\n      this.$_isDisposed = true;\n      this.$_removeEventListeners();\n      this.hide({\n        skipDelay: true\n      });\n\n      if (this.popperInstance) {\n        this.popperInstance.destroy(); // destroy tooltipNode if removeOnDestroy is not set, as popperInstance.destroy() already removes the element\n\n        if (!this.popperInstance.options.removeOnDestroy) {\n          var popoverNode = this.$refs.popover;\n          popoverNode.parentNode && popoverNode.parentNode.removeChild(popoverNode);\n        }\n      }\n\n      this.$_mounted = false;\n      this.popperInstance = null;\n      this.isOpen = false;\n      this.$emit('dispose');\n    },\n    $_init: function $_init() {\n      if (this.trigger.indexOf('manual') === -1) {\n        this.$_addEventListeners();\n      }\n    },\n    $_show: function $_show() {\n      var _this3 = this;\n\n      var reference = this.$refs.trigger;\n      var popoverNode = this.$refs.popover;\n      clearTimeout(this.$_disposeTimer); // Already open\n\n      if (this.isOpen) {\n        return;\n      } // Popper is already initialized\n\n\n      if (this.popperInstance) {\n        this.isOpen = true;\n        this.popperInstance.enableEventListeners();\n        this.popperInstance.scheduleUpdate();\n      }\n\n      if (!this.$_mounted) {\n        var container = this.$_findContainer(this.container, reference);\n\n        if (!container) {\n          console.warn('No container for popover', this);\n          return;\n        }\n\n        container.appendChild(popoverNode);\n        this.$_mounted = true;\n      }\n\n      if (!this.popperInstance) {\n        var popperOptions = _objectSpread2({}, this.popperOptions, {\n          placement: this.placement\n        });\n\n        popperOptions.modifiers = _objectSpread2({}, popperOptions.modifiers, {\n          arrow: _objectSpread2({}, popperOptions.modifiers && popperOptions.modifiers.arrow, {\n            element: this.$refs.arrow\n          })\n        });\n\n        if (this.offset) {\n          var offset = this.$_getOffset();\n          popperOptions.modifiers.offset = _objectSpread2({}, popperOptions.modifiers && popperOptions.modifiers.offset, {\n            offset: offset\n          });\n        }\n\n        if (this.boundariesElement) {\n          popperOptions.modifiers.preventOverflow = _objectSpread2({}, popperOptions.modifiers && popperOptions.modifiers.preventOverflow, {\n            boundariesElement: this.boundariesElement\n          });\n        }\n\n        this.popperInstance = new Popper(reference, popoverNode, popperOptions); // Fix position\n\n        requestAnimationFrame(function () {\n          if (_this3.hidden) {\n            _this3.hidden = false;\n\n            _this3.$_hide();\n\n            return;\n          }\n\n          if (!_this3.$_isDisposed && _this3.popperInstance) {\n            _this3.popperInstance.scheduleUpdate(); // Show the tooltip\n\n\n            requestAnimationFrame(function () {\n              if (_this3.hidden) {\n                _this3.hidden = false;\n\n                _this3.$_hide();\n\n                return;\n              }\n\n              if (!_this3.$_isDisposed) {\n                _this3.isOpen = true;\n              } else {\n                _this3.dispose();\n              }\n            });\n          } else {\n            _this3.dispose();\n          }\n        });\n      }\n\n      var openGroup = this.openGroup;\n\n      if (openGroup) {\n        var popover;\n\n        for (var i = 0; i < openPopovers.length; i++) {\n          popover = openPopovers[i];\n\n          if (popover.openGroup !== openGroup) {\n            popover.hide();\n            popover.$emit('close-group');\n          }\n        }\n      }\n\n      openPopovers.push(this);\n      this.$emit('apply-show');\n    },\n    $_hide: function $_hide() {\n      var _this4 = this;\n\n      // Already hidden\n      if (!this.isOpen) {\n        return;\n      }\n\n      var index = openPopovers.indexOf(this);\n\n      if (index !== -1) {\n        openPopovers.splice(index, 1);\n      }\n\n      this.isOpen = false;\n\n      if (this.popperInstance) {\n        this.popperInstance.disableEventListeners();\n      }\n\n      clearTimeout(this.$_disposeTimer);\n      var disposeTime = directive.options.popover.disposeTimeout || directive.options.disposeTimeout;\n\n      if (disposeTime !== null) {\n        this.$_disposeTimer = setTimeout(function () {\n          var popoverNode = _this4.$refs.popover;\n\n          if (popoverNode) {\n            // Don't remove popper instance, just the HTML element\n            popoverNode.parentNode && popoverNode.parentNode.removeChild(popoverNode);\n            _this4.$_mounted = false;\n          }\n        }, disposeTime);\n      }\n\n      this.$emit('apply-hide');\n    },\n    $_findContainer: function $_findContainer(container, reference) {\n      // if container is a query, get the relative element\n      if (typeof container === 'string') {\n        container = window.document.querySelector(container);\n      } else if (container === false) {\n        // if container is `false`, set it to reference parent\n        container = reference.parentNode;\n      }\n\n      return container;\n    },\n    $_getOffset: function $_getOffset() {\n      var typeofOffset = _typeof(this.offset);\n\n      var offset = this.offset; // One value -> switch\n\n      if (typeofOffset === 'number' || typeofOffset === 'string' && offset.indexOf(',') === -1) {\n        offset = \"0, \".concat(offset);\n      }\n\n      return offset;\n    },\n    $_addEventListeners: function $_addEventListeners() {\n      var _this5 = this;\n\n      var reference = this.$refs.trigger;\n      var directEvents = [];\n      var oppositeEvents = [];\n      var events = typeof this.trigger === 'string' ? this.trigger.split(' ').filter(function (trigger) {\n        return ['click', 'hover', 'focus'].indexOf(trigger) !== -1;\n      }) : [];\n      events.forEach(function (event) {\n        switch (event) {\n          case 'hover':\n            directEvents.push('mouseenter');\n            oppositeEvents.push('mouseleave');\n            break;\n\n          case 'focus':\n            directEvents.push('focus');\n            oppositeEvents.push('blur');\n            break;\n\n          case 'click':\n            directEvents.push('click');\n            oppositeEvents.push('click');\n            break;\n        }\n      }); // schedule show tooltip\n\n      directEvents.forEach(function (event) {\n        var func = function func(event) {\n          if (_this5.isOpen) {\n            return;\n          }\n\n          event.usedByTooltip = true;\n          !_this5.$_preventOpen && _this5.show({\n            event: event\n          });\n          _this5.hidden = false;\n        };\n\n        _this5.$_events.push({\n          event: event,\n          func: func\n        });\n\n        reference.addEventListener(event, func);\n      }); // schedule hide tooltip\n\n      oppositeEvents.forEach(function (event) {\n        var func = function func(event) {\n          if (event.usedByTooltip) {\n            return;\n          }\n\n          _this5.hide({\n            event: event\n          });\n\n          _this5.hidden = true;\n        };\n\n        _this5.$_events.push({\n          event: event,\n          func: func\n        });\n\n        reference.addEventListener(event, func);\n      });\n    },\n    $_scheduleShow: function $_scheduleShow() {\n      var skipDelay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      clearTimeout(this.$_scheduleTimer);\n\n      if (skipDelay) {\n        this.$_show();\n      } else {\n        // defaults to 0\n        var computedDelay = parseInt(this.delay && this.delay.show || this.delay || 0);\n        this.$_scheduleTimer = setTimeout(this.$_show.bind(this), computedDelay);\n      }\n    },\n    $_scheduleHide: function $_scheduleHide() {\n      var _this6 = this;\n\n      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var skipDelay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      clearTimeout(this.$_scheduleTimer);\n\n      if (skipDelay) {\n        this.$_hide();\n      } else {\n        // defaults to 0\n        var computedDelay = parseInt(this.delay && this.delay.hide || this.delay || 0);\n        this.$_scheduleTimer = setTimeout(function () {\n          if (!_this6.isOpen) {\n            return;\n          } // if we are hiding because of a mouseleave, we must check that the new\n          // reference isn't the tooltip, because in this case we don't want to hide it\n\n\n          if (event && event.type === 'mouseleave') {\n            var isSet = _this6.$_setTooltipNodeEvent(event); // if we set the new event, don't hide the tooltip yet\n            // the new event will take care to hide it if necessary\n\n\n            if (isSet) {\n              return;\n            }\n          }\n\n          _this6.$_hide();\n        }, computedDelay);\n      }\n    },\n    $_setTooltipNodeEvent: function $_setTooltipNodeEvent(event) {\n      var _this7 = this;\n\n      var reference = this.$refs.trigger;\n      var popoverNode = this.$refs.popover;\n      var relatedreference = event.relatedreference || event.toElement || event.relatedTarget;\n\n      var callback = function callback(event2) {\n        var relatedreference2 = event2.relatedreference || event2.toElement || event2.relatedTarget; // Remove event listener after call\n\n        popoverNode.removeEventListener(event.type, callback); // If the new reference is not the reference element\n\n        if (!reference.contains(relatedreference2)) {\n          // Schedule to hide tooltip\n          _this7.hide({\n            event: event2\n          });\n        }\n      };\n\n      if (popoverNode.contains(relatedreference)) {\n        // listen to mouseleave on the tooltip element to be able to hide the tooltip\n        popoverNode.addEventListener(event.type, callback);\n        return true;\n      }\n\n      return false;\n    },\n    $_removeEventListeners: function $_removeEventListeners() {\n      var reference = this.$refs.trigger;\n      this.$_events.forEach(function (_ref4) {\n        var func = _ref4.func,\n            event = _ref4.event;\n        reference.removeEventListener(event, func);\n      });\n      this.$_events = [];\n    },\n    $_updatePopper: function $_updatePopper(cb) {\n      if (this.popperInstance) {\n        cb();\n        if (this.isOpen) this.popperInstance.scheduleUpdate();\n      }\n    },\n    $_restartPopper: function $_restartPopper() {\n      if (this.popperInstance) {\n        var isOpen = this.isOpen;\n        this.dispose();\n        this.$_isDisposed = false;\n        this.$_init();\n\n        if (isOpen) {\n          this.show({\n            skipDelay: true,\n            force: true\n          });\n        }\n      }\n    },\n    $_handleGlobalClose: function $_handleGlobalClose(event) {\n      var _this8 = this;\n\n      var touch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (this.$_beingShowed) return;\n      this.hide({\n        event: event\n      });\n\n      if (event.closePopover) {\n        this.$emit('close-directive');\n      } else {\n        this.$emit('auto-hide');\n      }\n\n      if (touch) {\n        this.$_preventOpen = true;\n        setTimeout(function () {\n          _this8.$_preventOpen = false;\n        }, 300);\n      }\n    },\n    $_handleResize: function $_handleResize() {\n      if (this.isOpen && this.popperInstance) {\n        this.popperInstance.scheduleUpdate();\n        this.$emit('resize');\n      }\n    }\n  }\n};\n\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n  if (isIOS) {\n    document.addEventListener('touchend', handleGlobalTouchend, supportsPassive ? {\n      passive: true,\n      capture: true\n    } : true);\n  } else {\n    window.addEventListener('click', handleGlobalClick, true);\n  }\n}\n\nfunction handleGlobalClick(event) {\n  handleGlobalClose(event);\n}\n\nfunction handleGlobalTouchend(event) {\n  handleGlobalClose(event, true);\n}\n\nfunction handleGlobalClose(event) {\n  var touch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var _loop = function _loop(i) {\n    var popover = openPopovers[i];\n\n    if (popover.$refs.popover) {\n      var contains = popover.$refs.popover.contains(event.target);\n      requestAnimationFrame(function () {\n        if (event.closeAllPopover || event.closePopover && contains || popover.autoHide && !contains) {\n          popover.$_handleGlobalClose(event, touch);\n        }\n      });\n    }\n  };\n\n  // Delay so that close directive has time to set values\n  for (var i = 0; i < openPopovers.length; i++) {\n    _loop(i);\n  }\n}\n\nfunction normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    const options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    let hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            const originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            const existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\n/* script */\nvar __vue_script__ = script;\n/* template */\n\nvar __vue_render__ = function __vue_render__() {\n  var _vm = this;\n\n  var _h = _vm.$createElement;\n\n  var _c = _vm._self._c || _h;\n\n  return _c(\"div\", {\n    staticClass: \"v-popover\",\n    class: _vm.cssClass\n  }, [_c(\"div\", {\n    ref: \"trigger\",\n    staticClass: \"trigger\",\n    staticStyle: {\n      display: \"inline-block\"\n    },\n    attrs: {\n      \"aria-describedby\": _vm.popoverId,\n      tabindex: _vm.trigger.indexOf(\"focus\") !== -1 ? 0 : undefined\n    }\n  }, [_vm._t(\"default\")], 2), _vm._v(\" \"), _c(\"div\", {\n    ref: \"popover\",\n    class: [_vm.popoverBaseClass, _vm.popoverClass, _vm.cssClass],\n    style: {\n      visibility: _vm.isOpen ? \"visible\" : \"hidden\"\n    },\n    attrs: {\n      id: _vm.popoverId,\n      \"aria-hidden\": _vm.isOpen ? \"false\" : \"true\",\n      tabindex: _vm.autoHide ? 0 : undefined\n    },\n    on: {\n      keyup: function keyup($event) {\n        if (!$event.type.indexOf(\"key\") && _vm._k($event.keyCode, \"esc\", 27, $event.key, [\"Esc\", \"Escape\"])) {\n          return null;\n        }\n\n        _vm.autoHide && _vm.hide();\n      }\n    }\n  }, [_c(\"div\", {\n    class: _vm.popoverWrapperClass\n  }, [_c(\"div\", {\n    ref: \"inner\",\n    class: _vm.popoverInnerClass,\n    staticStyle: {\n      position: \"relative\"\n    }\n  }, [_c(\"div\", [_vm._t(\"popover\")], 2), _vm._v(\" \"), _vm.handleResize ? _c(\"ResizeObserver\", {\n    on: {\n      notify: _vm.$_handleResize\n    }\n  }) : _vm._e()], 1), _vm._v(\" \"), _c(\"div\", {\n    ref: \"arrow\",\n    class: _vm.popoverArrowClass\n  })])])]);\n};\n\nvar __vue_staticRenderFns__ = [];\n__vue_render__._withStripped = true;\n/* style */\n\nvar __vue_inject_styles__ = undefined;\n/* scoped */\n\nvar __vue_scope_id__ = undefined;\n/* module identifier */\n\nvar __vue_module_identifier__ = undefined;\n/* functional template */\n\nvar __vue_is_functional_template__ = false;\n/* style inject */\n\n/* style inject SSR */\n\n/* style inject shadow dom */\n\nvar __vue_component__ = normalizeComponent({\n  render: __vue_render__,\n  staticRenderFns: __vue_staticRenderFns__\n}, __vue_inject_styles__, __vue_script__, __vue_scope_id__, __vue_is_functional_template__, __vue_module_identifier__, false, undefined, undefined, undefined);\n\nvar defineProperty = (function() {\n  try {\n    var func = _getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nvar _defineProperty$1 = defineProperty;\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && _defineProperty$1) {\n    _defineProperty$1(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nvar _baseAssignValue = baseAssignValue;\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq_1(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    _baseAssignValue(object, key, value);\n  }\n}\n\nvar _assignMergeValue = assignMergeValue;\n\n/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nvar _createBaseFor = createBaseFor;\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = _createBaseFor();\n\nvar _baseFor = baseFor;\n\nvar _cloneBuffer = createCommonjsModule(function (module, exports) {\n/** Detect free variable `exports`. */\nvar freeExports =  exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? _root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n});\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new _Uint8Array(result).set(new _Uint8Array(arrayBuffer));\n  return result;\n}\n\nvar _cloneArrayBuffer = cloneArrayBuffer;\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? _cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nvar _cloneTypedArray = cloneTypedArray;\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nvar _copyArray = copyArray;\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject_1(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nvar _baseCreate = baseCreate;\n\n/** Built-in value references. */\nvar getPrototype = _overArg(Object.getPrototypeOf, Object);\n\nvar _getPrototype = getPrototype;\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !_isPrototype(object))\n    ? _baseCreate(_getPrototype(object))\n    : {};\n}\n\nvar _initCloneObject = initCloneObject;\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike_1(value) && isArrayLike_1(value);\n}\n\nvar isArrayLikeObject_1 = isArrayLikeObject;\n\n/** `Object#toString` result references. */\nvar objectTag$3 = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto$2 = Function.prototype,\n    objectProto$c = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString$2 = funcProto$2.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$9 = objectProto$c.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString$2.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike_1(value) || _baseGetTag(value) != objectTag$3) {\n    return false;\n  }\n  var proto = _getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty$9.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString$2.call(Ctor) == objectCtorString;\n}\n\nvar isPlainObject_1 = isPlainObject;\n\n/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nvar _safeGet = safeGet;\n\n/** Used for built-in method references. */\nvar objectProto$d = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$a = objectProto$d.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty$a.call(object, key) && eq_1(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    _baseAssignValue(object, key, value);\n  }\n}\n\nvar _assignValue = assignValue;\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      _baseAssignValue(object, key, newValue);\n    } else {\n      _assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nvar _copyObject = copyObject;\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nvar _nativeKeysIn = nativeKeysIn;\n\n/** Used for built-in method references. */\nvar objectProto$e = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$b = objectProto$e.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject_1(object)) {\n    return _nativeKeysIn(object);\n  }\n  var isProto = _isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty$b.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nvar _baseKeysIn = baseKeysIn;\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike_1(object) ? _arrayLikeKeys(object, true) : _baseKeysIn(object);\n}\n\nvar keysIn_1 = keysIn;\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return _copyObject(value, keysIn_1(value));\n}\n\nvar toPlainObject_1 = toPlainObject;\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = _safeGet(object, key),\n      srcValue = _safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    _assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray_1(srcValue),\n        isBuff = !isArr && isBuffer_1(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray_1(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray_1(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject_1(objValue)) {\n        newValue = _copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = _cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = _cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject_1(srcValue) || isArguments_1(srcValue)) {\n      newValue = objValue;\n      if (isArguments_1(objValue)) {\n        newValue = toPlainObject_1(objValue);\n      }\n      else if (!isObject_1(objValue) || isFunction_1(objValue)) {\n        newValue = _initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  _assignMergeValue(object, key, newValue);\n}\n\nvar _baseMergeDeep = baseMergeDeep;\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  _baseFor(source, function(srcValue, key) {\n    stack || (stack = new _Stack);\n    if (isObject_1(srcValue)) {\n      _baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(_safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      _assignMergeValue(object, key, newValue);\n    }\n  }, keysIn_1);\n}\n\nvar _baseMerge = baseMerge;\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nvar identity_1 = identity;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nvar _apply = apply;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return _apply(func, this, otherArgs);\n  };\n}\n\nvar _overRest = overRest;\n\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nvar constant_1 = constant;\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !_defineProperty$1 ? identity_1 : function(func, string) {\n  return _defineProperty$1(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant_1(string),\n    'writable': true\n  });\n};\n\nvar _baseSetToString = baseSetToString;\n\n/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nvar _shortOut = shortOut;\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = _shortOut(_baseSetToString);\n\nvar _setToString = setToString;\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return _setToString(_overRest(func, start, identity_1), func + '');\n}\n\nvar _baseRest = baseRest;\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject_1(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike_1(object) && _isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq_1(object[index], value);\n  }\n  return false;\n}\n\nvar _isIterateeCall = isIterateeCall;\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return _baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && _isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nvar _createAssigner = createAssigner;\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = _createAssigner(function(object, source, srcIndex) {\n  _baseMerge(object, source, srcIndex);\n});\n\nvar merge_1 = merge;\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css = \".resize-observer[data-v-b329ee4c]{position:absolute;top:0;left:0;z-index:-1;width:100%;height:100%;border:none;background-color:transparent;pointer-events:none;display:block;overflow:hidden;opacity:0}.resize-observer[data-v-b329ee4c] object{display:block;position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1}\";\nstyleInject(css);\n\nfunction install(Vue) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (install.installed) return;\n  install.installed = true;\n  var finalOptions = {};\n  merge_1(finalOptions, defaultOptions, options);\n  plugin.options = finalOptions;\n  directive.options = finalOptions;\n  Vue.directive('tooltip', directive);\n  Vue.directive('close-popover', vclosepopover);\n  Vue.component('v-popover', __vue_component__);\n}\nvar VTooltip = directive;\nvar VClosePopover = vclosepopover;\nvar VPopover = __vue_component__;\nvar plugin = {\n  install: install,\n\n  get enabled() {\n    return state.enabled;\n  },\n\n  set enabled(value) {\n    state.enabled = value;\n  }\n\n}; // Auto-install\n\nvar GlobalVue = null;\n\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue;\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue;\n}\n\nif (GlobalVue) {\n  GlobalVue.use(plugin);\n}\n\nexport default plugin;\nexport { VClosePopover, VPopover, VTooltip, createTooltip, destroyTooltip, install };\n"]}]}