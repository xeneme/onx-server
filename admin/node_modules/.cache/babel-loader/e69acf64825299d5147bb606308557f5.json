{"remainingRequest":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/thread-loader/dist/cjs.js!/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/babel-loader/lib/index.js!/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/src/components/ui/chat/Chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/src/components/ui/chat/Chat.vue","mtime":1604871598187},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/Working_Area/DEV/CUSTOMERS/onyxian/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IFN0aWNreVNjcm9sbCB9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL3Z1ZXN0aWMtdWkvY29tcG9uZW50cyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnY2hhdCcsCiAgZGlyZWN0aXZlczogewogICAgU3RpY2t5U2Nyb2xsOiBTdGlja3lTY3JvbGwKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbnB1dE1lc3NhZ2U6ICcnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbXB1dGVkU3R5bGU6IGZ1bmN0aW9uIGNvbXB1dGVkU3R5bGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLiR0aGVtZXMuZGFya0ZvcmVncm91bmQsCiAgICAgICAgY29sb3I6ICd3aGl0ZScKICAgICAgfTsKICAgIH0sCiAgICBjb21wdXRlZFlvdXJzU3R5bGU6IGZ1bmN0aW9uIGNvbXB1dGVkWW91cnNTdHlsZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMuJHRoZW1lcy5pbmZvLAogICAgICAgIGNvbG9yOiAnd2hpdGUnCiAgICAgIH07CiAgICB9CiAgfSwKICBwcm9wczogewogICAgdmFsdWU6IEFycmF5CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6ICdzY3JvbGxUb0JvdHRvbScKICB9LAogIG1ldGhvZHM6IHsKICAgIHNjcm9sbFRvQm90dG9tOiBmdW5jdGlvbiBzY3JvbGxUb0JvdHRvbSh2YWwsIG9sZCkgewogICAgICBpZiAodmFsICYmIG9sZCAmJiB2YWwubGVuZ3RoID09IG9sZC5sZW5ndGgpIHJldHVybjsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG1lc3NhZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZhLWNoYXRfX2JvZHknKTsKICAgICAgICBtZXNzYWdlcy5zY3JvbGxUb3AgPSBtZXNzYWdlcy5zY3JvbGxIZWlnaHQgLSBtZXNzYWdlcy5jbGllbnRIZWlnaHQ7CiAgICAgIH0sIDEwKTsKICAgIH0sCiAgICBzZW5kTWVzc2FnZTogZnVuY3Rpb24gc2VuZE1lc3NhZ2UoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuaW5wdXRNZXNzYWdlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHsKICAgICAgICB0ZXh0OiB0aGlzLmlucHV0TWVzc2FnZSwKICAgICAgICB5b3VyczogdHJ1ZQogICAgICB9KTsKICAgICAgdGhpcy5pbnB1dE1lc3NhZ2UgPSAnJzsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy52YS1jaGF0X19pbnB1dCcpLmZvY3VzKCk7CiAgICAgIH0sIDEwKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7CiAgfQp9Ow=="},{"version":3,"sources":["Chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA,SAAA,YAAA,QAAA,yCAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,YAAA,EAAA;AAAA,GAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AADA,KAAA;AAGA,GAPA;AAQA,EAAA,QAAA,EAAA;AACA,IAAA,aADA,2BACA;AACA,aAAA;AAAA,QAAA,eAAA,EAAA,KAAA,OAAA,CAAA,cAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAAA;AACA,KAHA;AAIA,IAAA,kBAJA,gCAIA;AACA,aAAA;AAAA,QAAA,eAAA,EAAA,KAAA,OAAA,CAAA,IAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAAA;AACA;AANA,GARA;AAgBA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GAhBA;AAmBA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GAnBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,0BACA,GADA,EACA,GADA,EACA;AACA,UAAA,GAAA,IAAA,GAAA,IAAA,GAAA,CAAA,MAAA,IAAA,GAAA,CAAA,MAAA,EAAA;AAEA,MAAA,UAAA,CAAA,YAAA;AACA,YAAA,QAAA,GAAA,QAAA,CAAA,aAAA,CAAA,gBAAA,CAAA;AACA,QAAA,QAAA,CAAA,SAAA,GAAA,QAAA,CAAA,YAAA,GAAA,QAAA,CAAA,YAAA;AACA,OAHA,EAGA,EAHA,CAAA;AAIA,KARA;AASA,IAAA,WATA,yBASA;AAAA;;AACA,UAAA,CAAA,KAAA,YAAA,EAAA;AACA;AACA;;AACA,WAAA,KAAA,CAAA,OAAA,EAAA;AACA,QAAA,IAAA,EAAA,KAAA,YADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAAA;AAIA,WAAA,YAAA,GAAA,EAAA;AACA,MAAA,UAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,GAAA,CAAA,aAAA,CAAA,iBAAA,EAAA,KAAA;AACA,OAFA,EAEA,EAFA,CAAA;AAGA;AArBA,GAtBA;AA6CA,EAAA,OA7CA,qBA6CA;AACA,SAAA,cAAA;AACA;AA/CA,CAAA","sourcesContent":["<template>\n  <div class=\"va-chat\">\n    <div\n      class=\"va-chat__body\"\n      :style=\"{ backgroundColor: '#00000017' }\"\n      v-sticky-scroll=\"{\n        animate: true,\n        duration: 200,\n      }\"\n    >\n      <div class=\"va-chat__body-messages\">\n        <div\n          class=\"va-chat__message\"\n          v-for=\"(message, index) in value\"\n          :key=\"index\"\n          :style=\"{\n            ...(message.yours ? computedYoursStyle : computedStyle),\n            paddingTop: !message.delivered ? '1.4rem' : '0.657rem',\n          }\"\n          :class=\"{ 'va-chat__message--yours': message.yours }\"\n        >\n          <div\n            class=\"va-chat__message-info\"\n            :style=\"{\n              left: message.yours ? 'auto' : '0.5rem',\n              right: message.yours ? '0.5rem' : 'auto',\n            }\"\n          >\n            <va-icon\n              name=\"fa fa-spinner fa-spin\"\n              v-if=\"!message.delivered\"\n            ></va-icon>\n          </div>\n\n          <span\n            class=\"va-chat__message-text\"\n            :style=\"{\n              textAlign: message.yours ? 'right' : 'left',\n            }\"\n          >\n            {{ message.text }}\n          </span>\n          <span\n            class=\"va-chat__message_date\"\n            :style=\"{\n              opacity: 0.4,\n              textAlign: message.yours ? 'right' : 'left',\n            }\"\n          >\n            {{ message.date }}\n          </span>\n        </div>\n      </div>\n    </div>\n    <div class=\"va-chat__controls\">\n      <va-input\n        :autosize=\"true\"\n        v-model=\"inputMessage\"\n        @keypress.enter=\"sendMessage\"\n        :placeholder=\"$t('dashboard.support.placeholder')\"\n        class=\"va-chat__input\"\n      />\n      <va-button @click=\"sendMessage\">\n        {{ $t('buttons.send') }}\n      </va-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { StickyScroll } from '../../../services/vuestic-ui/components'\n\nexport default {\n  name: 'chat',\n  directives: { StickyScroll },\n  data() {\n    return {\n      inputMessage: '',\n    }\n  },\n  computed: {\n    computedStyle() {\n      return { backgroundColor: this.$themes.darkForeground, color: 'white' }\n    },\n    computedYoursStyle() {\n      return { backgroundColor: this.$themes.info, color: 'white' }\n    },\n  },\n  props: {\n    value: Array,\n  },\n  watch: {\n    value: 'scrollToBottom',\n  },\n  methods: {\n    scrollToBottom(val, old) {\n      if(val && old && val.length == old.length) return\n      \n      setTimeout(() => {\n        var messages = document.querySelector('.va-chat__body')\n        messages.scrollTop = messages.scrollHeight - messages.clientHeight\n      }, 10)\n    },\n    sendMessage() {\n      if (!this.inputMessage) {\n        return\n      }\n      this.$emit('input', {\n        text: this.inputMessage,\n        yours: true,\n      })\n      this.inputMessage = ''\n      setTimeout(() => {\n        this.$el.querySelector('.va-chat__input').focus()\n      }, 10)\n    },\n  },\n  mounted() {\n    this.scrollToBottom()\n  },\n}\n</script>\n\n<style lang=\"scss\">\n.chat {\n  &__content {\n    @include va-flex-center();\n  }\n}\n\n$chat-message-br: 0.65rem;\n\n.va-chat {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  display: grid;\n  grid-template-rows: 1fr 6rem;\n\n  &__body {\n    padding: 20px 10px;\n    width: 100%;\n    height: 100%;\n    overflow-y: auto;\n\n    &-messages {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-end;\n      max-height: 300px;\n    }\n  }\n\n  &__message {\n    position: relative;\n    padding: 0.657rem 1.375rem;\n    margin-bottom: $chat-message-br;\n    max-width: 70%;\n    overflow-wrap: break-word;\n    border-radius: 0.5rem;\n    border-top-left-radius: 0;\n    align-self: flex-start;\n    background-color: $light-gray2;\n    transition: padding 0.3s;\n\n    &-info {\n      position: absolute;\n      top: 0.4rem;\n      font-size: 0.6rem;\n    }\n\n    &-text {\n      display: block;\n      transform: translateY(-2px);\n    }\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n\n    &--yours {\n      align-self: flex-end;\n      border-top-right-radius: 0;\n      border-top-left-radius: 0.5rem;\n    }\n\n    &_date {\n      font-family: sans-serif;\n      font-size: 0.8rem;\n      opacity: 0;\n      transition: opacity 0.5s;\n    }\n  }\n\n  &__controls {\n    display: flex;\n    align-items: center;\n    height: 100%;\n    width: 100%;\n  }\n\n  &__input {\n    margin-bottom: 0;\n    color: white;\n  }\n}\n</style>\n"],"sourceRoot":"src/components/ui/chat"}]}