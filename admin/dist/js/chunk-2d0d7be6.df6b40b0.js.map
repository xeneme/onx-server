{"version":3,"sources":["webpack:///./src/components/settings/Settings.vue?ef8b","webpack:///./src/components/settings/CustomWithdrawError.vue?5ef2","webpack:///./src/services/Settings.js","webpack:///src/components/settings/CustomWithdrawError.vue","webpack:///./src/components/settings/CustomWithdrawError.vue?afc2","webpack:///./src/components/settings/CustomWithdrawError.vue","webpack:///src/components/settings/Settings.vue","webpack:///./src/components/settings/Settings.vue?241b","webpack:///./src/components/settings/Settings.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticRenderFns","attrs","computedWidgetColor","loading","style","opacity","$t","model","value","callback","$$v","depositErrorMessage","expression","commission","class","requireConfirmation","withdrawErrorMessage","_e","on","save","_v","_s","base","window","location","protocol","host","setCommission","percent","axios","post","setCustomDepositError","error","setCustomWithdrawError","requireConfirmationEmail","require_email","name","inject","data","computed","$themes","background","methods","updateData","withdrawEmailErrorMessage","withdrawEmailConfirmation","handleSuccess","showToast","response","message","icon","position","duration","type","handleError","pending","settings","push","Promise","all","watch","user","mounted","component","components","CustomWithdrawError","provide"],"mappings":"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","file":"js/chunk-2d0d7be6.df6b40b0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"settings\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"flex md12 lg6\"},[_c('custom-withdraw-error')],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('va-card',{attrs:{\"color\":_vm.computedWidgetColor,\"title\":'Custom withdraw error'}},[_c('va-inner-loading',{attrs:{\"loading\":_vm.loading}},[_c('div',{style:({\n        opacity: this.loading ? 0.2 : 1,\n      })},[_c('va-input',{attrs:{\"type\":\"textarea\",\"label\":_vm.$t('settings.withdraw')},model:{value:(_vm.depositErrorMessage),callback:function ($$v) {_vm.depositErrorMessage=$$v},expression:\"depositErrorMessage\"}}),_c('va-input',{attrs:{\"label\":\"Comission percentage\"},model:{value:(_vm.commission),callback:function ($$v) {_vm.commission=$$v},expression:\"commission\"}}),_c('va-checkbox',{class:_vm.requireConfirmation ? 'mb-3 mt-3' : 'mt-3',attrs:{\"label\":_vm.$t('settings.require')},model:{value:(_vm.requireConfirmation),callback:function ($$v) {_vm.requireConfirmation=$$v},expression:\"requireConfirmation\"}}),(_vm.requireConfirmation)?_c('va-input',{attrs:{\"type\":\"textarea\",\"label\":_vm.$t('settings.email')},model:{value:(_vm.withdrawErrorMessage),callback:function ($$v) {_vm.withdrawErrorMessage=$$v},expression:\"withdrawErrorMessage\"}}):_vm._e(),_c('va-button',{staticClass:\"mt-3\",on:{\"click\":_vm.save}},[_vm._v(_vm._s(_vm.$t('settings.save')))])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios'\r\n\r\nconst base =\r\n  window.location.protocol + '//' + window.location.host + '/api/admin'\r\n\r\nconst setCommission = percent =>\r\n  axios.post(base + '/set_commission', {\r\n    commission: percent,\r\n  })\r\nconst setCustomDepositError = error =>\r\n  axios.post(base + '/set_deposit_error', {\r\n    error,\r\n  })\r\nconst setCustomWithdrawError = error =>\r\n  axios.post(base + '/set_withdraw_error', {\r\n    error,\r\n  })\r\nconst requireConfirmationEmail = value =>\r\n  axios.post(base + '/set_email_confirmation', {\r\n    require_email: value,\r\n  })\r\n\r\nexport {\r\n  setCommission,\r\n  setCustomDepositError,\r\n  setCustomWithdrawError,\r\n  requireConfirmationEmail,\r\n}\r\n","<template>\r\n  <va-card :color=\"computedWidgetColor\" :title=\"'Custom withdraw error'\">\r\n    <va-inner-loading :loading=\"loading\">\r\n      <div\r\n        :style=\"{\r\n          opacity: this.loading ? 0.2 : 1,\r\n        }\"\r\n      >\r\n        <va-input\r\n          type=\"textarea\"\r\n          v-model=\"depositErrorMessage\"\r\n          :label=\"$t('settings.withdraw')\"\r\n        />\r\n        <va-input v-model=\"commission\" label=\"Comission percentage\" />\r\n        <va-checkbox\r\n          :label=\"$t('settings.require')\"\r\n          v-model=\"requireConfirmation\"\r\n          :class=\"requireConfirmation ? 'mb-3 mt-3' : 'mt-3'\"\r\n        />\r\n        <va-input\r\n          v-if=\"requireConfirmation\"\r\n          type=\"textarea\"\r\n          v-model=\"withdrawErrorMessage\"\r\n          :label=\"$t('settings.email')\"\r\n        />\r\n        <va-button class=\"mt-3\" @click=\"save\">{{\r\n          $t('settings.save')\r\n        }}</va-button>\r\n      </div>\r\n    </va-inner-loading>\r\n  </va-card>\r\n</template>\r\n\r\n<script>\r\nimport * as Settings from '../../services/Settings'\r\n\r\nexport default {\r\n  name: 'custom-withdraw-error',\r\n  inject: ['user'],\r\n  data: () => ({\r\n    loading: false,\r\n    requireConfirmation: false,\r\n    commission: 0,\r\n    depositErrorMessage: '',\r\n    withdrawErrorMessage: '',\r\n  }),\r\n  computed: {\r\n    computedWidgetColor() {\r\n      return this.$themes.background\r\n    },\r\n  },\r\n  methods: {\r\n    updateData(user) {\r\n      const {\r\n        commission,\r\n        withdrawErrorMessage,\r\n        withdrawEmailErrorMessage,\r\n        withdrawEmailConfirmation,\r\n      } = user.role.settings\r\n\r\n      this.commission = commission\r\n      this.depositErrorMessage = withdrawErrorMessage\r\n      this.withdrawErrorMessage = withdrawEmailErrorMessage\r\n      this.requireConfirmation = withdrawEmailConfirmation\r\n    },\r\n    handleSuccess(response) {\r\n      this.showToast(response.message, {\r\n        icon: 'fa-check',\r\n        position: 'bottom-center',\r\n        duration: 4000,\r\n        type: 'primary',\r\n      })\r\n    },\r\n    handleError(response) {\r\n      this.showToast('Operation canceled. ' + response.message + '.', {\r\n        icon: 'fa-times',\r\n        position: 'bottom-center',\r\n        duration: 4000,\r\n        type: 'primary',\r\n      })\r\n    },\r\n    save() {\r\n      this.loading = true\r\n\r\n      const settings = this.user.role.settings\r\n      var pending = []\r\n\r\n      if (this.commission != settings.commission) {\r\n        pending.push(Settings.setCommission(this.commission))\r\n      }\r\n\r\n      if (this.depositErrorMessage != settings.depositErrorMessage) {\r\n        pending.push(Settings.setCustomDepositError(this.depositErrorMessage))\r\n      }\r\n\r\n      if (this.withdrawErrorMessage != settings.withdrawErrorMessage) {\r\n        pending.push(Settings.setCustomWithdrawError(this.withdrawErrorMessage))\r\n      }\r\n\r\n      if (this.requireConfirmation != settings.withdrawEmailConfirmation) {\r\n        pending.push(\r\n          Settings.requireConfirmationEmail(this.requireConfirmation)\r\n        )\r\n      }\r\n\r\n      Promise.all(pending)\r\n        .then(result => {\r\n          this.loading = false\r\n\r\n          if (!result.length) {\r\n            this.handleSuccess({\r\n              message: \"You've successfully changed nothing!\",\r\n            })\r\n          } else {\r\n            this.commission = +this.commission\r\n\r\n            settings.commission = +this.commission\r\n            settings.depositErrorMessage = this.depositErrorMessage\r\n            settings.withdrawErrorMessage = this.withdrawErrorMessage\r\n            settings.withdrawEmailConfirmation = this.requireConfirmation\r\n\r\n            result.forEach(response => {\r\n              this.handleSuccess(response.data)\r\n            })\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.loading = false\r\n          console.log(err)\r\n          this.updateData(this.user)\r\n\r\n          this.handleError(err.response.data)\r\n        })\r\n    },\r\n  },\r\n  watch: {\r\n    user: 'updateData',\r\n  },\r\n\r\n  mounted() {\r\n    this.updateData(this.user)\r\n  },\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomWithdrawError.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomWithdrawError.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CustomWithdrawError.vue?vue&type=template&id=0e41cc42&\"\nimport script from \"./CustomWithdrawError.vue?vue&type=script&lang=js&\"\nexport * from \"./CustomWithdrawError.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"settings\">\r\n    <div class=\"row\">\r\n      <div class=\"flex md12 lg6\">\r\n        <custom-withdraw-error />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CustomWithdrawError from './CustomWithdrawError'\r\n\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  name: 'Settings',\r\n  components: {\r\n    CustomWithdrawError,\r\n  },\r\n  provide() {\r\n    return {\r\n      user: this.user,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      user: 'user',\r\n    }),\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=995f5eb2&scoped=true&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"995f5eb2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}